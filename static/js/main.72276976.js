/*! For license information please see main.72276976.js.LICENSE.txt */
!function(){var e={371:function(e,t,n){var r;!function(i){var a=Object.hasOwnProperty,o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s="object"==typeof process&&"function"==typeof process.nextTick,c="function"===typeof Symbol,u="object"===typeof Reflect,l="function"===typeof setImmediate?setImmediate:setTimeout,d=c?u&&"function"===typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function f(){this._events={},this._conf&&h.call(this,this._conf)}function h(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==i&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!==typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var v=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function m(e,t){for(var n={},r=e.length,a=t?t.length:0,o=0;o<r;o++)n[e[o]]=o<a?t[o]:i;return n}function g(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!==typeof r)throw TypeError("on method must be a function");if("function"!==typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var a=e._observers;a?a.push(this):e._observers=[this]}function y(e,t,n,r){var o=Object.assign({},t);if(!e)return o;if("object"!==typeof e)throw TypeError("options must be an object");var s,c,u,l=Object.keys(e),d=l.length;function f(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<d;h++){if(s=l[h],!r&&!a.call(t,s))throw Error('Unknown "'+s+'" option');(c=e[s])!==i&&(u=n[s],o[s]=u?u(c,f):c)}return o}function k(e,t){return"function"===typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function b(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var a=typeof e;if(a===r||a===i)return e;n(t)}:function(r,i){for(var a=typeof r,o=n;o-- >0;)if(a===e[o])return r;i(t)}}Object.assign(g.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,a=this._emitter,o=this._listeners,s=function(){var r=v.apply(null,arguments),o={data:r,name:t,original:e};if(n){var s=n.call(i,o);!1!==s&&a.emit.apply(a,[o.name].concat(r))}else a.emit.apply(a,[t].concat(r))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===o[e]&&(o[e]=s,r._on.call(i,e,s))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!a.hasListeners(n)&&o[e]&&(o[e]=null,r._off.call(i,e,s))},o[e]=null,a.on("removeListener",this._onRemoveListener)):(o[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,a=this._listeners,o=this._emitter,s=this._off,c=this._target;if(e&&"string"!==typeof e)throw TypeError("event must be a string");function u(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=E.call(o,i);o._observers.splice(e,1)}if(e){if(!(t=a[e]))return;s.call(c,e,t),delete a[e],--this._listenersCount||u()}else{for(r=(n=d(a)).length;r-- >0;)e=n[r],s.call(c,e,a[e]);this._listeners={},this._listenersCount=0,u()}}});var w=b(["function"]),S=b(["object","function"]);function T(e,t,n){var r,i,a,o=0,s=new e((function(c,u,l){function d(){i&&(i=null),o&&(clearTimeout(o),o=0)}n=y(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!==typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"===typeof e.prototype.cancel&&"function"===typeof l;var f=function(e){d(),c(e)},h=function(e){d(),u(e)};r?t(f,h,l):(i=[function(e){h(e||Error("canceled"))}],t(f,h,(function(e){if(a)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!==typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),a=!0),n.timeout>0&&(o=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,s.cancel(e),u(e)}),n.timeout))}));return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function E(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function x(e,t,n,r,i){if(!n)return null;if(0===r){var a=typeof t;if("string"===a){var o,s,c=0,u=0,l=this.delimiter,f=l.length;if(-1!==(s=t.indexOf(l))){o=new Array(5);do{o[c++]=t.slice(u,s),u=s+f}while(-1!==(s=t.indexOf(l,u)));o[c++]=t.slice(u),t=o,i=c}else t=[t],i=1}else"object"===a?i=t.length:(t=[t],i=1)}var h,p,v,m,g,y,k,b=null,w=t[r],S=t[r+1];if(r===i)n._listeners&&("function"===typeof n._listeners?(e&&e.push(n._listeners),b=[n]):(e&&e.push.apply(e,n._listeners),b=[n]));else{if("*"===w){for(s=(y=d(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&(k=x(e,t,n[h],r+1,i))&&(b?b.push.apply(b,k):b=k);return b}if("**"===w){for((g=r+1===i||r+2===i&&"*"===S)&&n._listeners&&(b=x(e,t,n,i,i)),s=(y=d(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&("*"===h||"**"===h?(n[h]._listeners&&!g&&(k=x(e,t,n[h],i,i))&&(b?b.push.apply(b,k):b=k),k=x(e,t,n[h],r,i)):k=x(e,t,n[h],h===S?r+2:r,i),k&&(b?b.push.apply(b,k):b=k));return b}n[w]&&(b=x(e,t,n[w],r+1,i))}if((p=n["*"])&&x(e,t,p,r+1,i),v=n["**"])if(r<i)for(v._listeners&&x(e,t,v,i,i),s=(y=d(v)).length;s-- >0;)"_listeners"!==(h=y[s])&&(h===S?x(e,t,v[h],r+2,i):h===w?x(e,t,v[h],r+1,i):((m={})[h]=v[h],x(e,t,{"**":m},r+1,i)));else v._listeners?x(e,t,v,i,i):v["*"]&&v["*"]._listeners&&x(e,t,v["*"],i,i);return b}function C(e,t,n){var r,i,a=0,o=0,s=this.delimiter,c=s.length;if("string"===typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[a++]=e.slice(o,r),o=r+c}while(-1!==(r=e.indexOf(s,o)));i[a++]=e.slice(o)}else i=[e],a=1;else i=e,a=e.length;if(a>1)for(r=0;r+1<a;r++)if("**"===i[r]&&"**"===i[r+1])return;var u,l=this.listenerTree;for(r=0;r<a;r++)if(l=l[u=i[r]]||(l[u]={}),r===a-1)return l._listeners?("function"===typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,p.call(this,l._listeners.length,u))):l._listeners=t,!0;return!0}function P(e,t,n,r){for(var i,a,o,s,c=d(e),u=c.length,l=e._listeners;u-- >0;)i=e[a=c[u]],o="_listeners"===a?n:n?n.concat(a):[a],s=r||"symbol"===typeof a,l&&t.push(s?o:o.join(this.delimiter)),"object"===typeof i&&P.call(this,i,t,o,s);return t}function R(e){for(var t,n,r,i=d(e),a=i.length;a-- >0;)(t=e[n=i[a]])&&(r=!0,"_listeners"===n||R(t)||delete e[n]);return r}function _(e,t,n){this.emitter=e,this.event=t,this.listener=n}function A(e,t,n){if(!0===n)a=!0;else if(!1===n)r=!0;else{if(!n||"object"!==typeof n)throw TypeError("options should be an object or true");var r=n.async,a=n.promisify,o=n.nextTick,c=n.objectify}if(r||o||a){var u=t,d=t._origin||t;if(o&&!s)throw Error("process.nextTick is not supported");a===i&&(a="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,n=this.event;return a?o?Promise.resolve():new Promise((function(e){l(e)})).then((function(){return t.event=n,u.apply(t,e)})):(o?process.nextTick:l)((function(){t.event=n,u.apply(t,e)}))},t._async=!0,t._origin=d}return[t,c?new _(this,e,t):this]}function I(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,e)}_.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},I.EventEmitter2=I,I.prototype.listenTo=function(e,t,n){if("object"!==typeof e)throw TypeError("target musts be an object");var r=this;function a(t){if("object"!==typeof t)throw TypeError("events must be an object");var i,a=n.reducers,o=E.call(r,e);i=-1===o?new g(r,e,n):r._observers[o];for(var s,c=d(t),u=c.length,l="function"===typeof a,f=0;f<u;f++)s=c[f],i.subscribe(s,t[s]||s,l?a:a&&a[s])}return n=y(n,{on:i,off:i,reducers:i},{on:w,off:w,reducers:S}),o(t)?a(m(t)):a("string"===typeof t?m(t.split(/\s+/)):t),this},I.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,a=!1;if(e&&"object"!==typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),a=!0);return a},I.prototype.delimiter=".",I.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},I.prototype.getMaxListeners=function(){return this._maxListeners},I.prototype.event="",I.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},I.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},I.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},I.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},I.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},I.prototype._many=function(e,t,n,r,i){var a=this;if("function"!==typeof n)throw new Error("many only accepts instances of Function");function o(){return 0===--t&&a.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r,i)},I.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e,t,n,r,i,a,o=arguments[0],s=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return!1;if(s&&(e=o,"newListener"!==o&&"removeListener"!==o&&"object"===typeof o)){if(n=o.length,c)for(r=0;r<n;r++)if("symbol"===typeof o[r]){a=!0;break}a||(o=o.join(this.delimiter))}var u,l=arguments.length;if(this._all&&this._all.length)for(r=0,n=(u=this._all.slice()).length;r<n;r++)switch(this.event=o,l){case 1:u[r].call(this,o);break;case 2:u[r].call(this,o,arguments[1]);break;case 3:u[r].call(this,o,arguments[1],arguments[2]);break;default:u[r].apply(this,arguments)}if(s)u=[],x.call(this,u,e,this.listenerTree,0,n);else{if("function"===typeof(u=this._events[o])){switch(this.event=o,l){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(l>3)for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];for(r=0,n=u.length;r<n;r++)switch(this.event=o,l){case 1:u[r].call(this);break;case 2:u[r].call(this,arguments[1]);break;case 3:u[r].call(this,arguments[1],arguments[2]);break;default:u[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===o)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},I.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e,t,n,r,i,a,o=arguments[0],s=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(e=o,"newListener"!==o&&"removeListener"!==o&&"object"===typeof o)){if(r=o.length,c)for(i=0;i<r;i++)if("symbol"===typeof o[i]){t=!0;break}t||(o=o.join(this.delimiter))}var u,l=[],d=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=o,d){case 1:l.push(this._all[i].call(this,o));break;case 2:l.push(this._all[i].call(this,o,arguments[1]));break;case 3:l.push(this._all[i].call(this,o,arguments[1],arguments[2]));break;default:l.push(this._all[i].apply(this,arguments))}if(s?(u=[],x.call(this,u,e,this.listenerTree,0)):u=this._events[o],"function"===typeof u)switch(this.event=o,d){case 1:l.push(u.call(this));break;case 2:l.push(u.call(this,arguments[1]));break;case 3:l.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(d-1),a=1;a<d;a++)n[a-1]=arguments[a];l.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),d>3)for(n=new Array(d-1),a=1;a<d;a++)n[a-1]=arguments[a];for(i=0,r=u.length;i<r;i++)switch(this.event=o,d){case 1:l.push(u[i].call(this));break;case 2:l.push(u[i].call(this,arguments[1]));break;case 3:l.push(u[i].call(this,arguments[1],arguments[2]));break;default:l.push(u[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===o)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},I.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},I.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},I.prototype.onAny=function(e){return this._onAny(e,!1)},I.prototype.prependAny=function(e){return this._onAny(e,!0)},I.prototype.addListener=I.prototype.on,I.prototype._onAny=function(e,t){if("function"!==typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},I.prototype._on=function(e,t,n,r){if("function"===typeof e)return this._onAny(e,t),this;if("function"!==typeof t)throw new Error("on only accepts instances of Function");this._events||f.call(this);var a,o=this;return r!==i&&(t=(a=A.call(this,e,t,r))[0],o=a[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(C.call(this,e,t,n),o):(this._events[e]?("function"===typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,p.call(this,this._events[e].length,e))):this._events[e]=t,o)},I.prototype.off=function(e,t){if("function"!==typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"===typeof e?e.split(this.delimiter):e.slice();if(!(r=x.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var s=r[a];if(n=s._listeners,o(n)){for(var c=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&R(this.listenerTree),this},I.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},I.prototype.removeListener=I.prototype.off,I.prototype.removeAllListeners=function(e){if(e===i)return!this._events||f.call(this),this;if(this.wildcard){var t,n=x.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&R(this.listenerTree)}else this._events&&(this._events[e]=null);return this},I.prototype.listeners=function(e){var t,n,r,a,o,s=this._events;if(e===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(a=(t=d(s)).length,r=[];a-- >0;)"function"===typeof(n=s[t[a]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(o=this.listenerTree))return[];var c=[],u="string"===typeof e?e.split(this.delimiter):e.slice();return x.call(this,c,u,o,0),c}return s&&(n=s[e])?"function"===typeof n?[n]:n:[]},I.prototype.eventNames=function(e){var t=this._events;return this.wildcard?P.call(this,this.listenerTree,[],null,e):t?d(t):[]},I.prototype.listenerCount=function(e){return this.listeners(e).length},I.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"===typeof e?e.split(this.delimiter):e.slice();return x.call(this,t,n,this.listenerTree,0),t.length>0}var r=this._events,a=this._all;return!!(a&&a.length||r&&(e===i?d(r).length:r[e]))},I.prototype.listenersAny=function(){return this._all?this._all:[]},I.prototype.waitFor=function(e,t){var n=this,r=typeof t;return"number"===r?t={timeout:t}:"function"===r&&(t={filter:t}),T((t=y(t,{timeout:0,filter:i,handleError:!1,Promise:Promise,overload:!1},{filter:w,Promise:k})).Promise,(function(r,i,a){function o(){var a=t.filter;if(!a||a.apply(n,arguments))if(n.off(e,o),t.handleError){var s=arguments[0];s?i(s):r(v.apply(null,arguments).slice(1))}else r(v.apply(null,arguments))}a((function(){n.off(e,o)})),n._on(e,o,!1)}),{timeout:t.timeout,overload:t.overload})};var O=I.prototype;Object.defineProperties(I,{defaultMaxListeners:{get:function(){return O._maxListeners},set:function(e){if("number"!==typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");O._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return T((n=y(n,{Promise:Promise,timeout:0,overload:!1},{Promise:k})).Promise,(function(n,r,i){var a;if("function"===typeof e.addEventListener)return a=function(){n(v.apply(null,arguments))},i((function(){e.removeEventListener(t,a)})),void e.addEventListener(t,a,{once:!0});var o,s=function(){o&&e.removeListener("error",o),n(v.apply(null,arguments))};"error"!==t&&(o=function(n){e.removeListener(t,s),r(n)},e.once("error",o)),i((function(){o&&e.removeListener("error",o),e.removeListener(t,s)})),e.once(t,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(O,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(r=function(){return I}.call(t,n,t,e))===i||(e.exports=r)}()},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),P=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case S:return"Portal";case x:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Te=null,Ee=null;function xe(e){if(e=ki(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Ce(e){Te?Ee?Ee.push(e):Ee=[e]:Te=e}function Pe(){if(Te){var e=Te,t=Ee;if(Ee=Te=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Re(e,t){return e(t)}function _e(){}var Ae=!1;function Ie(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Re(e,t,n)}finally{Ae=!1,(null!==Te||null!==Ee)&&(_e(),Pe())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Ne=!1}function Le(e,t,n,r,i,a,o,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,s,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,Tt,Et,xt,Ct=!1,Pt=[],Rt=null,_t=null,At=null,It=new Map,Ot=new Map,Nt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void xt(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Ct=!1,null!==Rt&&Ut(Rt)&&(Rt=null),null!==_t&&Ut(_t)&&(_t=null),null!==At&&Ut(At)&&(At=null),It.forEach(jt),Ot.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Pt.length){Bt(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Rt&&Bt(Rt,e),null!==_t&&Bt(_t,e),null!==At&&Bt(At,e),It.forEach(t),Ot.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Nt.shift()}var Gt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=kt,a=Gt.transition;Gt.transition=null;try{kt=1,qt(e,t,n,r)}finally{kt=i,Gt.transition=a}}function Kt(e,t,n,r){var i=kt,a=Gt.transition;Gt.transition=null;try{kt=4,qt(e,t,n,r)}finally{kt=i,Gt.transition=a}}function qt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Rt=Mt(Rt,e,t,n,r,i),!0;case"dragenter":return _t=Mt(_t,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return It.set(a,Mt(It.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Jt(e,t,n,r))&&Hr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(un),dn=F({},un,{view:0,detail:0}),fn=an(dn),hn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),vn=an(F({},hn,{dataTransfer:0})),mn=an(F({},dn,{relatedTarget:0})),gn=an(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),bn=an(F({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function xn(){return En}var Cn=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=an(Cn),Rn=an(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),An=an(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(In),Nn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Qn(e){Ur(e,0)}function Jn(e){if(q(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Jn(qn)){var t=[];Wn(t,qn,e,we(e)),Ie(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(qn)}function ar(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Tr={},Er={};function xr(e){if(Tr[e])return Tr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Tr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=xr("animationend"),Pr=xr("animationiteration"),Rr=xr("animationstart"),_r=xr("transitionend"),Ar=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),c(t,[e])}for(var Nr=0;Nr<Ir.length;Nr++){var Dr=Ir[Nr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Pr,"onAnimationIteration"),Or(Rr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(_r,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,c,u){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break e;Fr(i,s,u),a=c}else for(o=0;o<r.length;o++){if(c=(s=r[o]).instance,u=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break e;Fr(i,s,u),a=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(c=o.tag)||6===c){r=a=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=a,i=we(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var c=ln,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Pn;break;case"focusin":u="focus",c=mn;break;case"focusout":u="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=_n;break;case Cr:case Pr:case Rr:c=gn;break;case _r:c=An;break;case"scroll":c=fn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Rn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=Oe(p,f))&&l.push(Wr(p,v,h)))),d)break;p=p.return}0<l.length&&(s=new c(s,u,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==c?s:bi(c),h=null==u?s:bi(u),(s=new l(v,p+"leave",c,n,i)).target=d,s.relatedTarget=h,v=null,yi(i)===r&&((l=new l(f,p+"enter",u,n,i)).target=h,l.relatedTarget=d,v=l),d=v,c&&u)e:{for(f=u,p=0,h=l=c;h;h=qr(h))p++;for(h=0,v=f;v;v=qr(v))h++;for(;0<p-h;)l=qr(l),p--;for(;0<h-p;)f=qr(f),h--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=qr(l),f=qr(f)}l=null}else l=null;null!==c&&Qr(o,s,c,l,!1),null!==u&&null!==d&&Qr(o,d,u,l,!0)}if("select"===(c=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Yn;else if(Hn(s))if($n)m=or;else{m=ir;var g=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?bi(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(g=Kr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=Bn(n))&&(k.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(c=Oe(n,a))&&o.unshift(Wr(n,c,s)):i||null!=(c=Oe(n,a))&&o.push(Wr(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,hi="__reactProps$"+di,pi="__reactContainer$"+di,vi="__reactEvents$"+di,mi="__reactListeners$"+di,gi="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[hi]||null}var Si=[],Ti=-1;function Ei(e){return{current:e}}function xi(e){0>Ti||(e.current=Si[Ti],Si[Ti]=null,Ti--)}function Ci(e,t){Ti++,Si[Ti]=e.current,e.current=t}var Pi={},Ri=Ei(Pi),_i=Ei(!1),Ai=Pi;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){xi(_i),xi(Ri)}function Di(e,t,n){if(Ri.current!==Pi)throw Error(a(168));Ci(Ri,t),Ci(_i,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Ai=Ri.current,Ci(Ri,e),Ci(_i,_i.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,xi(_i),xi(Ri),Ci(Ri,e)):xi(_i),Ci(_i,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),qe(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var Gi=[],Hi=0,Wi=null,Ki=0,qi=[],Qi=0,Ji=null,Yi=1,$i="";function Xi(e,t){Gi[Hi++]=Ki,Gi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){qi[Qi++]=Yi,qi[Qi++]=$i,qi[Qi++]=Ji,Ji=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Yi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Wi;)Wi=Gi[--Hi],Gi[Hi]=null,Ki=Gi[--Hi],Gi[Hi]=null;for(;e===Ji;)Ji=qi[--Qi],qi[Qi]=null,$i=qi[--Qi],qi[Qi]=null,Yi=qi[--Qi],qi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Iu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Iu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ca(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ca(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ui(e.nextSibling)}function ha(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ei(null),ya=null,ka=null,ba=null;function wa(){ba=ka=ya=null}function Sa(e){var t=ga.current;xi(ga),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ya=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ya)throw Error(a(308));ka=e,ya.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Pa(e){null===Ca?Ca=[e]:Ca.push(e)}function Ra(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Pa(t)):(n.next=i.next,i.next=n),t.interleaved=n,_a(e,r)}function _a(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,_a(e,n)}return null===(i=r.interleaved)?(t.next=t,Pa(r)):(t.next=i.next,i.next=t),r.interleaved=t,_a(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,u=c.next;c.next=null,null===o?a=u:o.next=u,o=c;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(null!==a){var d=i.baseState;for(o=0,l=u=c=null,s=a;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(h,d,f):p)||void 0===f)break e;d=F({},d,f);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(u=l=h,c=d):l=l.next=h,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=d}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Na(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nu(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Na(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nu(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Na(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nu(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,a))}function Ga(e,t,n){var r=!1,i=Pi,a=t.contextType;return"object"===typeof a&&null!==a?a=xa(a):(i=Oi(t)?Ai:Ri.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Pi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ia(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=xa(a):(a=Oi(t)?Ai:Ri.current,i.context=Ii(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===T?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case S:return(t=Uu(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null;case O:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,s,c){for(var u=null,l=null,d=a,v=a=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=h(i,d,s[v],c);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,v),null===l?u=g:l.sibling=g,l=g,d=m}if(v===s.length)return n(i,d),ia&&Xi(i,v),u;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],c))&&(a=o(d,a,v),null===l?u=d:l.sibling=d,l=d);return ia&&Xi(i,v),u}for(d=r(i,d);v<s.length;v++)null!==(m=p(d,i,v,s[v],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),u}function m(i,s,c,u){var l=L(c);if("function"!==typeof l)throw Error(a(150));if(null==(c=l.call(c)))throw Error(a(151));for(var d=l=null,v=s,m=s=0,g=null,y=c.next();null!==v&&!y.done;m++,y=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=h(i,v,y.value,u);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,m),null===d?l=k:d.sibling=k,d=k,v=g}if(y.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!y.done;m++,y=c.next())null!==(y=f(i,y.value,u))&&(s=o(y,s,m),null===d?l=y:d.sibling=y,d=y);return ia&&Xi(i,m),l}for(v=r(i,v);!y.done;m++,y=c.next())null!==(y=p(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===d?l=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,c){if("object"===typeof o&&null!==o&&o.type===T&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,l=a;null!==l;){if(l.key===u){if((u=o.type)===T){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&Qa(u)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ka(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===T?((a=Lu(o.props.children,r.mode,c,o.key)).return=r,r=a):((c=Du(o.type,o.key,o.props,null,r.mode,c)).ref=Ka(r,a,o),c.return=r,r=c)}return s(r);case S:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uu(o,r.mode,c)).return=r,r=a}return s(r);case O:return e(r,a,(l=o._init)(o._payload),c)}if(te(o))return v(r,a,o,c);if(L(o))return m(r,a,o,c);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fu(o,r.mode,c)).return=r,r=a),s(r)):n(r,a)}}var Ya=Ja(!0),$a=Ja(!1),Xa={},Za=Ei(Xa),eo=Ei(Xa),to=Ei(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Za),Ci(Za,t)}function io(){xi(Za),xi(eo),xi(to)}function ao(e){no(to.current);var t=no(Za.current),n=ce(t,e.type);t!==n&&(Ci(eo,e),Ci(Za,n))}function oo(e){eo.current===e&&(xi(Za),xi(eo))}var so=Ei(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function lo(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,ko=!1,bo=0,wo=0;function So(){throw Error(a(321))}function To(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:cs,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=us,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function xo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Po(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Ro(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=Po(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=s=null,u=null,l=o;do{var d=l.lane;if((po&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=f,s=r):u=u.next=f,vo.lanes|=d,Mc|=d}l=l.next}while(null!==l&&l!==o);null===u?s=r:u.next=c,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Po(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function Oo(e,t){var n=vo,r=Po(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Ho(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===_c)throw Error(a(349));0!==(30&po)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=_a(e,1);null!==t&&nu(t,e,1,-1)}function Uo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Po().memoizedState}function Bo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Po();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&To(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Go(e,t){return Bo(8390656,8,e,t)}function Ho(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Ko(e,t){return zo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,qo.bind(null,t,e),n)}function Jo(){}function Yo(e,t){var n=Po();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&To(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Po();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&To(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mc|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return Po().memoizedState}function ts(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ra(e,t,n,r))){nu(n,e,r,eu()),as(n,t,r)}}function ns(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var c=t.interleaved;return null===c?(i.next=i,Pa(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ra(e,t,i,r))&&(nu(n,e,r,i=eu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:xa,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},ss={readContext:xa,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Go,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Uo,useDebugValue:Jo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===_c)throw Error(a(349));0!==(30&po)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Go(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=_c.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cs={readContext:xa,useCallback:Yo,useContext:xa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:_o,useRef:Vo,useState:function(){return _o(Ro)},useDebugValue:Jo,useDeferredValue:function(e){return Xo(Po(),mo.memoizedState,e)},useTransition:function(){return[_o(Ro)[0],Po().memoizedState]},useMutableSource:Io,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},us={readContext:xa,useCallback:Yo,useContext:xa,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Ro)},useDebugValue:Jo,useDeferredValue:function(e){var t=Po();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Ro)[0],Po().memoizedState]},useMutableSource:Io,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hc||(Hc=!0,Wc=r),fs(0,t)},n}function vs(e,t,n){(n=Na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ya(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=xo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ts(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ou(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Nu(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ps(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Nc,Oc),Oc|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Nc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Nc,Oc),Oc|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Nc,Oc),Oc|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ps(e,t,n,r,i){var a=Oi(n)?Ai:Ri.current;return a=Ii(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=xo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Rs(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Gs(e,t),Ga(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xa(u):u=Ii(t,u=Oi(n)?Ai:Ri.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==u)&&Ha(t,o,r,u),Aa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),c=t.memoizedState,s!==r||f!==c||_i.current||Aa?("function"===typeof l&&(Va(t,n,l,r),c=t.memoizedState),(s=Aa||za(t,n,s,r,f,c,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),o.props=u,d=t.pendingProps,f=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=xa(c):c=Ii(t,c=Oi(n)?Ai:Ri.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==c)&&Ha(t,o,r,c),Aa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==d||f!==p||_i.current||Aa?("function"===typeof h&&(Va(t,n,h,r),p=t.memoizedState),(u=Aa||za(t,n,u,r,f,p,c)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,a,i)}function _s(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Hs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Is(e,t,n,r,i){return ha(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,Ns,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,s?(i=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Mu(c,i,0,null),e=Lu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,js(e,t,s,r=ds(o=Error(a(419)),r,void 0))}if(c=0!==(s&e.childLanes),bs||c){if(null!==(r=_c)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,_a(e,i),nu(r,e,i,-1))}return vu(),js(e,t,s,r=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(qi[Qi++]=Yi,qi[Qi++]=$i,qi[Qi++]=Ji,Yi=e.id,$i=e.overflow,Ji=t),(t=Us(t,r.children)).flags|=4096,t)}(e,t,c,i,r,o,n);if(s){s=i.fallback,c=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Nu(r,s):(s=Lu(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,c=null===(c=e.child.memoizedState)?Ms(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Nu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oi(t.type)&&Ni(),Ks(t),null;case 3:return r=t.stateNode,io(),xi(_i),xi(Ri),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[hi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var c in ye(n,o),i=null,o)if(o.hasOwnProperty(c)){var u=o[c];"children"===c?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[fi]=t,e[hi]=r,Os(e,t),t.stateNode=e;e:{switch(c=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var l=u[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,c))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ks(t),null;case 13:if(xi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),ha(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Dc&&(Dc=3):vu())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Ks(t),null;case 10:return Sa(t.type._context),Ks(t),null;case 19:if(xi(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ws(o,!1);else{if(0!==Dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ws(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zc&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!ia)return Ks(t),null}else 2*$e()-o.renderingStartTime>zc&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Oc)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(_i),xi(Ri),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(so),null;case 4:return io(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(c=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(o=o||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&jr("scroll",e),o||c===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Ys=!1,$s="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Eu(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ec(t,n,a)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[hi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var lc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)hc(e,t,n),n=n.sibling}function hc(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=lc,i=dc;lc=null,fc(e,t,n),dc=i,null!==(lc=r)&&(dc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(dc?(e=lc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(lc,n.stateNode));break;case 4:r=lc,i=dc,lc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),lc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ec(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Eu(n,t,s)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fc(e,t,n),Ys=r):fc(e,t,n);break;default:fc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Ru.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:lc=c.stateNode,dc=!1;break e;case 3:case 4:lc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===lc)throw Error(a(160));hc(o,s,i),lc=null,dc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){Eu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vc(t,e),gc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(m){Eu(e,e.return,m)}try{nc(5,e,e.return)}catch(m){Eu(e,e.return,m)}}break;case 1:vc(t,e),gc(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vc(t,e),gc(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Eu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===o.type&&null!=o.name&&$(i,o),ke(c,s);var l=ke(c,o);for(s=0;s<u.length;s+=2){var d=u[s],f=u[s+1];"style"===d?me(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):k(i,d,f,l)}switch(c){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[hi]=o}catch(m){Eu(e,e.return,m)}}break;case 6:if(vc(t,e),gc(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Eu(e,e.return,m)}}break;case 3:if(vc(t,e),gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Eu(e,e.return,m)}break;case 4:default:vc(t,e),gc(e);break;case 13:vc(t,e),gc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=$e())),4&r&&pc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||d,vc(t,e),Ys=l):vc(t,e),gc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(f=Xs=d;null!==Xs;){switch(p=(h=Xs).child,h.tag){case 0:case 11:case 14:case 15:nc(4,h,h.return);break;case 1:Zs(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Eu(r,n,m)}}break;case 5:Zs(h,h.return);break;case 22:if(null!==h.memoizedState){wc(f);continue}}null!==p?(p.return=h,Xs=p):wc(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ve("display",s))}catch(m){Eu(e,e.return,m)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Eu(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vc(t,e),gc(e),4&r&&pc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(oc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),uc(e,sc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cc(e,sc(e),o);break;default:throw Error(a(161))}}catch(s){Eu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xs=e,kc(e,t,n)}function kc(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Js;if(!o){var s=i.alternate,c=null!==s&&null!==s.memoizedState||Ys;s=Js;var u=Ys;if(Js=o,(Ys=c)&&!u)for(Xs=i;null!==Xs;)c=(o=Xs).child,22===o.tag&&null!==o.memoizedState?Sc(i):null!==c?(c.return=o,Xs=c):Sc(i);for(;null!==a;)Xs=a,kc(a,t,n),a=a.sibling;Xs=i,Js=s,Ys=u}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):bc(e)}}function bc(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&ic(t)}catch(h){Eu(t,t.return,h)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function wc(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function Sc(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Eu(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Eu(t,i,c)}}var a=t.return;try{ic(t)}catch(c){Eu(t,a,c)}break;case 5:var o=t.return;try{ic(t)}catch(c){Eu(t,o,c)}}}catch(c){Eu(t,t.return,c)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Tc,Ec=Math.ceil,xc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,Pc=b.ReactCurrentBatchConfig,Rc=0,_c=null,Ac=null,Ic=0,Oc=0,Nc=Ei(0),Dc=0,Lc=null,Mc=0,Fc=0,Uc=0,jc=null,Vc=null,Bc=0,zc=1/0,Gc=null,Hc=!1,Wc=null,Kc=null,qc=!1,Qc=null,Jc=0,Yc=0,$c=null,Xc=-1,Zc=0;function eu(){return 0!==(6&Rc)?$e():-1!==Xc?Xc:Xc=$e()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Rc)&&0!==Ic?Ic&-Ic:null!==va.transition?(0===Zc&&(Zc=vt()),Zc):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yc)throw Yc=0,$c=null,Error(a(185));gt(e,n,r),0!==(2&Rc)&&e===_c||(e===_c&&(0===(2&Rc)&&(Fc|=n),4===Dc&&su(e,Ic)),ru(e,r),1===n&&0===Rc&&0===(1&t.mode)&&(zc=$e()+500,ji&&zi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,c=i[o];-1===c?0!==(s&n)&&0===(s&r)||(i[o]=ht(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===_c?Ic:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(cu.bind(null,e)):Bi(cu.bind(null,e)),oi((function(){0===(6&Rc)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_u(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Xc=-1,Zc=0,0!==(6&Rc))throw Error(a(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=ft(e,e===_c?Ic:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Rc;Rc|=2;var o=pu();for(_c===e&&Ic===t||(Gc=null,zc=$e()+500,fu(e,t));;)try{yu();break}catch(c){hu(e,c)}wa(),xc.current=o,Rc=i,null!==Ac?t=0:(_c=null,Ic=0,t=Dc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Lc,fu(e,0),su(e,r),ru(e,$e()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(o=pt(e))&&(r=o,t=au(e,o))),1===t))throw n=Lc,fu(e,0),su(e,r),ru(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,Vc,Gc);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Bc+500-$e())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,Vc,Gc),t);break}wu(e,Vc,Gc);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ec(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,Vc,Gc),r);break}wu(e,Vc,Gc);break;default:throw Error(a(329))}}}return ru(e,$e()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Vc,Vc=n,null!==t&&ou(t)),e}function ou(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function su(e,t){for(t&=~Uc,t&=~Fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cu(e){if(0!==(6&Rc))throw Error(a(327));Su();var t=ft(e,0);if(0===(1&t))return ru(e,$e()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Lc,fu(e,0),su(e,t),ru(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Vc,Gc),ru(e,$e()),null}function uu(e,t){var n=Rc;Rc|=1;try{return e(t)}finally{0===(Rc=n)&&(zc=$e()+500,ji&&zi())}}function lu(e){null!==Qc&&0===Qc.tag&&0===(6&Rc)&&Su();var t=Rc;Rc|=1;var n=Pc.transition,r=kt;try{if(Pc.transition=null,kt=1,e)return e()}finally{kt=r,Pc.transition=n,0===(6&(Rc=t))&&zi()}}function du(){Oc=Nc.current,xi(Nc)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ac)for(n=Ac.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:io(),xi(_i),xi(Ri),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(so);break;case 10:Sa(r.type._context);break;case 22:case 23:du()}n=n.return}if(_c=e,Ac=e=Nu(e.current,null),Ic=Oc=t,Dc=0,Lc=null,Uc=Fc=Mc=0,Vc=jc=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function hu(e,t){for(;;){var n=Ac;try{if(wa(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,ko=!1,bo=0,Cc.current=null,null===n||null===n.return){Dc=1,Lc=t,Ac=null;break}e:{var o=e,s=n.return,c=n,u=t;if(t=Ic,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,c,0,t),1&p.mode&&ms(o,l,t),u=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ms(o,l,t),vu();break e}u=Error(a(426))}else if(ia&&1&c.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,c,0,t),pa(ls(u,c));break e}}o=u=ls(u,c),4!==Dc&&(Dc=2),null===jc?jc=[o]:jc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,u,t));break e;case 1:c=u;var y=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Kc||!Kc.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,c,t));break e}}o=o.return}while(null!==o)}bu(n)}catch(b){t=b,Ac===n&&null!==n&&(Ac=n=n.return);continue}break}}function pu(){var e=xc.current;return xc.current=os,null===e?os:e}function vu(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===_c||0===(268435455&Mc)&&0===(268435455&Fc)||su(_c,Ic)}function mu(e,t){var n=Rc;Rc|=2;var r=pu();for(_c===e&&Ic===t||(Gc=null,fu(e,t));;)try{gu();break}catch(i){hu(e,i)}if(wa(),Rc=n,xc.current=r,null!==Ac)throw Error(a(261));return _c=null,Ic=0,Dc}function gu(){for(;null!==Ac;)ku(Ac)}function yu(){for(;null!==Ac&&!Je();)ku(Ac)}function ku(e){var t=Tc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?bu(e):Ac=t,Cc.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Oc)))return void(Ac=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Ac=n);if(null===e)return Dc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Dc&&(Dc=5)}function wu(e,t,n){var r=kt,i=Pc.transition;try{Pc.transition=null,kt=1,function(e,t,n,r){do{Su()}while(null!==Qc);if(0!==(6&Rc))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===_c&&(Ac=_c=null,Ic=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qc||(qc=!0,_u(tt,(function(){return Su(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pc.transition,Pc.transition=null;var s=kt;kt=1;var c=Rc;Rc|=4,Cc.current=null,function(e,t){if(ei=Ht,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,c=-1,u=-1,l=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(c=s+i),f!==o||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++l===i&&(c=s),h===o&&++d===r&&(u=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Eu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=tc,tc=!1}(e,n),mc(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Ye(),Rc=c,kt=s,Pc.transition=o}else e.current=n;if(qc&&(qc=!1,Qc=e,Jc=i),0===(o=e.pendingLanes)&&(Kc=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,e=Wc,Wc=null,e;0!==(1&Jc)&&0!==e.tag&&Su(),0!==(1&(o=e.pendingLanes))?e===$c?Yc++:(Yc=0,$c=e):Yc=0,zi()}(e,t,n,r)}finally{Pc.transition=i,kt=r}return null}function Su(){if(null!==Qc){var e=bt(Jc),t=Pc.transition,n=kt;try{if(Pc.transition=null,kt=16>e?16:e,null===Qc)var r=!1;else{if(e=Qc,Qc=null,Jc=0,0!==(6&Rc))throw Error(a(331));var i=Rc;for(Rc|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var c=o.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(Xs=l;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nc(8,d,o)}var f=d.child;if(null!==f)f.return=d,Xs=f;else for(;null!==Xs;){var h=(d=Xs).sibling,p=d.return;if(ac(d),d===l){Xs=null;break}if(null!==h){h.return=p,Xs=h;break}Xs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xs=y;break e}Xs=o.return}}var k=e.current;for(Xs=k;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=k;null!==Xs;){if(0!==(2048&(c=Xs).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(S){Eu(c,c.return,S)}if(c===s){Xs=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,Xs=w;break e}Xs=c.return}}if(Rc=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{kt=n,Pc.transition=t}}return!1}function Tu(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=eu(),null!==e&&(gt(e,1,t),ru(e,t))}function Eu(e,t,n){if(3===e.tag)Tu(e,e,n);else for(;null!==t;){if(3===t.tag){Tu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=eu(),null!==t&&(gt(t,1,e),ru(t,e));break}}t=t.return}}function xu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,_c===e&&(Ic&n)===n&&(4===Dc||3===Dc&&(130023424&Ic)===Ic&&500>$e()-Bc?fu(e,0):Uc|=n),ru(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=eu();null!==(e=_a(e,t))&&(gt(e,t,n),ru(e,n))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Ru(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cu(e,n)}function _u(e,t){return qe(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Iu(e,t,n,r){return new Au(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Iu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ou(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return Lu(n.children,i,o,t);case E:s=8,i|=8;break;case x:return(e=Iu(12,n,t,2|i)).elementType=x,e.lanes=o,e;case _:return(e=Iu(13,n,t,i)).elementType=_,e.lanes=o,e;case A:return(e=Iu(19,n,t,i)).elementType=A,e.lanes=o,e;case N:return Mu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case P:s=9;break e;case R:s=11;break e;case I:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Iu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Iu(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Iu(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Iu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Iu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vu(e,t,n,r,i,a,o,s,c){return e=new ju(e,t,n,s,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Iu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(a),e}function Bu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zu(e){if(!e)return Pi;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Gu(e,t,n,r,i,a,o,s,c){return(e=Vu(n,r,!0,e,0,a,0,s,c)).context=zu(null),n=e.current,(a=Na(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,gt(e,i,r),ru(e,r),e}function Hu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nu(e,i,o,a),La(e,i,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Tc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),ha();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Ii(t,Ri.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ia(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=_s(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===I)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ps(null,t,r,e,n);break e;case 1:t=Rs(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=Ts(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ps(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Rs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Is(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Is(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!_i.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Na(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ta(o.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ta(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=xa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Ts(e,t,r,i=ma(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gs(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),Ga(t,r,i),Wa(t,r,i,n),_s(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return xs(e,t,n)}throw Error(a(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wu(o);s.call(e)}}Hu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wu(o);a.call(e)}}var o=Gu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wu(c);s.call(e)}}var c=Vu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=c,e[pi]=c.current,zr(8===e.nodeType?e.parentNode:e),lu((function(){Hu(t,c,n,r)})),c}(n,t,e,i,r);return Wu(o)}Yu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hu(e,t,null,null)},Yu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu((function(){Hu(null,e,null,null)})),t[pi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,$e()),0===(6&Rc)&&(zc=$e()+500,zi()))}break;case 13:lu((function(){var t=_a(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),qu(e,1)}},St=function(e){if(13===e.tag){var t=_a(e,134217728);if(null!==t)nu(t,e,134217728,eu());qu(e,134217728)}},Tt=function(e){if(13===e.tag){var t=tu(e),n=_a(e,t);if(null!==n)nu(n,e,t,eu());qu(e,t)}},Et=function(){return kt},xt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));q(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Re=uu,_e=lu;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ce,Pe,uu]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(a(200));return Bu(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(a(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lu(e)},t.hydrate=function(e,t,n){if(!Xu(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Xu(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(a(40));return!!e._reactRootContainer&&(lu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=k.prototype=new y;b.constructor=k,v(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,T={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===a[i]&&(a[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===a?"."+R(c,0):a,w(o)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),_(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(P,"$&/")+"/")+e)),t.push(o)),1;if(c=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var l=a+R(s=e[u],u);c+=_(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=_(s=s.value,t,i,l=a+R(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return _(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},N={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:N,ReactCurrentOwner:T};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=T.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,c=e[s],u=s+1,l=e[u];if(0>a(c,n))u<i&&0>a(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[s]=n,r=s);else{if(!(u<i&&0>a(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var u=[],l=[],d=1,f=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(u,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(u))v=!0,N(S);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function S(e,n){v=!1,m&&(m=!1,y(C),C=-1),p=!0;var a=h;try{for(b(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!_());){var o=f.callback;if("function"===typeof o){f.callback=null,h=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),b(n)}else i(u);f=r(u)}if(null!==f)var c=!0;else{var d=r(l);null!==d&&D(w,d.startTime-n),c=!1}return c}finally{f=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,E=!1,x=null,C=-1,P=5,R=-1;function _(){return!(t.unstable_now()-R<P)}function A(){if(null!==x){var e=t.unstable_now();R=e;var n=!0;try{n=x(!0,e)}finally{n?T():(E=!1,x=null)}}else E=!1}if("function"===typeof k)T=function(){k(A)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=A,T=function(){O.postMessage(null)}}else T=function(){g(A,0)};function N(e){x=e,E||(E=!0,T())}function D(e,n){C=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,N(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(u)&&e===r(l)&&(m?(y(C),C=-1):m=!0,D(w,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,N(S))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},712:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},861:function(e,t,n){var r=n(775),i=n(921);t.cW=i,t.Qc=r.parse,r.parseParams,r.parseFmtpConfig,r.parsePayloads,r.parseRemoteCandidates,r.parseImageAttributes,r.parseSimulcastStreamList},775:function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var a=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var a=0;a<n.length;a+=1)null!=e[a+1]&&(t[n[a]]=r(e[a+1]))}(n.match(e.reg),a,e.names,e.name),e.push&&t[e.push].push(a)},a=n(712),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(o))return i(c,r,o)}})),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},921:function(e,t,n){var r=n(712),i=/%[sdv%]/g,a=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},o=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return a.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||s,i=t.innerOrder||c,a=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(o(t,n,e))}))}))})),e.media.forEach((function(e){a.push(o("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(o(t,n,e))}))}))}))})),a.join("\r\n")+"\r\n"}},800:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var a=r[i],o=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(o){var s=t.parseRtpMap(o),c=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),a&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var a=t.matchPrefix(e,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};var o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){var s=o[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},210:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="model",d="name",f="type",h="vendor",p="version",v="architecture",m="console",g="mobile",y="tablet",k="smarttv",b="wearable",w="embedded",S="Amazon",T="Apple",E="ASUS",x="BlackBerry",C="Firefox",P="Google",R="Huawei",_="LG",A="Microsoft",I="Motorola",O="Opera",N="Samsung",D="Sony",L="Xiaomi",M="Zebra",F="Facebook",U=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===u&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},z=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var f=t[d],h=t[d+1];for(n=r=0;n<f.length&&!u;)if(u=f[n++].exec(e))for(i=0;i<h.length;i++)l=u[++r],typeof(s=h[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},G=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(j(t[n][r],e))return"?"===n?a:n}else if(j(t[n],e))return"?"===n?a:n;return e},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,O]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[d,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,V]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,N],[f,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,N],[f,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[h,T],[f,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,T],[f,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,R],[f,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[l,[h,R],[f,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[h,L],[f,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,L],[f,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[f,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[f,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[f,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,I],[f,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,I],[f,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,_],[f,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,_],[f,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[f,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[f,g]],[/(pixel c)\b/i],[l,[h,P],[f,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,P],[f,g]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,D],[f,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,D],[f,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[f,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,S],[f,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,S],[f,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[f,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,x],[f,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,E],[f,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,E],[f,g]],[/(nexus 9)/i],[l,[h,"HTC"],[f,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[f,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[f,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[f,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,"Sharp"],[f,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[f,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[f,y]],[/(surface duo)/i],[l,[h,A],[f,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[f,g]],[/(u304aa)/i],[l,[h,"AT&T"],[f,g]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[f,g]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[f,y]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[f,y]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[f,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[f,y]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[f,y]],[/\b(k88) b/i],[l,[h,"ZTE"],[f,y]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[f,g]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[f,g]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[f,y]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[f,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[f,y]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[f,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[f,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[f,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[f,g]],[/\b(ph-1) /i],[l,[h,"Essential"],[f,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[f,y]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[f,y]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[f,y]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[f,y]],[/(sprint) (\w+)/i],[h,l,[f,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,A],[f,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,M],[f,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,M],[f,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[f,m]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[f,m]],[/(playstation [345portablevi]+)/i],[l,[h,D],[f,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,A],[f,m]],[/smart-tv.+(samsung)/i],[h,[f,k]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,N],[f,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,_],[f,k]],[/(apple) ?tv/i],[h,[l,"Apple TV"],[f,k]],[/crkey/i],[[l,"Chromecast"],[h,P],[f,k]],[/droid.+aft(\w)( bui|\))/i],[l,[h,S],[f,k]],[/\(dtv[\);].+(aquos)/i],[l,[h,"Sharp"],[f,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[h,B],[l,B],[f,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,k]],[/((pebble))app/i],[h,l,[f,b]],[/droid.+; (glass) \d/i],[l,[h,P],[f,b]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,M],[f,b]],[/(quest( 2)?)/i],[l,[h,F],[f,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[f,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[f,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[f,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[f,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,G,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,G,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},K=function e(t,n){if(typeof t===c&&(n=t,t=a),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),o=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(W,n):W;return this.getBrowser=function(){var e,t={};return t.name=a,t.version=a,z.call(t,r,o.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:a,t},this.getCPU=function(){var e={};return e.architecture=a,z.call(e,r,o.cpu),e},this.getDevice=function(){var e={};return e.vendor=a,e.model=a,e.type=a,z.call(e,r,o.device),e},this.getEngine=function(){var e={};return e.name=a,e.version=a,z.call(e,r,o.engine),e},this.getOS=function(){var e={};return e.name=a,e.version=a,z.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>255?B(e,255):e,this},this.setUA(r),this};K.VERSION="1.0.2",K.BROWSER=U([d,p,"major"]),K.CPU=U([v]),K.DEVICE=U([l,h,f,m,g,k,y,b,w]),K.ENGINE=K.OS=U([d,p]),typeof t!==s?(e.exports&&(t=e.exports=K),t.UAParser=K):n.amdO?(r=function(){return K}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=K);var q=typeof i!==s&&(i.jQuery||i.Zepto);if(q&&!q.ua){var Q=new K;q.ua=Q.getResult(),q.ua.get=function(){return Q.getUA()},q.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var n in t)q.ua[n]=t[n]}}}("object"===typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f1cb8339.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="zoom-clone:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,c;if(void 0!==a)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/zoom-clone/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],c=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)c(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkzoom_clone=self.webpackChunkzoom_clone||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{fixNegotiationNeeded:function(){return et},shimAddTrackRemoveTrack:function(){return Xe},shimAddTrackRemoveTrackWithNative:function(){return $e},shimGetDisplayMedia:function(){return We},shimGetSendersWithDtmf:function(){return Qe},shimGetStats:function(){return Je},shimGetUserMedia:function(){return He},shimMediaStream:function(){return Ke},shimOnTrack:function(){return qe},shimPeerConnection:function(){return Ze},shimSenderReceiverGetStats:function(){return Ye}});var t={};n.r(t),n.d(t,{shimAddTransceiver:function(){return ut},shimCreateAnswer:function(){return ft},shimCreateOffer:function(){return dt},shimGetDisplayMedia:function(){return nt},shimGetParameters:function(){return lt},shimGetUserMedia:function(){return tt},shimOnTrack:function(){return rt},shimPeerConnection:function(){return it},shimRTCDataChannel:function(){return ct},shimReceiverGetStats:function(){return ot},shimRemoveStream:function(){return st},shimSenderGetStats:function(){return at}});var r={};n.r(r),n.d(r,{shimAudioContext:function(){return wt},shimCallbacksAPI:function(){return vt},shimConstraints:function(){return gt},shimCreateOfferLegacy:function(){return bt},shimGetUserMedia:function(){return mt},shimLocalStreamsAPI:function(){return ht},shimRTCIceServerUrls:function(){return yt},shimRemoteStreamsAPI:function(){return pt},shimTrackEventTransceiver:function(){return kt}});var i={};n.r(i),n.d(i,{removeExtmapAllowMixed:function(){return Rt},shimAddIceCandidateNullOrEmpty:function(){return _t},shimConnectionState:function(){return Pt},shimMaxMessageSize:function(){return xt},shimParameterlessSetLocalDescription:function(){return At},shimRTCIceCandidate:function(){return Et},shimSendThrowTypeError:function(){return Ct}});var a=n(791),o=n(250);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var l={};function h(){}function p(){}function v(){}var m={};s(m,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==t&&n.call(y,i)&&(m=y);var k=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,a,o,s){var c=u(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==d(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,s(k,"constructor",v),s(v,"constructor",p),p.displayName=s(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,o,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,o,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function h(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function y(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function k(e){return!!e&&!!e[oe]}function b(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===se}(e)||Array.isArray(e)||!!e[ae]||!!e.constructor[ae]||P(e)||R(e))}function w(e,t,n){void 0===n&&(n=!1),0===S(e)?(n?Object.keys:ce)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function S(e){var t=e[oe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:P(e)?2:R(e)?3:0}function T(e,t){return 2===S(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function E(e,t){return 2===S(e)?e.get(t):e[t]}function x(e,t,n){var r=S(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function C(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function P(e){return te&&e instanceof Map}function R(e){return ne&&e instanceof Set}function _(e){return e.o||e.t}function A(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ue(e);delete t[oe];for(var n=ce(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function I(e,t){return void 0===t&&(t=!1),N(e)||k(e)||!b(e)||(S(e)>1&&(e.set=e.add=e.clear=e.delete=O),Object.freeze(e),t&&w(e,(function(e,t){return I(t,!0)}),!0)),e}function O(){y(2)}function N(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function D(e){var t=le[e];return t||y(18,e),t}function L(){return Z}function M(e,t){t&&(D("Patches"),e.u=[],e.s=[],e.v=t)}function F(e){U(e),e.p.forEach(V),e.p=null}function U(e){e===Z&&(Z=e.l)}function j(e){return Z={p:[],l:Z,h:e,m:!0,_:0}}function V(e){var t=e[oe];0===t.i||1===t.i?t.j():t.O=!0}function B(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||D("ES5").S(t,e,r),r?(n[oe].P&&(F(t),y(4)),b(e)&&(e=z(t,e),t.l||H(t,e)),t.u&&D("Patches").M(n[oe].t,e,t.u,t.s)):e=z(t,n,[]),F(t),t.u&&t.v(t.u,t.s),e!==ie?e:void 0}function z(e,t,n){if(N(t))return t;var r=t[oe];if(!r)return w(t,(function(i,a){return G(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return H(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=A(r.k):r.o;w(3===r.i?new Set(i):i,(function(t,a){return G(e,r,i,t,a,n)})),H(e,i,!1),n&&e.u&&D("Patches").R(r,n,e.u,e.s)}return r.o}function G(e,t,n,r,i,a){if(k(i)){var o=z(e,i,a&&t&&3!==t.i&&!T(t.D,r)?a.concat(r):void 0);if(x(n,r,o),!k(o))return;e.m=!1}if(b(i)&&!N(i)){if(!e.h.F&&e._<1)return;z(e,i),t&&t.A.l||H(e,i)}}function H(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&I(t,n)}function W(e,t){var n=e[oe];return(n?_(n):e)[t]}function K(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function q(e){e.P||(e.P=!0,e.l&&q(e.l))}function Q(e){e.o||(e.o=A(e.t))}function J(e,t,n){var r=P(t)?D("MapSet").N(t,n):R(t)?D("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:L(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=de;n&&(i=[r],a=fe);var o=Proxy.revocable(i,a),s=o.revoke,c=o.proxy;return r.k=c,r.j=s,c}(t,n):D("ES5").J(t,n);return(n?n.A:L()).p.push(r),r}function Y(e){return k(e)||y(22,e),function e(t){if(!b(t))return t;var n,r=t[oe],i=S(t);if(r){if(!r.P&&(r.i<4||!D("ES5").K(r)))return r.t;r.I=!0,n=$(t,i),r.I=!1}else n=$(t,i);return w(n,(function(t,i){r&&E(r.t,t)===i||x(n,t,e(i))})),3===i?new Set(n):n}(e)}function $(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return A(e)}var X,Z,ee="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),te="undefined"!=typeof Map,ne="undefined"!=typeof Set,re="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ie=ee?Symbol.for("immer-nothing"):((X={})["immer-nothing"]=!0,X),ae=ee?Symbol.for("immer-draftable"):"__$immer_draftable",oe=ee?Symbol.for("immer-state"):"__$immer_state",se=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ce="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ue=Object.getOwnPropertyDescriptors||function(e){var t={};return ce(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},le={},de={get:function(e,t){if(t===oe)return e;var n=_(e);if(!T(n,t))return function(e,t,n){var r,i=K(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!b(r)?r:r===W(e.t,t)?(Q(e),e.o[t]=J(e.A.h,r,e)):r},has:function(e,t){return t in _(e)},ownKeys:function(e){return Reflect.ownKeys(_(e))},set:function(e,t,n){var r=K(_(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=W(_(e),t),a=null==i?void 0:i[oe];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(C(n,i)&&(void 0!==n||T(e.t,t)))return!0;Q(e),q(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==W(e.t,t)||t in e.t?(e.D[t]=!1,Q(e),q(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){y(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){y(12)}},fe={};w(de,(function(e,t){fe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),fe.deleteProperty=function(e,t){return fe.set.call(this,e,t,void 0)},fe.set=function(e,t,n){return de.set.call(this,e[0],t,n,e[0])};var he=function(){function e(e){var t=this;this.g=re,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&y(6),void 0!==r&&"function"!=typeof r&&y(7),b(e)){var s=j(t),c=J(t,e,void 0),u=!0;try{o=n(c),u=!1}finally{u?F(s):U(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return M(s,r),B(e,s)}),(function(e){throw F(s),e})):(M(s,r),B(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===ie&&(o=void 0),t.F&&I(o,!0),r){var l=[],d=[];D("Patches").M(e,o,l,d),r(l,d)}return o}y(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){b(e)||y(8),k(e)&&(e=Y(e));var t=j(this),n=J(this,e,void 0);return n[oe].C=!0,U(t),n},t.finishDraft=function(e,t){var n=(e&&e[oe]).A;return M(n,t),B(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!re&&y(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=D("Patches").$;return k(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),pe=new he,ve=pe.produce,me=(pe.produceWithPatches.bind(pe),pe.setAutoFreeze.bind(pe),pe.setUseProxies.bind(pe),pe.applyPatches.bind(pe),pe.createDraft.bind(pe),pe.finishDraft.bind(pe),ve);var ge=function(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is,o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a};var ye=function(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0};function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function be(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ke(e)););return e}function we(){return we="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=be(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},we.apply(this,arguments)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}function Ee(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}function xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ce(e,t){if(t&&("object"===d(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}function Pe(e){var t=xe();return function(){var n,r=ke(e);if(t){var i=ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ce(this,n)}}function Re(e,t,n){return Re=xe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Te(i,n.prototype),i},Re.apply(null,arguments)}function _e(e){var t="function"===typeof Map?new Map:void 0;return _e=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Re(e,arguments,ke(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Te(n,e)},_e(e)}var Ae=!0,Ie=!0;function Oe(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Ne(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var a=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,a),i.apply(this,[e,a])};var a=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(n))return a.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function De(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ae=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Le(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ie=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Me(){if("object"===typeof window){if(Ae)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function Fe(e,t){Ie&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Ue(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=Oe(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Oe(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Oe(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function je(e){return"[object Object]"===Object.prototype.toString.call(e)}function Ve(e){return je(e)?Object.keys(e).reduce((function(t,n){var r=je(e[n]),i=r?Ve(e[n]):e[n],a=r&&!Object.keys(i).length;return void 0===i||a?t:Object.assign(t,l({},n,i))}),{}):e}function Be(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?Be(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){Be(e,e.get(t),n)}))})))}function ze(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&Be(e,n,i)}))})),i}var Ge=Me;function He(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"===typeof r.ideal?(a[i("min",n)]=r.ideal,t.optional.push(a),(a={})[i("max",n)]=r.ideal,t.optional.push(a)):(a[i("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){var o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});var s,c=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?s=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=o.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),Ge("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return Ge("chrome: "+JSON.stringify(e)),i(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(a(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return o(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}}function We(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function Ke(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function qe(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var a=new Event("track");a.track=r.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var a=new Event("track");a.track=r,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ne(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function Qe(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Je(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],a=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(s(o(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(o(e)))},r])})).then(i,a)}}}function Ye(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return ze(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),Ne(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return ze(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,a=arguments[0];return this.getSenders().forEach((function(e){e.track===a&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===a&&(n?r=!0:n=e),e.track===a})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function $e(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function Xe(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return $e(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var a=this.getSenders().find((function(e){return e.track===t}));if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=l({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function Ze(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=l({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function et(e,t){Ne(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function tt(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Fe("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},r&&r.prototype.getSettings){var o=r.prototype.getSettings;r.prototype.getSettings=function(){var e=o.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function nt(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function rt(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function it(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=l({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],a=e[1],o=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!a)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(a,o)}}}function at(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function ot(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),Ne(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function st(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;Fe("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function ct(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ut(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,a=i.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(a).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function lt(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function dt(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function ft(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function ht(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function pt(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function vt(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function mt(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(gt(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function gt(e){return e&&void 0!==e.video?Object.assign({},e,{video:Ve(e.video)}):e}function yt(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(Fe("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function kt(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function bt(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function wt(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var St=n(800),Tt=n.n(St);function Et(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Tt().parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Ne(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function xt(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=Tt().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=Tt().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=Tt().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c,u=r(arguments[0]),l=i(u),d=a(arguments[0],u);c=0===l&&0===d?Number.POSITIVE_INFINITY:0===l||0===d?Math.max(l,d):Math.min(l,d);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return c}}),this._sctp=f}return o.apply(this,arguments)}}}function Ct(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},Ne(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function Pt(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function Rt(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function _t(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function At(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}if(t.sdp||"offer"!==t.type&&"answer"!==t.type)return n.apply(this,[t]);var r="offer"===t.type?this.createOffer:this.createAnswer;return r.apply(this).then((function(t){return n.apply(e,[t])}))})}}var It,Ot=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.window,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},s=Me,c=Ue(a),u={browserDetails:c,commonShim:i,extractVersion:Oe,disableLog:De,disableWarnings:Le,sdp:St};switch(c.browser){case"chrome":if(!e||!Ze||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),u;if(null===c.version)return s("Chrome shim can not determine version, not shimming."),u;s("adapter.js shimming chrome."),u.browserShim=e,_t(a,c),At(a),He(a,c),Ke(a),Ze(a,c),qe(a),Xe(a,c),Qe(a),Je(a),Ye(a),et(a,c),Et(a),Pt(a),xt(a,c),Ct(a),Rt(a,c);break;case"firefox":if(!t||!it||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),u;s("adapter.js shimming firefox."),u.browserShim=t,_t(a,c),At(a),tt(a,c),it(a,c),rt(a),st(a),at(a),ot(a),ct(a),ut(a),lt(a),dt(a),ft(a),Et(a),Pt(a),xt(a,c),Ct(a);break;case"safari":if(!r||!o.shimSafari)return s("Safari shim is not included in this adapter release."),u;s("adapter.js shimming safari."),u.browserShim=r,_t(a,c),At(a),yt(a),bt(a),vt(a),ht(a),pt(a),kt(a),mt(a),wt(a),Et(a),xt(a,c),Ct(a),Rt(a,c);break;default:s("Unsupported browser!")}return u}({window:"undefined"===typeof window?void 0:window}),Nt=Ot,Dt=n(861),Lt=n(210),Mt=new Uint8Array(16);function Ft(){if(!It&&!(It="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return It(Mt)}var Ut=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var jt=function(e){return"string"===typeof e&&Ut.test(e)},Vt=[],Bt=0;Bt<256;++Bt)Vt.push((Bt+256).toString(16).substr(1));var zt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Vt[e[t+0]]+Vt[e[t+1]]+Vt[e[t+2]]+Vt[e[t+3]]+"-"+Vt[e[t+4]]+Vt[e[t+5]]+"-"+Vt[e[t+6]]+Vt[e[t+7]]+"-"+Vt[e[t+8]]+Vt[e[t+9]]+"-"+Vt[e[t+10]]+Vt[e[t+11]]+Vt[e[t+12]]+Vt[e[t+13]]+Vt[e[t+14]]+Vt[e[t+15]]).toLowerCase();if(!jt(n))throw TypeError("Stringified UUID is invalid");return n};var Gt,Ht,Wt=function(e,t,n){var r=(e=e||{}).random||(e.rng||Ft)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return zt(r)},Kt=n(371),qt=Object.defineProperty,Qt=Object.defineProperties,Jt=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Zt=function(e,t,n){return t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},en=function(e,t){for(var n in t||(t={}))$t.call(t,n)&&Zt(e,n,t[n]);if(Yt){var r,i=g(Yt(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Xt.call(t,n)&&Zt(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},tn=function(e,t){return Qt(e,Jt(t))},nn=function(e,t){var n={};for(var r in e)$t.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Yt){var i,a=g(Yt(e));try{for(a.s();!(i=a.n()).done;){r=i.value;t.indexOf(r)<0&&Xt.call(e,r)&&(n[r]=e[r])}}catch(o){a.e(o)}finally{a.f()}}return n},rn=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(T){i(T)}},o=function(e){try{s(n.throw(e))}catch(T){i(T)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))};!function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.TIME=4]="TIME",e[e.TIMEEND=5]="TIMEEND",e[e.ERROR=6]="ERROR",e[e.NONE=7]="NONE"}(Ht||(Ht={}));var an,on,sn,cn,un,ln="undefined"!=typeof window&&"undefined"!=typeof window.expect,dn=function(){function e(){p(this,e)}return m(e,null,[{key:"v",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[0,e].concat(n))}},{key:"d",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[1,e].concat(n))}},{key:"i",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[2,e].concat(n))}},{key:"w",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[3,e].concat(n))}},{key:"e",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[6,e].concat(n))}},{key:"time",value:function(e){this.log(4,"[HMSPerformanceTiming]",e)}},{key:"timeEnd",value:function(e){this.log(5,"[HMSPerformanceTiming]",e,e)}},{key:"cleanUp",value:function(){performance.clearMarks(),performance.clearMeasures()}},{key:"log",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!(this.level.valueOf()>e.valueOf()))switch(e){case 0:var a;(a=console).log.apply(a,[t].concat(r));break;case 1:var o;(o=console).debug.apply(o,[t].concat(r));break;case 2:var s;(s=console).info.apply(s,[t].concat(r));break;case 3:var c;(c=console).warn.apply(c,[t].concat(r));break;case 6:var u;(u=console).error.apply(u,[t].concat(r));break;case 4:performance.mark(r[0]);break;case 5:var l=r[0];try{var d=performance.measure(l,l);this.log(1,t,l,null==d?void 0:d.duration),performance.clearMarks(l),performance.clearMeasures(l)}catch(d){this.log(1,t,l,d)}}}}]),e}();dn.level=ln?7:0,function(e){e[e.PEER_ADDED=0]="PEER_ADDED",e[e.PEER_REMOVED=1]="PEER_REMOVED",e[e.PEER_KNOCKED=2]="PEER_KNOCKED",e[e.ROOM_TYPE_CHANGED=3]="ROOM_TYPE_CHANGED",e[e.METADATA_UPDATED=4]="METADATA_UPDATED",e[e.SCREENSHARE_STARTED=5]="SCREENSHARE_STARTED",e[e.SCREENSHARE_STOPPED=6]="SCREENSHARE_STOPPED",e[e.DEFAULT_UPDATE=7]="DEFAULT_UPDATE",e[e.RECORDING_STATE_UPDATED=8]="RECORDING_STATE_UPDATED",e[e.BROWSER_RECORDING_STATE_UPDATED=9]="BROWSER_RECORDING_STATE_UPDATED",e[e.SERVER_RECORDING_STATE_UPDATED=10]="SERVER_RECORDING_STATE_UPDATED",e[e.RTMP_STREAMING_STATE_UPDATED=11]="RTMP_STREAMING_STATE_UPDATED",e[e.HLS_STREAMING_STATE_UPDATED=12]="HLS_STREAMING_STATE_UPDATED",e[e.ROOM_STATE=13]="ROOM_STATE"}(an||(an={})),function(e){e[e.PEER_JOINED=0]="PEER_JOINED",e[e.PEER_LEFT=1]="PEER_LEFT",e[e.AUDIO_TOGGLED=2]="AUDIO_TOGGLED",e[e.VIDEO_TOGGLED=3]="VIDEO_TOGGLED",e[e.BECAME_DOMINANT_SPEAKER=4]="BECAME_DOMINANT_SPEAKER",e[e.RESIGNED_DOMINANT_SPEAKER=5]="RESIGNED_DOMINANT_SPEAKER",e[e.STARTED_SPEAKING=6]="STARTED_SPEAKING",e[e.STOPPED_SPEAKING=7]="STOPPED_SPEAKING",e[e.ROLE_UPDATED=8]="ROLE_UPDATED",e[e.PEER_LIST=9]="PEER_LIST",e[e.NAME_UPDATED=10]="NAME_UPDATED",e[e.METADATA_UPDATED=11]="METADATA_UPDATED"}(on||(on={})),function(e){e[e.TRACK_ADDED=0]="TRACK_ADDED",e[e.TRACK_REMOVED=1]="TRACK_REMOVED",e[e.TRACK_MUTED=2]="TRACK_MUTED",e[e.TRACK_UNMUTED=3]="TRACK_UNMUTED",e[e.TRACK_DESCRIPTION_CHANGED=4]="TRACK_DESCRIPTION_CHANGED",e[e.TRACK_DEGRADED=5]="TRACK_DEGRADED",e[e.TRACK_RESTORED=6]="TRACK_RESTORED"}(sn||(sn={})),function(e){e[e.DEFAULT=0]="DEFAULT"}(cn||(cn={})),function(e){e.NONE="none",e.LOW="low",e.MEDIUM="medium",e.HIGH="high"}(un||(un={}));var fn,hn,pn,vn,mn={f:un.HIGH,h:un.MEDIUM,q:un.LOW};!function(e){e.VP8="vp8",e.VP9="vp9",e.H264="h264"}(fn||(fn={})),function(e){e.OPUS="opus"}(hn||(hn={})),function(e){e.audio="audio",e.video="video"}(pn||(pn={})),function(e){e[e.Publish=0]="Publish",e[e.Subscribe=1]="Subscribe"}(vn||(vn={}));var gn,yn={WebSocketConnectionErrors:{FAILED_TO_CONNECT:1e3,WEBSOCKET_CONNECTION_LOST:1003},InitAPIErrors:{SERVER_ERRORS:2e3,INIT_CONFIG_NOT_AVAILABLE:2002,ENDPOINT_UNREACHABLE:2003,INVALID_TOKEN_FORMAT:2004},TracksErrors:{GENERIC_TRACK:3e3,CANT_ACCESS_CAPTURE_DEVICE:3001,DEVICE_NOT_AVAILABLE:3002,DEVICE_IN_USE:3003,DEVICE_LOST_MIDWAY:3008,NOTHING_TO_RETURN:3005,INVALID_VIDEO_SETTINGS:3006,CODEC_CHANGE_NOT_PERMITTED:3007,AUTOPLAY_ERROR:3008,OVER_CONSTRAINED:3009,NO_AUDIO_DETECTED:3010,SYSTEM_DENIED_PERMISSION:3011},WebrtcErrors:{CREATE_OFFER_FAILED:4001,CREATE_ANSWER_FAILED:4002,SET_LOCAL_DESCRIPTION_FAILED:4003,SET_REMOTE_DESCRIPTION_FAILED:4004,ICE_FAILURE:4005},WebsocketMethodErrors:{SERVER_ERRORS:5e3,ALREADY_JOINED:5001,CANNOT_JOIN_PREVIEW_IN_PROGRESS:5002},GenericErrors:{NOT_CONNECTED:6e3,SIGNALLING:6001,UNKNOWN:6002,NOT_READY:6003,JSON_PARSING_FAILED:6004,TRACK_METADATA_MISSING:6005,RTC_TRACK_MISSING:6006,PEER_METADATA_MISSING:6007,INVALID_ROLE:6008,PREVIEW_IN_PROGRESS:6009,MISSING_MEDIADEVICES:6010,MISSING_RTCPEERCONNECTION:6011},PlaylistErrors:{NO_ENTRY_TO_PLAY:8001,NO_ENTRY_IS_PLAYING:8002}},kn=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i,a,o){var s,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return p(this,n),(s=t.call(this,a)).code=e,s.name=r,s.message=a,s.description=o,s.isTerminal=c,Object.setPrototypeOf(Se(s),n.prototype),s.action=i.toString(),s}return m(n,[{key:"toAnalyticsProperties",value:function(){return{error_name:this.name,error_code:this.code,error_message:this.message,error_description:this.description,action:this.action,is_terminal:this.isTerminal}}},{key:"addNativeError",value:function(e){this.nativeError=e}}]),n}(_e(Error));!function(e){e.NONE="NONE",e.TRACK="TRACK",e.INIT="INIT",e.PUBLISH="PUBLISH",e.UNPUBLISH="UNPUBLISH",e.JOIN="JOIN",e.SUBSCRIBE="SUBSCRIBE",e.DATA_CHANNEL_SEND="DATA_CHANNEL_SEND",e.RESTART_ICE="RESTART_ICE",e.VIDEO_PLUGINS="VIDEO_PLUGINS",e.AUDIO_PLUGINS="AUDIO_PLUGINS",e.AUTOPLAY="AUTOPLAY",e.RECONNECT_SIGNAL="RECONNECT_SIGNAL",e.VALIDATION="VALIDATION",e.PLAYLIST="PLAYLIST",e.PREVIEW="PREVIEW"}(gn||(gn={}));var bn={FailedToConnect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebSocketConnectionErrors.FAILED_TO_CONNECT,"WebsocketFailedToConnect",e,"[WS]: ".concat(t),"[WS]: ".concat(t))},WebSocketConnectionLost:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,"WebSocketConnectionLost",e,"Network connection lost ",t)}},wn={ServerErrors:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(e,"ServerErrors",t,"[INIT]: Server error",n,!0)},EndpointUnreachable:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.InitAPIErrors.ENDPOINT_UNREACHABLE,"EndpointUnreachable",e,"Endpoint is not reachable.",t)},InvalidTokenFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.InitAPIErrors.INVALID_TOKEN_FORMAT,"InvalidTokenFormat",e,"Token is not in proper JWT format - ".concat(t),t,!0)},InitConfigNotAvailable:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.InitAPIErrors.INIT_CONFIG_NOT_AVAILABLE,"InitError",e,"[INIT]: ".concat(t),"[INIT]: ".concat(t))}},Sn={GenericTrack:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.TracksErrors.GENERIC_TRACK,"GenericTrack",e,"[TRACK]: ".concat(t),"[TRACK]: ".concat(t))},CantAccessCaptureDevice:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,"CantAccessCaptureDevice",e,"User denied permission to access capture device - ".concat(t),n)},DeviceNotAvailable:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.TracksErrors.DEVICE_NOT_AVAILABLE,"DeviceNotAvailable",e,"[TRACK]: Capture device is no longer available - ".concat(t),n)},DeviceInUse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.TracksErrors.DEVICE_IN_USE,"DeviceInUse",e,"[TRACK]: Capture device is in use by another application - ".concat(t),n)},DeviceLostMidway:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.TracksErrors.DEVICE_LOST_MIDWAY,"DeviceLostMidway",e,"Lost access to capture device midway - ".concat(t),n)},NothingToReturn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.TracksErrors.NOTHING_TO_RETURN,"NothingToReturn",e,"There is no media to return. Please select either video or audio or both.",t)},InvalidVideoSettings:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.TracksErrors.INVALID_VIDEO_SETTINGS,"InvalidVideoSettings",e,"Cannot enable simulcast when no video settings are provided",t)},AutoplayBlocked:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.TracksErrors.AUTOPLAY_ERROR,"AutoplayBlocked",e,"Autoplay blocked because the user didn't interact with the document first",t)},CodecChangeNotPermitted:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.TracksErrors.CODEC_CHANGE_NOT_PERMITTED,"CodecChangeNotPermitted",e,"Codec can't be changed mid call.",t)},OverConstrained:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.TracksErrors.OVER_CONSTRAINED,"OverConstrained",e,"[TRACK]: Requested constraints cannot be satisfied with the device hardware - ".concat(t),n)},NoAudioDetected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please check the mic or use another audio input";return new kn(yn.TracksErrors.NO_AUDIO_DETECTED,"NoAudioDetected",e,"No audio input detected from microphone",t)},SystemDeniedPermission:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.TracksErrors.SYSTEM_DENIED_PERMISSION,"SystemDeniedPermission",e,"Operating System denied permission to access capture device - ".concat(t),n)}},Tn={CreateOfferFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebrtcErrors.CREATE_OFFER_FAILED,"CreateOfferFailed",e,"[".concat(e.toString(),"]: Failed to create offer. "),t)},CreateAnswerFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebrtcErrors.CREATE_ANSWER_FAILED,"CreateAnswerFailed",e,"[".concat(e.toString(),"]: Failed to create answer. "),t)},SetLocalDescriptionFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebrtcErrors.SET_LOCAL_DESCRIPTION_FAILED,"SetLocalDescriptionFailed",e,"[".concat(e.toString(),"]: Failed to set offer. "),t)},SetRemoteDescriptionFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebrtcErrors.SET_REMOTE_DESCRIPTION_FAILED,"SetRemoteDescriptionFailed",e,"[".concat(e.toString(),"]: Failed to set answer. "),t)},ICEFailure:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebrtcErrors.ICE_FAILURE,"ICEFailure",e,"[".concat(e.toString(),"]: Ice connection state FAILED"),t)}},En={ServerErrors:function(e,t,n){return new kn(e,"ServerErrors",t,n,n,!0)},AlreadyJoined:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebsocketMethodErrors.ALREADY_JOINED,"AlreadyJoined",e,"[JOIN]: You have already joined this room.",t)},CannotJoinPreviewInProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.WebsocketMethodErrors.CANNOT_JOIN_PREVIEW_IN_PROGRESS,"CannotJoinPreviewInProgress",e,"[JOIN]: Cannot join if preview is in progress",t)}},xn={NotConnected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.GenericErrors.NOT_CONNECTED,"NotConnected",e,"Client is not connected",t)},Signalling:function(e,t){return new kn(yn.GenericErrors.SIGNALLING,"Signalling",e,"Unknown signalling error: ".concat(e.toString()," ").concat(t," "),t)},Unknown:function(e,t){return new kn(yn.GenericErrors.UNKNOWN,"Unknown",e,"Unknown exception: ".concat(t),t)},NotReady:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.GenericErrors.NOT_READY,"NotReady",e,t,t)},JsonParsingFailed:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new kn(yn.GenericErrors.JSON_PARSING_FAILED,"JsonParsingFailed",e,"Failed to parse JSON message - ".concat(t),n)},TrackMetadataMissing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.GenericErrors.TRACK_METADATA_MISSING,"TrackMetadataMissing",e,"Track Metadata Missing",t)},RTCTrackMissing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.GenericErrors.RTC_TRACK_MISSING,"RTCTrackMissing",e,"RTC Track missing",t)},PeerMetadataMissing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.GenericErrors.PEER_METADATA_MISSING,"PeerMetadataMissing",e,"Peer Metadata Missing",t)},ValidationFailed:function(e,t){return new kn(yn.GenericErrors.INVALID_ROLE,"ValidationFailed",gn.VALIDATION,e,t?JSON.stringify(t):"")},InvalidRole:function(e,t){return new kn(yn.GenericErrors.INVALID_ROLE,"InvalidRole",e,"Invalid role. Join with valid role",t,!0)},PreviewAlreadyInProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(yn.GenericErrors.PREVIEW_IN_PROGRESS,"PreviewAlreadyInProgress",e,"[Preview]: Cannot join if preview is in progress",t)},MissingMediaDevices:function(){return new kn(yn.GenericErrors.MISSING_MEDIADEVICES,"MissingMediaDevices",gn.JOIN,"navigator.mediaDevices is undefined. 100ms SDK won't work on this website as WebRTC is not supported on HTTP endpoints(missing navigator.mediaDevices). Please ensure you're using the SDK either on localhost or a valid HTTPS endpoint.","",!0)},MissingRTCPeerConnection:function(){return new kn(yn.GenericErrors.MISSING_RTCPEERCONNECTION,"MissingRTCPeerConnection",gn.JOIN,"RTCPeerConnection which is a core requirement for WebRTC call was not found, this could be due to an unsupported browser or browser extensions blocking WebRTC","",!0)}},Cn={PlatformNotSupported:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(7001,"PlatformNotSupported",e,"Check HMS Docs to see the list of supported platforms",t)},InitFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(7002,"InitFailed",e,"Plugin init failed",t)},ProcessingFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(7003,"ProcessingFailed",e,"Plugin processing failed",t)},AddAlreadyInProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(7004,"AddAlreadyInProgress",e,"Plugin add already in progress",t)},DeviceNotSupported:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new kn(7005,"DeviceNotSupported",e,"Check HMS Docs to see the list of supported devices",t)}},Pn={NoEntryToPlay:function(e,t){return new kn(yn.PlaylistErrors.NO_ENTRY_TO_PLAY,"NoEntryToPlay",e,"Reached end of playlist",t)},NoEntryPlaying:function(e,t){return new kn(yn.PlaylistErrors.NO_ENTRY_IS_PLAYING,"NoEntryIsPlaying",e,"No entry is playing at this time",t)}},Rn="VALIDATIONS";function _n(e){return null!=e}var An=function(){if(!_n(RTCPeerConnection)){var e=xn.MissingRTCPeerConnection();throw dn.e(Rn,e),e}},In=function(){if(!_n(navigator.mediaDevices)){var e=xn.MissingMediaDevices();throw dn.e(Rn,e),e}};function On(e,t){var n,r=(0,Dt.Qc)(e.sdp);if(!(null==(n=r.origin)?void 0:n.username.startsWith("mozilla")))return e;var i=t?Array.from(t.values()):[];return r.media.forEach((function(e){var t,n,r,a=null==(t=e.msid)?void 0:t.split(" ")[0],o=null==(n=i.find((function(t){return t.type===e.type&&t.stream_id===a})))?void 0:n.track_id;o&&(e.msid=null==(r=e.msid)?void 0:r.replace(/\s(.+)/," ".concat(o)))})),{type:e.type,sdp:(0,Dt.cW)(r)}}function Nn(e){return e.sdp.includes("usedtx=1")?e:{type:e.type,sdp:e.sdp.replace("useinbandfec=1","useinbandfec=1;usedtx=1")}}var Dn,Ln="HMSConnection",Mn=function(){function e(t,n){p(this,e),this.candidates=new Array,this.role=t,this.signal=n}return m(e,[{key:"iceConnectionState",get:function(){return this.nativeConnection.iceConnectionState}},{key:"connectionState",get:function(){return this.nativeConnection.connectionState}},{key:"action",get:function(){return this.role===vn.Publish?gn.PUBLISH:gn.SUBSCRIBE}},{key:"addTransceiver",value:function(e,t){return this.nativeConnection.addTransceiver(e,t)}},{key:"createOffer",value:function(e,t){return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.nativeConnection.createOffer(t);case 3:return r=n.sent,n.abrupt("return",(dn.d(Ln,"[role=".concat(this.role,"] createOffer offer=").concat(JSON.stringify(r,null,1))),Nn(On(r,e))));case 7:throw n.prev=7,n.t0=n.catch(0),Tn.CreateOfferFailed(this.action,n.t0.message);case 10:case"end":return n.stop()}}),n,this,[[0,7]])})))}},{key:"createAnswer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.nativeConnection.createAnswer(e);case 3:return n=t.sent,t.abrupt("return",(dn.d(Ln,"[role=".concat(this.role,"] createAnswer answer=").concat(JSON.stringify(n,null,1))),n));case 7:throw t.prev=7,t.t0=t.catch(0),Tn.CreateAnswerFailed(this.action,t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"setLocalDescription",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,dn.d(Ln,"[role=".concat(this.role,"] setLocalDescription description=").concat(JSON.stringify(e,null,1))),t.next=4,this.nativeConnection.setLocalDescription(e);case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),Tn.SetLocalDescriptionFailed(this.action,t.t0.message);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"setRemoteDescription",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,dn.d(Ln,"[role=".concat(this.role,"] setRemoteDescription description=").concat(JSON.stringify(e,null,1))),t.next=4,this.nativeConnection.setRemoteDescription(e);case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),Tn.SetRemoteDescriptionFailed(this.action,t.t0.message);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"addIceCandidate",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return dn.d(Ln,"[role=".concat(this.role,"] addIceCandidate candidate=").concat(JSON.stringify(e,null,1))),t.next=3,this.nativeConnection.addIceCandidate(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"remoteDescription",get:function(){return this.nativeConnection.remoteDescription}},{key:"getSenders",value:function(){return this.nativeConnection.getSenders()}},{key:"removeTrack",value:function(e){this.nativeConnection.removeTrack(e)}},{key:"setMaxBitrate",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.getSenders().find((function(e){var n;return(null==(n=null==e?void 0:e.track)?void 0:n.id)===t.getTrackIDBeingSent()})),!r){n.next=8;break}return(i=r.getParameters()).encodings.length>0&&(i.encodings[0].maxBitrate=1e3*e),n.next=6,r.setParameters(i);case 6:n.next=9;break;case 8:dn.w(Ln,"no sender found to setMaxBitrate for track - ".concat(t.trackId,", sentTrackId - ").concat(t.getTrackIDBeingSent()));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getStats",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nativeConnection.getStats();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.nativeConnection.close();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),Fn="renegotiation-callback-id",Un="ion-sfu",jn="SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID",Vn="device-change",Bn="local-audio-enabled",zn="local-video-enabled",Gn="stats-update",Hn="track-degraded",Wn="track-restored",Kn="track-audio-level-update",qn="local-audio-silence",Qn="analytics",Jn="audio-plugin-failed",Yn="policy-change",$n="local-role-update",Xn="audio-track-update",Zn="audio-track-added",er="audio-track-removed",tr="autoplay-error",nr=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,vn.Publish,e)).observer=i,o.transport=a,o.nativeConnection=new RTCPeerConnection(r),o.nativeConnection.createDataChannel(Un,{protocol:"SCTP"}),o.nativeConnection.onicecandidate=function(t){var n=t.candidate;n&&e.trickle(o.role,n)},o.nativeConnection.oniceconnectionstatechange=function(){o.observer.onIceConnectionChange(o.nativeConnection.iceConnectionState)},o.nativeConnection.onconnectionstatechange=function(){o.observer.onConnectionStateChange(o.nativeConnection.connectionState)},o}return m(n,[{key:"initAfterJoin",value:function(){var e=this;this.nativeConnection.onnegotiationneeded=function(){return rn(e,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn.d("HMSPublishConnection","onnegotiationneeded"),e.next=3,this.observer.onRenegotiationNeeded();case 3:case"end":return e.stop()}}),e,this)})))}}},{key:"trackUpdate",value:function(e){this.transport.trackUpdate(e)}}]),n}(Mn),rr=m((function e(t){p(this,e),this.tracks=new Array,this.nativeStream=t,this.id=t.id})),ir=function(e){Ee(n,e);var t=Pe(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).audio=!0,i.video=un.NONE,i.connection=r,i}return m(n,[{key:"setAudio",value:function(e){this.audio!==e&&(this.audio=e,this.syncWithApiChannel(!1))}},{key:"setVideoLayerLocally",value:function(e,t){this.video=e,dn.d("[Remote stream] ".concat(t," - ").concat(this.id),"Setting layer field to - ".concat(e))}},{key:"setVideoLayer",value:function(e,t){this.setVideoLayerLocally(e,t),dn.d("[Remote stream] ".concat(t," - ").concat(this.id),"Switching to ".concat(e," layer")),this.syncWithApiChannel()}},{key:"getSimulcastLayer",value:function(){return this.video}},{key:"isAudioSubscribed",value:function(){return this.audio}},{key:"syncWithApiChannel",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={streamId:this.id,audio:this.audio};e&&(t.video=this.video,t.framerate=this.video),this.connection.sendOverApiDataChannel(JSON.stringify(t))}}]),n}(rr),ar=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";p(this,e),this.TAG="HMSDataChannel",this.nativeChannel=t,this.observer=n,this.metadata=i,t.onmessage=function(e){r.observer.onMessage(e.data)}}return m(e,[{key:"id",get:function(){return this.nativeChannel.id}},{key:"label",get:function(){return this.nativeChannel.label}},{key:"readyState",get:function(){return this.nativeChannel.readyState}},{key:"send",value:function(e){dn.d(this.TAG,"[".concat(this.metadata,"] Sending [size=").concat(e.length,"] message=").concat(e)),this.nativeChannel.send(e)}},{key:"close",value:function(){this.nativeChannel.close()}}]),e}(),or=function(){function e(t,n,r){p(this,e),this.logIdentifier="",this.stream=t,this.nativeTrack=n,this.source=r}return m(e,[{key:"enabled",get:function(){return this.nativeTrack.enabled}},{key:"trackId",get:function(){return this.firstTrackId||this.sdpTrackId||this.nativeTrack.id}},{key:"getMediaTrackSettings",value:function(){return this.nativeTrack.getSettings()}},{key:"setEnabled",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.nativeTrack.enabled=e;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setSdpTrackId",value:function(e){this.sdpTrackId=e}},{key:"setFirstTrackId",value:function(e){this.firstTrackId=e}},{key:"cleanup",value:function(){var e;null==(e=this.nativeTrack)||e.stop()}}]),e}();!function(e){e.AUDIO="audio",e.VIDEO="video"}(Dn||(Dn={}));var sr,cr=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i){var a;if(p(this,n),(a=t.call(this,e,r,i)).type=Dn.AUDIO,a.audioElement=null,"audio"!==r.kind)throw new Error("Expected 'track' kind = 'audio'");return a}return m(n,[{key:"getVolume",value:function(){return this.audioElement?100*this.audioElement.volume:null}},{key:"setVolume",value:function(e){if(e<0||e>100)throw Error("Please pass a valid number between 0-100");this.subscribeToAudio(0!==e&&this.enabled),this.audioElement&&(this.audioElement.volume=e/100)}},{key:"setAudioElement",value:function(e){this.audioElement=e}},{key:"getAudioElement",value:function(){return this.audioElement}},{key:"getOutputDevice",value:function(){return this.outputDevice}},{key:"cleanup",value:function(){we(ke(n.prototype),"cleanup",this).call(this),this.audioElement&&(this.audioElement.srcObject=null,this.audioElement.remove(),this.audioElement=null)}},{key:"setOutputDevice",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.audioElement){t.next=3;break}return dn.d("audio-track","no audio element to set output"),t.abrupt("return");case 3:if(t.prev=3,t.t0="function"==typeof this.audioElement.setSinkId,!t.t0){t.next=9;break}return t.next=8,null==(n=this.audioElement)?void 0:n.setSinkId(e.deviceId);case 8:this.outputDevice=e;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(3),dn.d("audio-track",t.t1);case 14:case"end":return t.stop()}}),t,this,[[3,11]])})))}},{key:"removeSink",value:function(){var e;this.audioElement&&(null==(e=window.HMS)?void 0:e.AUDIO_SINK)&&(this.audioElement.srcObject=null,this.subscribeToAudio(!1))}},{key:"addSink",value:function(){var e,t;if(this.nativeTrack&&this.audioElement&&(null==(e=window.HMS)?void 0:e.AUDIO_SINK)){var n=this.audioElement.srcObject;n instanceof MediaStream&&(null==(t=n.getAudioTracks()[0])?void 0:t.id)===this.nativeTrack.id||(this.audioElement.srcObject=new MediaStream([this.nativeTrack]),this.subscribeToAudio(!0))}}},{key:"subscribeToAudio",value:function(e){this.stream instanceof ir&&this.stream.setAudio(e)}}]),n}(or),ur=function(e){Ee(n,e);var t=Pe(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"setEnabled",value:function(e){var t=this,r=function(e){return we(ke(n.prototype),e,t)};return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==this.enabled,!t.t0){t.next=5;break}return t.next=4,r("setEnabled").call(this,e);case 4:this.subscribeToAudio(e);case 5:case"end":return t.stop()}}),t,this)})))}}]),n}(cr),lr=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i){var a;if(p(this,n),(a=t.call(this,e,r,i)).type=Dn.VIDEO,a.sinkCount=0,"video"!==r.kind)throw new Error("Expected 'track' kind = 'video'");return a}return m(n,[{key:"hasSinks",value:function(){return this.sinkCount>0}},{key:"addSink",value:function(e){this.addSinkInternal(e,this.nativeTrack)}},{key:"removeSink",value:function(e){null!==e.srcObject&&(e.srcObject=null,this.sinkCount>0&&this.sinkCount--)}},{key:"addSinkInternal",value:function(e,t){var n,r=e.srcObject;null!==r&&r instanceof MediaStream&&(null==(n=r.getVideoTracks()[0])?void 0:n.id)===t.id||(e.srcObject=new MediaStream([t]),this.sinkCount++)}}]),n}(or),dr=function(e){Ee(n,e);var t=Pe(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments))._degraded=!1,e._degradedAt=null,e._layerDefinitions=[],e.history=new fr,e}return m(n,[{key:"degraded",get:function(){return this._degraded}},{key:"degradedAt",get:function(){return this._degradedAt}},{key:"setEnabled",value:function(e){var t=this,r=function(e){return we(ke(n.prototype),e,t)};return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==this.enabled,!t.t0){t.next=4;break}return t.next=4,r("setEnabled").call(this,e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"preferLayer",value:function(e){!this.shouldSendVideoLayer(e,"preferLayer")||(this.stream.setVideoLayer(e,this.logIdentifier),this.pushInHistory("uiPreferLayer-".concat(e)))}},{key:"getSimulcastLayer",value:function(){return this.stream.getSimulcastLayer()}},{key:"addSink",value:function(e){we(ke(n.prototype),"addSink",this).call(this,e),this.updateLayer("addSink"),this.pushInHistory("uiSetLayer-high")}},{key:"removeSink",value:function(e){we(ke(n.prototype),"removeSink",this).call(this,e),this.updateLayer("removeSink"),this._degraded=!1,this.pushInHistory("uiSetLayer-none")}},{key:"getSimulcastDefinitions",value:function(){return h(this._layerDefinitions)}},{key:"setSimulcastDefinitons",value:function(e){this._layerDefinitions=e}},{key:"setLayerFromServer",value:function(e,t){this._degraded=t,this._degradedAt=t?new Date:this._degradedAt,this.stream.setVideoLayerLocally(e,this.logIdentifier),this.pushInHistory("sfuLayerUpdate-".concat(e))}},{key:"setDegradedFromSdk",value:function(e){this._degraded=e,this._degradedAt=e?new Date:this._degradedAt,this.updateLayer("sdkDegradation"),this.pushInHistory(e?"sdkDegraded-none":"sdkRecovered-high")}},{key:"updateLayer",value:function(e){var t=this.degraded||!this.hasSinks()?un.NONE:un.HIGH;!this.shouldSendVideoLayer(t,e)||this.stream.setVideoLayer(t,this.logIdentifier)}},{key:"pushInHistory",value:function(e){}},{key:"shouldSendVideoLayer",value:function(e,t){var n=this.getSimulcastLayer();return!(!this.degraded||e!==un.NONE)||(n!==e||(dn.d("[Remote Track] ".concat(this.logIdentifier),"Not sending update, already on layer ".concat(e,", source=").concat(t)),!1))}}]),n}(lr),fr=function(){function e(){p(this,e),this.history=[]}return m(e,[{key:"push",value:function(e){e.time=(new Date).toISOString().split("T")[1],this.history.push(e)}}]),e}(),hr=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,vn.Subscribe,e)).TAG="[HMSSubscribeConnection]",a.remoteStreams=new Map,a.pendingMessageQueue=[],a.handlePendingApiMessages=function(){a.pendingMessageQueue.length>0&&(dn.d(a.TAG,"Found pending message queue, sending messages"),a.pendingMessageQueue.forEach((function(e){return a.sendOverApiDataChannel(e)})),a.pendingMessageQueue.length=0)},a.observer=i,a.nativeConnection=new RTCPeerConnection(r),a.initNativeConnectionCallbacks(),a}return m(n,[{key:"initNativeConnectionCallbacks",value:function(){var e=this;this.nativeConnection.oniceconnectionstatechange=function(){e.observer.onIceConnectionChange(e.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=function(){e.observer.onConnectionStateChange(e.nativeConnection.connectionState)},this.nativeConnection.ondatachannel=function(t){t.channel.label===Un&&(e.apiChannel=new ar(t.channel,{onMessage:function(t){e.observer.onApiChannelMessage(t)}},"role=".concat(e.role)),t.channel.onopen=e.handlePendingApiMessages)},this.nativeConnection.onicecandidate=function(t){null!==t.candidate&&e.signal.trickle(e.role,t.candidate)},this.nativeConnection.ontrack=function(t){var n,r=t.streams[0],i=r.id;if(!e.remoteStreams.has(i)){var a=new ir(r,e);e.remoteStreams.set(i,a),r.onremovetrack=function(t){var n=a.tracks.findIndex((function(e){return e.nativeTrack.id===t.track.id}));if(n>=0){var r=a.tracks[n];e.observer.onTrackRemove(r),a.tracks.splice(n,1),0===a.tracks.length&&e.remoteStreams.delete(i)}}}var o=e.remoteStreams.get(i),s=new("audio"===t.track.kind?ur:dr)(o,t.track),c=function(e,t){var n;if((null==e?void 0:e.sdp)&&t){var r=(0,Dt.Qc)(e.sdp).media.find((function(e){return _n(e.mid)&&parseInt(e.mid)===parseInt(t)}));return null==(n=null==r?void 0:r.msid)?void 0:n.split(" ")[1]}}(e.remoteDescription,null==(n=t.transceiver)?void 0:n.mid);c&&s.setSdpTrackId(c),o.tracks.push(s),e.observer.onTrackAdd(s)}}},{key:"sendOverApiDataChannel",value:function(e){this.apiChannel&&"open"===this.apiChannel.readyState?this.apiChannel.send(e):(dn.w(this.TAG,"API Data channel not ".concat(this.apiChannel?"open":"present",", queueing"),e),this.pendingMessageQueue.push(e))}},{key:"close",value:function(){var e=this,t=function(t){return we(ke(n.prototype),t,e)};return rn(this,null,f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("close").call(this);case 2:null==(n=this.apiChannel)||n.close();case 3:case"end":return e.stop()}}),e,this)})))}}]),n}(Mn),pr=function(){function e(t){p(this,e),this.key=t,this.storage=null}return m(e,[{key:"getStorage",value:function(){return yr&&(this.storage=window.localStorage),this.storage}},{key:"get",value:function(){var e,t=null==(e=this.getStorage())?void 0:e.getItem(this.key);return t?JSON.parse(t):void 0}},{key:"set",value:function(e){var t,n=JSON.stringify(e);null==(t=this.getStorage())||t.setItem(this.key,n)}},{key:"clear",value:function(){var e;null==(e=this.getStorage())||e.removeItem(this.key)}}]),e}(),vr="0.2.4",mr=new Lt.UAParser,gr="undefined"==typeof window&&!(null==(sr=mr.getBrowser().name)?void 0:sr.toLowerCase().includes("electron")),yr="undefined"!=typeof window;var kr,br=function(){if(gr)return"hmsclient/".concat(vr);var e=mr.getDevice(),t=mr.getBrowser(),n=mr.getOS();return e.type?"hmsclient/".concat(vr," ").concat(n.name,"/").concat(n.version," (").concat(e.vendor,"_").concat(e.type,"_/_").concat(t.name,"_").concat(t.version,")"):"hmsclient/".concat(vr," ").concat(n.name,"/").concat(n.version," (").concat(t.name,"_").concat(t.version,")")}(),wr="InitService",Sr=function(){function e(){p(this,e)}return m(e,null,[{key:"handleError",value:function(e,t){switch(e.status){case 404:throw wn.EndpointUnreachable(gn.INIT,t.message||e.statusText);case 200:break;default:throw wn.ServerErrors(t.code||e.status,gn.INIT,t.message||(null==e?void 0:e.statusText))}}},{key:"fetchInitConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"https://prod-init.100ms.live",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return rn(this,null,f().mark((function i(){var a,o,s,c;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return dn.d(wr,"fetchInitConfig: initEndpoint=".concat(n," token=").concat(e," peerId=").concat(t," region=").concat(r," ")),a=Tr(n,t,r),i.prev=2,i.next=5,fetch(a,{headers:{Authorization:"Bearer ".concat(e)}});case 5:return o=i.sent,i.next=8,o.json();case 8:return s=i.sent,i.abrupt("return",(this.handleError(o,s),dn.d(wr,"config is ".concat(JSON.stringify(s,null,2))),Er(s)));case 12:throw i.prev=12,i.t0=i.catch(2),c=i.t0,["Failed to fetch","NetworkError"].some((function(e){return c.message.includes(e)}))?wn.EndpointUnreachable(gn.INIT,c.message):c;case 16:case"end":return i.stop()}}),i,this,[[2,12]])})))}}]),e}();function Tr(e,t,n){try{var r=new URL("/init",e);return n&&n.trim().length>0&&r.searchParams.set("region",n.trim()),r.searchParams.set("peer_id",t),r.searchParams.set("user_agent",br),r.toString()}catch(r){var i=r;throw dn.e(wr,i.name,i.message),i}}function Er(e){var t;return tn(en({},e),{rtcConfiguration:tn(en({},e.rtcConfiguration),{iceServers:null==(t=e.rtcConfiguration)?void 0:t.ice_servers})})}function xr(e){switch(e){case kr.JOIN:return gn.JOIN;case kr.OFFER:return gn.PUBLISH;case kr.ANSWER:return gn.SUBSCRIBE;case kr.TRACK_UPDATE:return gn.TRACK;default:return gn.NONE}}!function(e){e.JOIN="join",e.OFFER="offer",e.ANSWER="answer",e.TRICKLE="trickle",e.TRACK_UPDATE="track-update",e.BROADCAST="broadcast",e.ANALYTICS="analytics",e.SERVER_ERROR="on-error",e.SERVER_WARNING="on-warning",e.SDK_NOTIFICATION="sdk-notification",e.LEAVE="leave",e.END_ROOM="end-room",e.PING="ping",e.ROLE_CHANGE_REQUEST="role-change-request",e.ROLE_CHANGE="role-change",e.TRACK_UPDATE_REQUEST="track-update-request",e.PEER_LEAVE_REQUEST="peer-leave-request",e.CHANGE_TRACK_MUTE_STATE_REQUEST="change-track-mute-state-request",e.START_RTMP_OR_RECORDING_REQUEST="rtmp-start",e.STOP_RTMP_AND_RECORDING_REQUEST="rtmp-stop",e.UPDATE_PEER_METADATA="peer-update",e.START_HLS_STREAMING="hls-start",e.STOP_HLS_STREAMING="hls-stop"}(kr||(kr={}));var Cr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;p(this,e),this.capacity=t,this.storage=[]}return m(e,[{key:"size",value:function(){return this.storage.length}},{key:"toList",value:function(){return this.storage.slice(0)}},{key:"enqueue",value:function(e){this.size()===this.capacity&&this.dequeue(),this.storage.push(e)}},{key:"dequeue",value:function(){return this.storage.shift()}},{key:"aggregate",value:function(e){return e(this.storage)}}]),e}();function Pr(e){if(e<0)throw Error("`ms` should be a positive integer");return new Promise((function(t){return setTimeout(t,e)}))}var Rr,_r=function(){function e(t){var n=this;p(this,e),this.TAG="[ SIGNAL ]: ",this.pongResponseTimes=new Cr(5),this.isJoinCompleted=!1,this.pendingTrickle=[],this.socket=null,this.callbacks=new Map,this._isConnected=!1,this.id=0,this.observer=t,window.addEventListener("offline",(function(){dn.d(n.TAG,"Window network offline"),n.setIsConnected(!1,"Window network offline")})),window.addEventListener("online",(function(){dn.d(n.TAG,"Window network online"),n.observer.onNetworkOnline()})),this.onCloseHandler=this.onCloseHandler.bind(this),this.onMessageHandler=this.onMessageHandler.bind(this)}return m(e,[{key:"isConnected",get:function(){return this._isConnected}},{key:"setIsConnected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";dn.d(this.TAG,"isConnected set id: ".concat(this.id,", oldValue: ").concat(this._isConnected,", newValue: ").concat(e," }")),this._isConnected!==e&&(this._isConnected&&!e?(this._isConnected=e,this.observer.onOffline(t)):!this._isConnected&&e&&(this._isConnected=e,this.observer.onOnline()))}},{key:"getPongResponseTimes",value:function(){return this.pongResponseTimes.toList()}},{key:"call",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o,s=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Wt(),a={method:e,params:t,id:i,jsonrpc:"2.0"},null==(r=this.socket)||r.send(JSON.stringify(a)),n.prev=2,n.next=5,new Promise((function(e,t){s.callbacks.set(i,{resolve:e,reject:t})}));case 5:return n.abrupt("return",n.sent);case 8:throw n.prev=8,n.t0=n.catch(2),o=n.t0,En.ServerErrors(Number(o.code),xr(e),o.message);case 12:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"notify",value:function(e,t){var n,r={method:e,params:t};null==(n=this.socket)||n.send(JSON.stringify(r))}},{key:"open",value:function(e){var t=this;return new Promise((function(n,r){t.socket&&(t.socket.removeEventListener("close",t.onCloseHandler),t.socket.removeEventListener("message",t.onMessageHandler)),t.socket=new WebSocket(e);var i=function(e){dn.e(t.TAG,"Error from websocket",e),r(bn.FailedToConnect(gn.JOIN,"Error opening websocket connection - ".concat(e)))};t.socket.addEventListener("error",i);t.socket.addEventListener("open",(function e(){var r,a;n(),t.setIsConnected(!0),t.id++,null==(r=t.socket)||r.removeEventListener("open",e),null==(a=t.socket)||a.removeEventListener("error",i),t.pingPongLoop(t.id)})),t.socket.addEventListener("close",t.onCloseHandler),t.socket.addEventListener("message",t.onMessageHandler)}))}},{key:"close",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.socket?(this.socket.close(1e3,"Normal Close"),this.setIsConnected(!1,"code: 1000, normal websocket close"),this.socket.removeEventListener("close",this.onCloseHandler),this.socket.removeEventListener("message",this.onMessageHandler)):this.setIsConnected(!1,"websocket not connected yet");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"join",value:function(e,t,n,r,i){return rn(this,null,f().mark((function a(){var o,s,c=this;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(this.isConnected){a.next=2;break}throw bn.WebSocketConnectionLost(gn.JOIN,"Failed to send join over WS connection");case 2:return o={name:e,disableVidAutoSub:n,data:t,offer:i,server_sub_degrade:r},a.next=5,this.callWithRetry(kr.JOIN,o);case 5:return s=a.sent,a.abrupt("return",(this.isJoinCompleted=!0,this.pendingTrickle.forEach((function(e){var t=e.target,n=e.candidate;return c.trickle(t,n)})),this.pendingTrickle.length=0,dn.d(this.TAG,"join: response=".concat(JSON.stringify(s,null,1))),s));case 7:case"end":return a.stop()}}),a,this)})))}},{key:"trickle",value:function(e,t){this.isJoinCompleted?this.notify(kr.TRICKLE,{target:e,candidate:t}):this.pendingTrickle.push({target:e,candidate:t})}},{key:"offer",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.callWithRetry(kr.OFFER,{desc:e,tracks:Object.fromEntries(t)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"answer",value:function(e){this.notify(kr.ANSWER,{desc:e})}},{key:"trackUpdate",value:function(e){this.notify(kr.TRACK_UPDATE,{version:"1.0",tracks:Object.fromEntries(e)})}},{key:"broadcast",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.BROADCAST,en({version:"1.0"},e.toSignalParams()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"leave",value:function(){this.notify(kr.LEAVE,{version:"1.0"})}},{key:"endRoom",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.call(kr.END_ROOM,{lock:e,reason:t});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"sendEvent",value:function(e){if(!this.isConnected)throw Error("".concat(this.TAG," not connected. Could not send event ").concat(e));this.notify(kr.ANALYTICS,e.toSignalParams())}},{key:"ping",value:function(e){var t=Date.now(),n=new Promise((function(n){setTimeout((function(){n(Date.now()-t)}),e+1)})),r=this.call(kr.PING,{timestamp:t}).then((function(){return Date.now()-t})).catch((function(){return Date.now()-t}));return Promise.race([n,r])}},{key:"requestRoleChange",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.ROLE_CHANGE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"acceptRoleChangeRequest",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.ROLE_CHANGE,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"requestTrackStateChange",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.TRACK_UPDATE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"requestMultiTrackStateChange",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.CHANGE_TRACK_MUTE_STATE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"removePeer",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.PEER_LEAVE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"startRTMPOrRecording",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.START_RTMP_OR_RECORDING_REQUEST,en({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPAndRecording",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call(kr.STOP_RTMP_AND_RECORDING_REQUEST,{version:"1.0"});case 2:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.START_HLS_STREAMING,en({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.STOP_HLS_STREAMING,en({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"updatePeer",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(kr.UPDATE_PEER_METADATA,en({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"onCloseHandler",value:function(e){dn.d("Websocket closed code=".concat(e.code)),this.setIsConnected(!1,"code: ".concat(e.code).concat(1e3!==e.code?", unexpected websocket close":""))}},{key:"onMessageHandler",value:function(e){var t=e.data,n=JSON.parse(t);if(n.id)this.handleResponseWithId(n);else{if(!n.method)throw Error("WebSocket message has no 'method' or 'id' field, message=".concat(n));this.handleResponseWithMethod(n)}}},{key:"handleResponseWithId",value:function(e){var t=e,n=t.id;if(this.callbacks.has(n)){var r=this.callbacks.get(n);this.callbacks.delete(n),t.result?r.resolve(t.result):r.reject(t.error)}else this.observer.onNotification(t)}},{key:"handleResponseWithMethod",value:function(e){switch(e.method){case kr.OFFER:this.observer.onOffer(e.params);break;case kr.TRICKLE:this.observer.onTrickle(e.params);break;case kr.SERVER_ERROR:this.observer.onServerError(En.ServerErrors(Number(e.params.code),gn.NONE,e.params.message));break;case kr.SERVER_WARNING:dn.w(this.TAG,e.params);break;default:this.observer.onNotification(e)}}},{key:"pingPongLoop",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a,o=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(null==(n=window.HMS)?void 0:n.PING_TIMEOUT)||12e3,!this.isConnected){t.next=6;break}return t.next=4,this.ping(i);case 4:a=t.sent,this.pongResponseTimes.enqueue(a),a>i?(dn.d(this.TAG,"Pong timeout ".concat(e,", pageHidden=").concat("undefined"!=typeof document&&document.hidden)),this.id===e&&this.setIsConnected(!1,"ping pong failure")):setTimeout((function(){return o.pingPongLoop(e)}),(null==(r=window.HMS)?void 0:r.PING_INTERVAL)||1e3);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"callWithRetry",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=3,i=En.ServerErrors(500,e,"Default ".concat(e," error")),a=0;case 2:if(!(a<r)){n.next=20;break}return n.prev=3,dn.d(this.TAG,"Try number ".concat(a+1," sending ").concat(e),t),n.next=7,this.call(e,t);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(3),i=n.t0,dn.e(this.TAG,"Failed sending ".concat(e),{method:e,try:a+1,params:t,error:i}),5===parseInt("".concat(i.code/100))||429===i.code){n.next=14;break}return n.abrupt("break",20);case 14:return o=1e3*(2+2*Math.random()),n.next=17,Pr(o);case 17:a++,n.next=2;break;case 20:throw dn.e("Sending ".concat(e," over WS failed after ").concat(r," retries"),{method:e,params:t,error:i}),i;case 21:case"end":return n.stop()}}),n,this,[[3,10]])})))}}]),e}(),Ar=function(){function e(){p(this,e),this._volume=1,this._codec=hn.OPUS,this._maxBitrate=32,this._deviceId="default",this._advanced=[{googEchoCancellation:{exact:!0}},{googExperimentalEchoCancellation:{exact:!0}},{autoGainControl:{exact:!0}},{noiseSuppression:{exact:!0}},{googHighpassFilter:{exact:!0}},{googAudioMirroring:{exact:!0}}]}return m(e,[{key:"volume",value:function(e){if(!(0<=e&&e<=1))throw Error("volume can only be in range [0.0, 1.0]");return this._volume=e,this}},{key:"codec",value:function(e){return this._codec=e,this}},{key:"maxBitrate",value:function(e){if(e&&e<=0)throw Error("maxBitrate should be >= 1");return this._maxBitrate=e,this}},{key:"deviceId",value:function(e){return this._deviceId=e,this}},{key:"advanced",value:function(e){return this._advanced=e,this}},{key:"build",value:function(){return new Ir(this._volume,this._codec,this._maxBitrate,this._deviceId,this._advanced)}}]),e}(),Ir=function(){function e(t,n,r,i,a){p(this,e),this.volume=t,this.codec=n,this.maxBitrate=r,this.deviceId=i,this.advanced=a}return m(e,[{key:"toConstraints",value:function(){return{deviceId:this.deviceId,advanced:this.advanced}}},{key:"toAnalyticsProperties",value:function(){return{audio_bitrate:this.maxBitrate,audio_codec:this.codec}}}]),e}(),Or=function(){function e(){p(this,e),this._width=320,this._height=180,this._codec=fn.VP8,this._maxFramerate=30,this._maxBitrate=150,this._advanced=[]}return m(e,[{key:"setWidth",value:function(e){return this._width=e,this}},{key:"setHeight",value:function(e){return this._height=e,this}},{key:"codec",value:function(e){return this._codec=e,this}},{key:"maxFramerate",value:function(e){if(e&&e<=0)throw Error("maxFramerate should be >= 1");return this._maxFramerate=e,this}},{key:"maxBitrate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"==typeof e&&e<=0)throw Error("maxBitrate should be >= 1");return this._maxBitrate=e,!this._maxBitrate&&t&&(this._maxBitrate=15e4),this}},{key:"deviceId",value:function(e){return this._deviceId=e,this}},{key:"advanced",value:function(e){return this._advanced=e,this}},{key:"build",value:function(){return new Nr(this._width,this._height,this._codec,this._maxFramerate,this._deviceId,this._advanced,this._maxBitrate)}}]),e}(),Nr=function(){function e(t,n,r,i,a,o,s){p(this,e),this.width=t,this.height=n,this.codec=r,this.maxFramerate=i,this.maxBitrate=s,this.deviceId=a,this.advanced=o}return m(e,[{key:"toConstraints",value:function(){return{width:this.width,height:this.height,frameRate:this.maxFramerate,deviceId:this.deviceId}}},{key:"toAnalyticsProperties",value:function(){return{width:this.width,height:this.height,video_bitrate:this.maxBitrate,framerate:this.maxFramerate,video_codec:this.codec}}}]),e}(),Dr=function(){function e(){p(this,e),this._video=(new Or).build(),this._audio=(new Ar).build(),this._screen=(new Or).build(),this._simulcast=!1}return m(e,[{key:"video",value:function(e){return this._video=e,this}},{key:"audio",value:function(e){return this._audio=e,this}},{key:"screen",value:function(e){return this._screen=e,this}},{key:"simulcast",value:function(e){return this._simulcast=e,this}},{key:"build",value:function(){if(null===this._audio&&null===this._video)throw Sn.NothingToReturn(gn.TRACK);if(null===this._video&&this._simulcast)throw Sn.InvalidVideoSettings(gn.TRACK,"Cannot enable simulcast when no video settings are provided");return new Lr(this._video,this._audio,this._simulcast,this._screen||void 0)}}]),e}(),Lr=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.video=t,this.audio=n,this.simulcast=r,this.screen=i}return m(e,[{key:"toAnalyticsProperties",value:function(){var e={audio_enabled:null!==this.audio,video_enabled:null!==this.video};return this.audio&&(e=en(en({},this.audio.toAnalyticsProperties()),e)),this.video&&(e=en(en({},this.video.toAnalyticsProperties()),e)),e}}]),e}();!function(e){e.ROOM_STATE="room-state",e.PEER_JOIN="on-peer-join",e.PEER_LEAVE="on-peer-leave",e.PEER_LIST="peer-list",e.TRACK_METADATA_ADD="on-track-add",e.TRACK_UPDATE="on-track-update",e.CHANGE_TRACK_MUTE_STATE_UPDATE="on-change-track-mute-state-request",e.ACTIVE_SPEAKERS="active-speakers",e.CONNECTION_QUALITY="on-connection-quality-update",e.SFU_STATS="sfu-stats",e.ON_SFU_TRACK_LAYER_UPDATE="on-track-layer-update",e.BROADCAST="on-broadcast",e.ROLE_CHANGE="on-role-change",e.POLICY_CHANGE="on-policy-change",e.ROLE_CHANGE_REQUEST="on-role-change-request",e.TRACK_UPDATE_REQUEST="on-track-update-request",e.PEER_UPDATE="on-peer-update",e.PEER_LEAVE_REQUEST="on-peer-leave-request",e.UNSUPPORTED="unsupported",e.RTMP_START="on-rtmp-start",e.RTMP_STOP="on-rtmp-stop",e.RECORDING_START="on-record-start",e.RECORDING_STOP="on-record-stop",e.HLS_START="on-hls-start",e.HLS_STOP="on-hls-stop"}(Rr||(Rr={}));var Mr=function(){function e(t,n,r){p(this,e),this.store=t,this.listener=n,this.audioListener=r}return m(e,[{key:"handleActiveSpeakers",value:function(e){var t,n,r,i=this,a=e["speaker-list"],o=a.map((function(e){return{audioLevel:e.level,peer:i.store.getPeerById(e.peer_id),track:i.store.getTrackById(e.track_id)}}));null==(t=this.audioListener)||t.onAudioLevelUpdate(o),this.store.updateSpeakers(o);var s=a[0];if(s){var c=this.store.getPeerById(s.peer_id);null==(n=this.listener)||n.onPeerUpdate(on.BECAME_DOMINANT_SPEAKER,c)}else null==(r=this.listener)||r.onPeerUpdate(on.RESIGNED_DOMINANT_SPEAKER,null)}}]),e}(),Fr=function(){function e(t){var n=t.sender,r=t.message,i=t.type,a=void 0===i?"chat":i,o=t.recipientPeer,s=t.recipientRoles,c=t.time;p(this,e),this.sender=n,this.message=r,this.type=a,this.recipientPeer=o,this.recipientRoles=s,this.time=c}return m(e,[{key:"toSignalParams",value:function(){var e,t,n=null==(e=this.recipientRoles)?void 0:e.map((function(e){return e.name})),r=null==(t=this.recipientPeer)?void 0:t.peerId,i={info:{message:this.message,type:this.type}};return(null==n?void 0:n.length)&&(i.roles=n),r&&(i.peer_id=r),i}}]),e}(),Ur=function(){function e(t){var n=t.peerId,r=t.name,i=t.isLocal,a=t.customerUserId,o=t.metadata,s=t.role,c=t.joinedAt;p(this,e),this.customerUserId="",this.metadata="",this.auxiliaryTracks=[],this.name=r,this.peerId=n,this.isLocal=i,this.customerUserId=a,this.metadata=o,this.joinedAt=c,s&&(this.role=s)}return m(e,[{key:"updateRole",value:function(e){this.role=e}},{key:"updateName",value:function(e){this.name=e}},{key:"updateMetadata",value:function(e){this.metadata=e}}]),e}(),jr=m((function e(){p(this,e)}));jr.makePeerId=function(){return Wt()};var Vr,Br=function(e){Ee(n,e);var t=Pe(n);function n(e){var r;return p(this,n),(r=t.call(this,tn(en({},e),{peerId:jr.makePeerId(),isLocal:!0}))).isLocal=!0,r.auxiliaryTracks=[],r}return m(n)}(Ur),zr=function(e){Ee(n,e);var t=Pe(n);function n(e){var r;return p(this,n),(r=t.call(this,tn(en({},e),{isLocal:!1}))).isLocal=!1,r.auxiliaryTracks=[],r.fromRoomState=!1,r.fromRoomState=!!e.fromRoomState,r}return m(n)}(Ur),Gr=function(){function e(t,n){p(this,e),this.store=t,this.listener=n}return m(e,[{key:"TAG",get:function(){return"[".concat(this.constructor.name,"]")}},{key:"handleNotification",value:function(e,t){e===Rr.BROADCAST&&this.handleBroadcast(t)}},{key:"handleBroadcast",value:function(e){var t,n=e.peer,r=e.info,i=e.roles,a=this.getSender(n),o=e.private?this.store.getLocalPeer():void 0,s=[];if(null==i?void 0:i.length){var c,u=this.store.getKnownRoles(),l=g(i);try{for(l.s();!(c=l.n()).done;){var d=c.value;u[d]&&s.push(u[d])}}catch(h){l.e(h)}finally{l.f()}}var f=new Fr(tn(en({},r),{sender:a,recipientRoles:s,recipientPeer:o,time:new Date(e.timestamp)}));dn.d(this.TAG,"Received Message from sender=".concat(null==n?void 0:n.peer_id,": "),f),null==(t=this.listener)||t.onMessageReceived(f)}},{key:"getSender",value:function(e){var t=e?this.store.getPeerById(e.peer_id):void 0;return!t&&e&&(t=new Ur({peerId:e.peer_id,name:e.info.name,isLocal:!1,customerUserId:e.info.user_id,metadata:e.info.data})),t}}]),e}(),Hr=function(){function e(t,n,r,i){var a=this;p(this,e),this.store=t,this.peerManager=n,this.trackManager=r,this.listener=i,this.handleInitialPeerList=function(e){var t=Object.values(e.peers);a.peerManager.handlePeerList(t)},this.handleReconnectPeerList=function(e){a.handleRepeatedPeerList(e.peers)},this.handlePreviewRoomState=function(e){if(a.store.hasRoleDetailsArrived()){var t=e.peers;null!=t?(Object.keys(t).forEach((function(e){t[e].tracks={},t[e].is_from_room_state=!0})),a.handleRepeatedPeerList(t)):0===e.peer_count&&a.handleRepeatedPeerList({})}},this.handleRepeatedPeerList=function(e){var t=a.store.getRemotePeers(),n=Object.values(e),r=t.filter((function(t){return!e[t.peerId]}));dn.d(a.TAG,{peersToRemove:r}),r.forEach((function(e){var t,n={peer_id:e.peerId,role:(null==(t=e.role)?void 0:t.name)||"",info:{name:e.name,data:e.metadata||"",user_id:e.customerUserId||""},tracks:{}};a.peerManager.handlePeerLeave(n)})),n.forEach((function(e){var t=a.store.getPeerById(e.peer_id),n=Object.values(e.tracks);t?(a.store.getPeerTracks(t.peerId).forEach((function(n){var r;e.tracks[n.trackId]||(a.removePeerTrack(t,n.trackId),null==(r=a.listener)||r.onTrackUpdate(sn.TRACK_REMOVED,n,t))})),n.forEach((function(e){a.store.getTrackById(e.track_id)||a.store.setTrackState({peerId:t.peerId,trackInfo:e})})),a.trackManager.handleTrackUpdate({peer:{info:e.info,peer_id:e.peer_id},tracks:e.tracks}),a.peerManager.handlePeerUpdate(e)):a.peerManager.handlePeerJoin(e)}))}}return m(e,[{key:"TAG",get:function(){return"[".concat(this.constructor.name,"]")}},{key:"handleNotification",value:function(e,t,n){if(e===Rr.PEER_LIST){var r=t;n?(dn.d(this.TAG,"RECONNECT_PEER_LIST event",r),this.handleReconnectPeerList(r)):(dn.d(this.TAG,"PEER_LIST event",r),this.handleInitialPeerList(r))}else if(e===Rr.ROOM_STATE){var i=t;this.handlePreviewRoomState(i)}}},{key:"removePeerTrack",value:function(e,t){var n,r;if((null==(n=e.audioTrack)?void 0:n.trackId)===t)e.audioTrack=void 0;else if((null==(r=e.videoTrack)?void 0:r.trackId)===t)e.videoTrack=void 0;else{var i=e.auxiliaryTracks.findIndex((function(e){return e.trackId===t}));i>=0&&e.auxiliaryTracks.splice(i,1)}}}]),e}(),Wr=function(e){return e?new Date(e):void 0},Kr=function(){function e(t,n,r){var i=this;p(this,e),this.store=t,this.trackManager=n,this.listener=r,this.handlePeerList=function(e){var t;if(0!==e.length){var n=[],r=new Set(e.map((function(e){return e.peer_id})));i.store.getRemotePeers().forEach((function(e){var t=e.peerId,n=e.fromRoomState;!r.has(t)&&n&&i.store.removePeer(t)}));var a,o=g(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;n.push(i.makePeer(s))}}catch(c){o.e(c)}finally{o.f()}null==(t=i.listener)||t.onPeerUpdate(on.PEER_LIST,n),i.trackManager.processPendingTracks()}},this.handlePeerJoin=function(e){var t,n=i.makePeer(e);null==(t=i.listener)||t.onPeerUpdate(on.PEER_JOINED,n),i.trackManager.processPendingTracks()},this.handlePeerLeave=function(e){var t,n,r,a,o=i.store.getPeerById(e.peer_id);i.store.removePeer(e.peer_id),dn.d(i.TAG,"PEER_LEAVE event",e,i.store.getPeers()),o&&(o.audioTrack&&(null==(t=i.listener)||t.onTrackUpdate(sn.TRACK_REMOVED,o.audioTrack,o)),o.videoTrack&&(null==(n=i.listener)||n.onTrackUpdate(sn.TRACK_REMOVED,o.videoTrack,o)),null==(r=o.auxiliaryTracks)||r.forEach((function(e){var t;null==(t=i.listener)||t.onTrackUpdate(sn.TRACK_REMOVED,e,o)})),null==(a=i.listener)||a.onPeerUpdate(on.PEER_LEFT,o))}}return m(e,[{key:"TAG",get:function(){return"[".concat(this.constructor.name,"]")}},{key:"handleNotification",value:function(e,t){switch(e){case Rr.PEER_JOIN:var n=t;this.handlePeerJoin(n);break;case Rr.PEER_LEAVE:var r=t;this.handlePeerLeave(r);break;case Rr.PEER_UPDATE:this.handlePeerUpdate(t)}}},{key:"handlePeerUpdate",value:function(e){var t,n=this.store.getPeerById(e.peer_id);if(n){if(n.role&&n.role.name!==e.role){var r=this.store.getPolicyForRole(e.role);n.updateRole(r),null==(t=this.listener)||t.onPeerUpdate(on.ROLE_UPDATED,n)}this.handlePeerInfoUpdate(en({peer:n},e.info))}}},{key:"handlePeerInfoUpdate",value:function(e){var t,n,r=e.peer,i=e.name,a=e.data;!r||(i&&r.name!==i&&(r.updateName(i),null==(t=this.listener)||t.onPeerUpdate(on.NAME_UPDATED,r)),a&&r.metadata!==a&&(r.updateMetadata(a),null==(n=this.listener)||n.onPeerUpdate(on.METADATA_UPDATED,r)))}},{key:"makePeer",value:function(e){var t=new zr({peerId:e.peer_id,name:e.info.name,customerUserId:e.info.user_id,metadata:e.info.data,role:this.store.getPolicyForRole(e.role),joinedAt:Wr(e.joined_at),fromRoomState:!!e.is_from_room_state});for(var n in this.store.addPeer(t),dn.d(this.TAG,"adding to the peerList",t),e.tracks)this.store.setTrackState({peerId:e.peer_id,trackInfo:e.tracks[n]});return t}}]),e}(),qr=function(){function e(t,n){p(this,e),this.store=t,this.eventBus=n}return m(e,[{key:"handlePolicyChange",value:function(e){var t,n,r=this.store.getLocalPeer();if(r&&!r.role){var i=e.known_roles[e.name];r.updateRole(i)}this.store.setKnownRoles(e.known_roles),this.store.getRoom().templateId=e.template_id;var a=null==(t=e.known_roles[e.name])?void 0:t.publishParams;if(this.store.setPublishParams(a),this.setSimulcastLayers(a),this.handleStreamingRecordingPermissions(null==(n=e.known_roles[e.name])?void 0:n.permissions),(null==r?void 0:r.role)&&r.role.name!==e.name){var o=this.store.getPolicyForRole(e.name),s=r.role;r.updateRole(o),this.eventBus.localRoleUpdate.publish({oldRole:s,newRole:o})}this.eventBus.policyChange.publish(e)}},{key:"setSimulcastLayers",value:function(e){if(e&&Object.keys(e).length>0){var t=e.videoSimulcastLayers,n=e.screenSimulcastLayers;this.store.setVideoSimulcastLayers(t),this.store.setScreenshareSimulcastLayers(n)}}},{key:"handleStreamingRecordingPermissions",value:function(e){e&&(void 0===e.recording&&(e.recording=!0),void 0===e.streaming&&(e.streaming=!0))}}]),e}(),Qr=function(){function e(t,n){p(this,e),this.store=t,this.listener=n}return m(e,[{key:"handleNotification",value:function(e,t){switch(e){case Rr.ROLE_CHANGE_REQUEST:this.handleRoleChangeRequest(t);break;case Rr.TRACK_UPDATE_REQUEST:this.handleTrackUpdateRequest(t);break;case Rr.CHANGE_TRACK_MUTE_STATE_UPDATE:this.handleChangeTrackStateRequest(t);break;default:return}}},{key:"handleRoleChangeRequest",value:function(e){var t,n={requestedBy:e.requested_by?this.store.getPeerById(e.requested_by):void 0,role:this.store.getPolicyForRole(e.role),token:e.token};null==(t=this.listener)||t.onRoleChangeRequest(n)}},{key:"handleTrackUpdateRequest",value:function(e){var t=this,n=e.requested_by,r=e.track_id,i=e.mute,a=n?this.store.getPeerById(n):void 0,o=this.store.getLocalPeerTracks().find((function(e){return e.publishedTrackId===r}));if(o){var s=function(){var e;null==(e=t.listener)||e.onChangeTrackStateRequest({requestedBy:a,track:o,enabled:!i})};if(i){if(o.enabled===!i)return;o.setEnabled(!i).then(s)}else s()}}},{key:"handleChangeTrackStateRequest",value:function(e){var t,n=this,r=e.type,i=e.source,a=e.value,o=e.requested_by,s=o?this.store.getPeerById(o):void 0,c=!a,u=this.getTracksToBeUpdated({type:r,source:i,enabled:c});if(0!==u.length)if(c)null==(t=this.listener)||t.onChangeMultiTrackStateRequest({requestedBy:s,tracks:u,type:r,source:i,enabled:!0});else{var l,d=[],f=g(u);try{for(f.s();!(l=f.n()).done;){var h=l.value;d.push(h.setEnabled(!1))}}catch(p){f.e(p)}finally{f.f()}Promise.all(d).then((function(){var e;null==(e=n.listener)||e.onChangeMultiTrackStateRequest({requestedBy:s,tracks:u,enabled:!1})}))}}},{key:"getTracksToBeUpdated",value:function(e){var t=e.type,n=e.source,r=e.enabled,i=this.store.getLocalPeerTracks();return t&&(i=i.filter((function(e){return e.type===t}))),n&&(i=i.filter((function(e){return e.source===n}))),i.filter((function(e){return e.enabled!==r}))}}]),e}(),Jr=function(){function e(t,n){p(this,e),this.store=t,this.listener=n}return m(e,[{key:"handleNotification",value:function(e,t){switch(e){case Rr.PEER_LIST:this.onRoomState(t.room);break;case Rr.RTMP_START:this.onRTMPStart(t);break;case Rr.RTMP_STOP:this.onRTMPStop(t);break;case Rr.RECORDING_START:this.onRecordingStart(t);break;case Rr.RECORDING_STOP:this.onRecordingStop(t);break;case Rr.ROOM_STATE:this.handlePreviewRoomState(t);break;default:this.onHLS(e,t)}}},{key:"handlePreviewRoomState",value:function(e){var t=e.room;this.onRoomState(t,e.peer_count)}},{key:"onRoomState",value:function(e,t){var n,r,i,a=e.recording,o=e.streaming,s=e.session_id,c=e.started_at,u=e.name,l=this.store.getRoom();l.peerCount=t,l.name=u,l.recording.server.running=!!(null==a?void 0:a.sfu.enabled),l.recording.browser.running=!!(null==a?void 0:a.browser.enabled),l.rtmp.running=!!(null==(n=null==o?void 0:o.rtmp)?void 0:n.enabled),l.rtmp.startedAt=Wr(null==(r=null==o?void 0:o.rtmp)?void 0:r.started_at),l.recording.server.startedAt=Wr(null==a?void 0:a.sfu.started_at),l.recording.browser.startedAt=Wr(null==a?void 0:a.browser.started_at),l.recording.hls=this.getPeerListHLSRecording(a),l.hls=this.convertHls(null==o?void 0:o.hls),l.sessionId=s,l.startedAt=Wr(c),null==(i=this.listener)||i.onRoomUpdate(an.RECORDING_STATE_UPDATED,l)}},{key:"onRTMPStart",value:function(e){var t;this.setRTMPStatus(!(null==(t=e.error)?void 0:t.code),e)}},{key:"onRTMPStop",value:function(e){this.setRTMPStatus(!1,e)}},{key:"onRecordingStart",value:function(e){var t;this.setRecordingStatus(!(null==(t=e.error)?void 0:t.code),e)}},{key:"onRecordingStop",value:function(e){this.setRecordingStatus(!1,e)}},{key:"onHLS",value:function(e,t){var n,r;if([Rr.HLS_START,Rr.HLS_STOP].includes(e)){var i=this.store.getRoom();t.enabled=e===Rr.HLS_START&&!(null==(n=t.error)?void 0:n.code),i.hls=this.convertHls(t),i.recording.hls=this.getHLSRecording(t),null==(r=this.listener)||r.onRoomUpdate(an.HLS_STREAMING_STATE_UPDATED,i)}}},{key:"convertHls",value:function(e){var t,n,r={running:!!(null==e?void 0:e.enabled),variants:[],error:(null==(t=null==e?void 0:e.error)?void 0:t.code)?e.error:void 0};return null==(n=null==e?void 0:e.variants)||n.forEach((function(e){r.variants.push({meetingURL:e.meeting_url,url:e.url,metadata:e.metadata,startedAt:Wr(e.started_at)})})),r}},{key:"getHLSRecording",value:function(e){var t,n,r,i,a={running:!1};return(null==e?void 0:e.hls_recording)&&(a={running:!!(null==e?void 0:e.enabled),singleFilePerLayer:!!(null==(t=e.hls_recording)?void 0:t.single_file_per_layer),hlsVod:!!(null==(n=e.hls_recording)?void 0:n.hls_vod),startedAt:Wr(null==(r=null==e?void 0:e.variants)?void 0:r[0].started_at),error:(null==(i=null==e?void 0:e.error)?void 0:i.code)?e.error:void 0}),a}},{key:"getPeerListHLSRecording",value:function(e){var t,n,r=null==e?void 0:e.hls;return{running:!!(null==r?void 0:r.enabled),startedAt:Wr(null==r?void 0:r.started_at),singleFilePerLayer:!!(null==(t=null==r?void 0:r.config)?void 0:t.single_file_per_layer),hlsVod:!!(null==(n=null==r?void 0:r.config)?void 0:n.hls_vod)}}},{key:"setRecordingStatus",value:function(e,t){var n,r,i,a,o=this.store.getRoom();"sfu"===t.type?(o.recording.server={running:e,startedAt:e?Wr(t.started_at):void 0,error:(null==(n=t.error)?void 0:n.code)?t.error:void 0},a=an.SERVER_RECORDING_STATE_UPDATED):(o.recording.browser={running:e,startedAt:e?Wr(t.started_at):void 0,error:(null==(r=t.error)?void 0:r.code)?t.error:void 0},a=an.BROWSER_RECORDING_STATE_UPDATED),null==(i=this.listener)||i.onRoomUpdate(a,o)}},{key:"setRTMPStatus",value:function(e,t){var n,r,i=this.store.getRoom();i.rtmp={running:e,startedAt:e?Wr(t.started_at):void 0,error:(null==(n=t.error)?void 0:n.code)?t.error:void 0},null==(r=this.listener)||r.onRoomUpdate(an.RTMP_STREAMING_STATE_UPDATED,i)}}]),e}();function Yr(e,t){var n=e.toLowerCase();return n.includes("device not found")?Sn.DeviceNotAvailable(gn.TRACK,t,e):n.includes("permission denied")?Sn.CantAccessCaptureDevice(gn.TRACK,t,e):Sn.GenericTrack(gn.TRACK,e)}function $r(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("chrome"===Nt.browserDetails.browser&&"NotAllowedError"===e.name&&e.message.includes("denied by system"))return Sn.SystemDeniedPermission(gn.TRACK,t,e.message);if("firefox"===Nt.browserDetails.browser&&"NotFoundError"===e.name){var n=Sn.SystemDeniedPermission(gn.TRACK,t,e.message);return n.description="Capture device is either blocked at Operating System level or not available - ".concat(t),n}switch(e.name){case"OverconstrainedError":return Sn.OverConstrained(gn.TRACK,t,e.constraint);case"NotAllowedError":return Sn.CantAccessCaptureDevice(gn.TRACK,t,e.message);case"NotFoundError":return Sn.DeviceNotAvailable(gn.TRACK,t,e.message);case"NotReadableError":return Sn.DeviceInUse(gn.TRACK,t,e.message);case"TypeError":return Sn.NothingToReturn(gn.TRACK,e.message);default:return Yr(e.message,t)}}(e,t);return n.addNativeError(e),n}function Xr(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!!e&&e.toConstraints()});case 3:return t.abrupt("return",t.sent.getAudioTracks()[0]);case 6:throw t.prev=6,t.t0=t.catch(0),$r(t.t0,Vr.AUDIO);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))}function Zr(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:!!e&&e.toConstraints()});case 3:return t.abrupt("return",t.sent.getVideoTracks()[0]);case 6:throw t.prev=6,t.t0=t.catch(0),$r(t.t0,Vr.VIDEO);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))}function ei(e){return"canvas"in e||"MediaStreamAudioDestinationNode"===e.label||""===e.label}!function(e){e.UNKNOWN="unknown(video or audio)",e.AUDIO="audio",e.VIDEO="video",e.AV="audio, video",e.SCREEN="screen"}(Vr||(Vr={}));var ti,ni,ri,ii=function(){function e(t,n,r){var i=this;p(this,e),this.track=t,this.audioLevelEvent=n,this.silenceEvent=r,this.TAG="[TrackAudioLevelMonitor]",this.audioLevel=0,this.isMonitored=!1,this.interval=100,this.historyInterval=700,this.history=new Cr(this.historyInterval/this.interval),this.detectSilence=function(){return rn(i,null,f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=30,n=10,r=0;case 1:if(!this.isMonitored){e.next=14;break}if(!this.track.enabled){e.next=10;break}if(!this.isSilentThisInstant()){e.next=9;break}if(!(++r>n)){e.next=7;break}return this.silenceEvent.publish({track:this.track}),e.abrupt("break",14);case 7:e.next=10;break;case 9:return e.abrupt("break",14);case 10:return e.next=12,Pr(t);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e,this)})))};try{var a=new MediaStream([this.track.nativeTrack]);this.analyserNode=this.createAnalyserNodeForStream(a)}catch(a){dn.w(this.TAG,"Unable to initialize AudioContext",a)}}return m(e,[{key:"start",value:function(){var e=this;this.stop(),this.isMonitored=!0,dn.d(this.TAG,"Starting track Monitor",this.track),this.loop().then((function(){return dn.d(e.TAG,"Stopping track Monitor",e.track)}))}},{key:"stop",value:function(){this.analyserNode?(this.sendAudioLevel(0),this.isMonitored=!1):dn.d(this.TAG,"AudioContext not initialized")}},{key:"loop",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMonitored){e.next=6;break}return this.sendAudioLevel(this.getMaxAudioLevelOverPeriod()),e.next=4,Pr(this.interval);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"sendAudioLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e=e>35?e:0,Math.abs(this.audioLevel-e)>5){this.audioLevel=e;var t={track:this.track,audioLevel:this.audioLevel};this.audioLevelEvent.publish(t)}}},{key:"getMaxAudioLevelOverPeriod",value:function(){if(this.analyserNode){var e=this.calculateAudioLevel();return void 0!==e&&this.history.enqueue(e),this.history.aggregate((function(e){return Math.max.apply(Math,h(e))}))}dn.d(this.TAG,"AudioContext not initialized")}},{key:"calculateAudioLevel",value:function(){if(this.analyserNode){var e=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(e);var t,n=.009,r=n,i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r=Math.max(r,(a-128)/128)}}catch(s){i.e(s)}finally{i.f()}var o=(Math.log(n)-Math.log(r))/Math.log(n);return Math.ceil(Math.min(Math.max(100*o,0),100))}dn.d(this.TAG,"AudioContext not initialized")}},{key:"isSilentThisInstant",value:function(){if(this.analyserNode){var e=new Uint8Array(this.analyserNode.fftSize);return this.analyserNode.getByteTimeDomainData(e),!e.some((function(e){return 128!==e&&0!==e}))}dn.d(this.TAG,"AudioContext not initialized")}},{key:"createAnalyserNodeForStream",value:function(e){var t=new AudioContext,n=t.createAnalyser();return t.createMediaStreamSource(e).connect(n),n}}]),e}();!function(e){e.TRANSFORM="TRANSFORM",e.ANALYZE="ANALYZE"}(ti||(ti={})),function(e){e.PLATFORM_NOT_SUPPORTED="PLATFORM_NOT_SUPPORTED",e.DEVICE_NOT_SUPPORTED="DEVICE_NOT_SUPPORTED"}(ni||(ni={})),function(e){e.CUSTOM="CUSTOM",e.LOCAL="LOCAL",e.HMS="HMS"}(ri||(ri={}));var ai,oi,si=function(){if(yr&&window){var e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?ri.LOCAL:e.includes("app.100ms.live")?ri.HMS:ri.CUSTOM}return ri.CUSTOM}(),ci=function(){function e(t){var n=t.name,r=t.level,i=t.properties,a=t.includesPII,o=t.timestamp;p(this,e),this.metadata={peer:{}},this.name=n,this.level=r,this.includesPII=a||!1,this.properties=i||{},this.timestamp=o||(new Date).getTime(),this.event_id=Wt(),this.device_id=function(){var e="",t=new pr("hms-analytics-deviceId"),n=t.get();return n?e=n:(e=Wt(),t.set(e)),e}()}return m(e,[{key:"toSignalParams",value:function(){return{name:this.name,info:tn(en({},this.properties),{timestamp:this.timestamp,domain:si}),timestamp:(new Date).getTime()}}}]),e}();!function(e){e[e.VERBOSE=0]="VERBOSE",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.OFF=3]="OFF"}(ai||(ai={})),function(e){e[e.VERBOSE=0]="VERBOSE",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.OFF=3]="OFF"}(oi||(oi={}));var ui=function(){function e(){p(this,e)}return m(e,null,[{key:"failure",value:function(e,t){var n=oi.ERROR,r=en({plugin_name:e},t.toAnalyticsProperties());return new ci({name:"mediaPlugin.failed",level:n,properties:r})}},{key:"audioPluginFailure",value:function(e,t,n){var r=oi.ERROR,i=en({plugin_name:e,sampleRate:t},n.toAnalyticsProperties());return new ci({name:"mediaPlugin.failed",level:r,properties:i})}},{key:"audioPluginStats",value:function(e){var t=e.pluginName,n=e.duration,r=e.loadTime,i=e.sampleRate,a=oi.INFO;return new ci({name:"mediaPlugin.stats",level:a,properties:{plugin_name:t,duration:n,load_time:r,sampleRate:i}})}},{key:"stats",value:function(e){var t=e.pluginName,n=e.duration,r=e.loadTime,i=e.avgPreProcessingTime,a=e.avgProcessingTime,o=e.inputFrameRate,s=e.pluginFrameRate,c=oi.INFO;return new ci({name:"mediaPlugin.stats",level:c,properties:{plugin_name:t,duration:n,load_time:r,avg_preprocessing_time:i,avg_processing_time:a,input_frame_rate:o,plugin_frame_rate:s}})}}]),e}(),li="AudioPluginsAnalytics",di=function(){function e(t){p(this,e),this.eventBus=t,this.initTime={},this.addedTimestamps={},this.pluginAdded={},this.pluginSampleRate={}}return m(e,[{key:"added",value:function(e,t){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.pluginSampleRate[e]=t}},{key:"removed",value:function(e){if(this.pluginAdded[e]){var t={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],sampleRate:this.pluginSampleRate[e]};this.eventBus.analytics.publish(ui.audioPluginStats(t)),this.clean(e)}}},{key:"failure",value:function(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(ui.audioPluginFailure(e,this.pluginSampleRate[e],t)),this.clean(e))}},{key:"initWithTime",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.initTime[e]){n.next=3;break}return dn.i(li,"Plugin Already loaded ".concat(e,", time it took: ").concat(this.initTime[e])),n.abrupt("return");case 3:return n.prev=3,n.next=6,this.timeInMs(t);case 6:r=n.sent,dn.i(li,"Time taken for Plugin ".concat(e," initialization : ").concat(r)),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(3),i=Cn.InitFailed(gn.AUDIO_PLUGINS,"failed during initialization of plugin".concat(n.t0.message||n.t0)),dn.e(li,i),this.failure(e,i),i;case 14:r&&(this.initTime[e]=r);case 15:case"end":return n.stop()}}),n,this,[[3,10]])})))}},{key:"timeInMs",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Date.now(),t.next=3,e();case 3:return t.abrupt("return",Math.floor(Date.now()-n));case 4:case"end":return t.stop()}}),t)})))}},{key:"clean",value:function(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.pluginAdded[e],delete this.pluginSampleRate[e]}}]),e}(),fi="AudioPluginsManager",hi=function(){function e(t,n){p(this,e),this.pluginAddInProgress=!1,this.hmsTrack=t,this.pluginsMap=new Map,this.analytics=new di(n),this.createAudioContext()}return m(e,[{key:"getPlugins",value:function(){return Array.from(this.pluginsMap.keys())}},{key:"addPlugin",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(n=e.getName)?void 0:n.call(e)){t.next=4;break}return dn.w("no name provided by the plugin"),t.abrupt("return");case 4:if(!this.pluginAddInProgress){t.next=7;break}throw i=Cn.AddAlreadyInProgress(gn.AUDIO_PLUGINS,"Add Plugin is already in Progress"),this.analytics.added(r,this.audioContext.sampleRate),this.analytics.failure(r,i),dn.w("can't add another plugin when previous add is in progress"),i;case 7:return this.pluginAddInProgress=!0,t.prev=8,t.next=11,this.addPluginInternal(e);case 11:return t.prev=11,this.pluginAddInProgress=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[8,,11,14]])})))}},{key:"addPluginInternal",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(n=e.getName)?void 0:n.call(e),!this.pluginsMap.get(r)){t.next=4;break}return dn.w(fi,"plugin - ".concat(r," already added.")),t.abrupt("return");case 4:return t.next=6,this.validateAndThrow(r,e);case 6:if(t.prev=6,0!==this.pluginsMap.size){t.next=12;break}return t.next=10,this.initAudioNodes();case 10:t.next=13;break;case 12:this.prevAudioNode&&this.prevAudioNode.disconnect();case 13:return this.analytics.added(r,this.audioContext.sampleRate),t.next=16,this.analytics.initWithTime(r,(function(){return rn(i,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.init());case 1:case"end":return t.stop()}}),t)})))}));case 16:return this.pluginsMap.set(r,e),t.next=19,this.processPlugin(e);case 19:return t.next=21,this.connectToDestination();case 21:t.next=26;break;case 23:throw t.prev=23,t.t0=t.catch(6),dn.e(fi,"failed to add plugin",t.t0),t.t0;case 26:case"end":return t.stop()}}),t,this,[[6,23]])})))}},{key:"validatePlugin",value:function(e){return e.checkSupport(this.audioContext)}},{key:"validateAndThrow",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.validatePlugin(t)).isSupported){n.next=5;break}dn.i(fi,"plugin is supported,- ".concat(t.getName())),n.next=19;break;case 5:if(this.analytics.added(e,this.audioContext.sampleRate),r.errType!==ni.PLATFORM_NOT_SUPPORTED){n.next=13;break}return i=Cn.PlatformNotSupported(gn.AUDIO_PLUGINS,"platform not supported, see docs"),this.analytics.failure(e,i),n.next=10,this.cleanup();case 10:throw i;case 13:if(r.errType!==ni.DEVICE_NOT_SUPPORTED){n.next=19;break}return a=Cn.DeviceNotSupported(gn.AUDIO_PLUGINS,"audio device not supported, see docs"),this.analytics.failure(e,a),n.next=18,this.cleanup();case 18:throw a;case 19:case"end":return n.stop()}}),n,this)})))}},{key:"removePlugin",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.removePluginInternal(e);case 2:if(0!==this.pluginsMap.size){t.next=10;break}return t.next=5,this.cleanup();case 5:return dn.i(fi,"No plugins left, stopping plugins loop"),t.next=8,this.hmsTrack.setProcessedTrack(void 0);case 8:t.next=12;break;case 10:return t.next=12,this.reprocessPlugins();case 12:case"end":return t.stop()}}),t,this)})))}},{key:"cleanup",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=g(this.pluginsMap.values()),e.prev=1,i.s();case 3:if((a=i.n()).done){e.next=9;break}return o=a.value,e.next=7,this.removePluginInternal(o);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.e(e.t0);case 14:return e.prev=14,i.f(),e.finish(14);case 17:return e.next=19,this.hmsTrack.setProcessedTrack(void 0);case 19:null==(t=this.sourceNode)||t.disconnect(),null==(n=this.prevAudioNode)||n.disconnect(),null==(r=this.outputTrack)||r.stop(),this.sourceNode=void 0,this.destinationNode=void 0,this.prevAudioNode=void 0,this.outputTrack=void 0;case 26:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})))}},{key:"closeContext",value:function(){return rn(this,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.audioContext)||t.close(),this.audioContext=void 0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"reprocessPlugins",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.pluginsMap.size&&this.sourceNode){e.next=2;break}return e.abrupt("return");case 2:return t=Array.from(this.pluginsMap.values()),e.next=5,this.cleanup();case 5:return e.next=7,this.initAudioNodes();case 7:n=0,r=t;case 8:if(!(n<r.length)){e.next=15;break}return i=r[n],e.next=12,this.addPlugin(i);case 12:n++,e.next=8;break;case 15:case"end":return e.stop()}}),e,this)})))}},{key:"initAudioNodes",value:function(){return rn(this,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioContext){e.next=12;break}if(this.sourceNode||(t=new MediaStream([this.hmsTrack.nativeTrack]),this.sourceNode=this.audioContext.createMediaStreamSource(t)),this.destinationNode){e.next=12;break}return this.destinationNode=this.audioContext.createMediaStreamDestination(),this.outputTrack=this.destinationNode.stream.getAudioTracks()[0],e.prev=4,e.next=7,this.hmsTrack.setProcessedTrack(this.outputTrack);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),dn.e(fi,"error in setting processed track",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[4,9]])})))}},{key:"processPlugin",value:function(e){return rn(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.processAudioTrack(this.audioContext,this.prevAudioNode||this.sourceNode);case 3:n=t.sent,this.prevAudioNode&&this.prevAudioNode.connect(n),this.prevAudioNode=n,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(0),r=e.getName(),dn.e(fi,"error in processing plugin ".concat(r),t.t0),t.next=13,this.removePluginInternal(e);case 13:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"connectToDestination",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.prevAudioNode&&this.destinationNode&&this.prevAudioNode.context===this.destinationNode.context&&this.prevAudioNode.connect(this.destinationNode)}catch(t){dn.e(fi,"error in connecting to destination node",t)}case 1:case"end":return e.stop()}}),e,this)})))}},{key:"removePluginInternal",value:function(e){return rn(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(n=e.getName)?void 0:n.call(e),this.pluginsMap.get(r)){t.next=4;break}return dn.w(fi,"plugin - ".concat(r," not found to remove.")),t.abrupt("return");case 4:dn.i(fi,"removing plugin ".concat(r)),this.pluginsMap.delete(r),e.stop(),this.analytics.removed(r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"createAudioContext",value:function(){this.audioContext||(-1!==navigator.userAgent.indexOf("Firefox")?this.audioContext=new AudioContext:this.audioContext=new AudioContext({sampleRate:48e3}))}}]),e}(),pi=function(){function e(){p(this,e),this.storage=new pr("hms-device-selection"),this.remember=!1,this.TAG="HMSDeviceStorage"}return m(e,[{key:"setDevices",value:function(e){this.devices=e}},{key:"rememberDevices",value:function(e){this.remember=e}},{key:"updateSelection",value:function(e,t){var n=this,r=t.deviceId,i=t.groupId;if(this.devices&&this.remember){var a=this.devices[e].find((function(e){return n.isSame({deviceId:r,groupId:i},e)}));if(a){var o=this.storage.get()||{};o[e]=a,this.storage.set(o)}else dn.w(this.TAG,"Could not find device with deviceId: ".concat(r,", groupId: ").concat(i))}}},{key:"getSelection",value:function(){if(this.remember)return this.storage.get()}},{key:"cleanup",value:function(){this.remember=!1,this.devices=void 0}},{key:"isSame",value:function(e,t){return e.deviceId===t.deviceId&&(e.groupId===t.groupId||!e.groupId)}}]),e}(),vi=new pi;function mi(e,t){return function(n){return n in e&&e[n]!==t[n]}}var gi,yi,ki=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(new Ar).build();return p(this,n),(o=t.call(this,e,r,i)).eventBus=a,o.handleSettingsChange=function(e){return rn(Se(o),null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.stream,r=mi(e,this.settings),t.t0=r("maxBitrate")&&e.maxBitrate,!t.t0){t.next=5;break}return t.next=5,n.setMaxBitrate(e.maxBitrate,this);case 5:if(t.t1=r("advanced"),!t.t1){t.next=9;break}return t.next=9,this.nativeTrack.applyConstraints(e.toConstraints());case 9:case"end":return t.stop()}}),t,this)})))},o.handleDeviceChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return rn(Se(o),null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=mi(e,this.settings)("deviceId"),!n.t0){n.next=5;break}return n.next=4,this.replaceTrackWith(e);case 4:t||vi.updateSelection("audioInput",{deviceId:e.deviceId,groupId:this.nativeTrack.getSettings().groupId});case 5:case"end":return n.stop()}}),n,this)})))},e.tracks.push(Se(o)),o.settings=s,"default"===s.deviceId&&!ei(r)&&(o.settings=o.buildNewSettings({deviceId:r.getSettings().deviceId})),o.pluginsManager=new hi(Se(o),a),o.setFirstTrackId(r.id),o}return m(n,[{key:"replaceTrackWith",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.nativeTrack,r=this.enabled,i=Boolean(this.audioLevelMonitor),null==n||n.stop(),t.next=4,Xr(e);case 4:return(a=t.sent).enabled=r,o=this.stream,t.next=9,o.replaceSenderTrack(n,this.processedTrack||a);case 9:return t.next=11,o.replaceStreamTrack(n,a);case 11:return this.nativeTrack=a,i&&this.initAudioLevelMonitor(),t.prev=13,t.next=16,this.pluginsManager.reprocessPlugins();case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(13),this.eventBus.audioPluginFailed.publish(t.t0);case 21:case"end":return t.stop()}}),t,this,[[13,18]])})))}},{key:"setEnabled",value:function(e){var t=this,r=function(e){return we(ke(n.prototype),e,t)};return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==this.enabled,!t.t0){t.next=11;break}if(t.t1=e&&ei(this.nativeTrack),!t.t1){t.next=6;break}return t.next=6,this.replaceTrackWith(this.settings);case 6:return t.next=8,r("setEnabled").call(this,e);case 8:e&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),this.eventBus.localAudioEnabled.publish({enabled:e,track:this}),this.stream.trackUpdate(this);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"isPublishedTrackId",value:function(e){return this.publishedTrackId===e}},{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.buildNewSettings(e),n.next=3,this.handleDeviceChange(r,t);case 3:if(!ei(this.nativeTrack)){n.next=6;break}return this.settings=r,n.abrupt("return");case 6:return n.next=8,this.handleSettingsChange(r);case 8:this.settings=r;case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getPlugins",value:function(){return this.pluginsManager.getPlugins()}},{key:"addPlugin",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pluginsManager.addPlugin(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"removePlugin",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pluginsManager.removePlugin(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validatePlugin",value:function(e){return this.pluginsManager.validatePlugin(e)}},{key:"setProcessedTrack",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=7;break}if(t.t0=this.processedTrack,!t.t0){t.next=5;break}return t.next=5,this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack);case 5:return this.processedTrack=void 0,t.abrupt("return");case 7:if(t.t1=e!==this.processedTrack,!t.t1){t.next=17;break}if(!this.processedTrack){t.next=14;break}return t.next=12,this.stream.replaceSenderTrack(this.processedTrack,e);case 12:t.next=16;break;case 14:return t.next=16,this.stream.replaceSenderTrack(this.nativeTrack,e);case 16:this.processedTrack=e;case 17:case"end":return t.stop()}}),t,this)})))}},{key:"initAudioLevelMonitor",value:function(){this.audioLevelMonitor&&this.destroyAudioLevelMonitor(),dn.d("HMSLocalAudioTrack","Monitor Audio Level for",this,this.getMediaTrackSettings().deviceId),this.audioLevelMonitor=new ii(this,this.eventBus.trackAudioLevelUpdate,this.eventBus.localAudioSilence),this.audioLevelMonitor.start(),this.audioLevelMonitor.detectSilence()}},{key:"destroyAudioLevelMonitor",value:function(){var e;null==(e=this.audioLevelMonitor)||e.stop(),this.audioLevelMonitor=void 0}},{key:"cleanup",value:function(){var e=this,t=function(t){return we(ke(n.prototype),t,e)};return rn(this,null,f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("cleanup").call(this),e.next=3,this.pluginsManager.cleanup();case 3:return e.next=5,this.pluginsManager.closeContext();case 5:null==(n=this.processedTrack)||n.stop(),this.destroyAudioLevelMonitor();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getTrackIDBeingSent",value:function(){return this.processedTrack?this.processedTrack.id:this.nativeTrack.id}},{key:"getTrackBeingSent",value:function(){return this.processedTrack||this.nativeTrack}},{key:"buildNewSettings",value:function(e){var t=en(en({},this.settings),e),n=t.volume,r=t.codec,i=t.maxBitrate,a=t.deviceId,o=t.advanced;return new Ir(n,r,i,a,o)}}]),n}(cr);!function(e){e.TRANSFORM="TRANSFORM",e.ANALYZE="ANALYZE"}(gi||(gi={})),function(e){e["2D"]="2d",e.WEBGL="webgl",e.WEBGL2="webgl2"}(yi||(yi={}));var bi=function(){function e(){p(this,e),this.total=0,this.count=0}return m(e,[{key:"add",value:function(e){this.count++,this.total+=e}},{key:"getAvg",value:function(){return Math.floor(this.total/this.count)}},{key:"reset",value:function(){this.total=0,this.count=0}}]),e}(),wi="VideoPluginsAnalytics",Si=function(){function e(t){p(this,e),this.eventBus=t,this.initTime={},this.preProcessingAvgs=new bi,this.addedTimestamps={},this.processingAvgs={},this.pluginAdded={},this.pluginInputFrameRate={},this.pluginFrameRate={}}return m(e,[{key:"added",value:function(e,t,n){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.processingAvgs[e]=new bi,this.pluginInputFrameRate[e]=t,this.pluginFrameRate[e]=n||t}},{key:"removed",value:function(e){var t;if(this.pluginAdded[e]){var n={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],avgPreProcessingTime:this.preProcessingAvgs.getAvg(),avgProcessingTime:null==(t=this.processingAvgs[e])?void 0:t.getAvg(),inputFrameRate:this.pluginInputFrameRate[e],pluginFrameRate:this.pluginFrameRate[e]};this.eventBus.analytics.publish(ui.stats(n)),this.clean(e)}}},{key:"failure",value:function(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(ui.failure(e,t)),this.clean(e))}},{key:"initWithTime",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.initTime[e]){n.next=3;break}return dn.i(wi,"Plugin Already loaded ".concat(e,", time it took: ").concat(this.initTime[e])),n.abrupt("return");case 3:return n.prev=3,n.next=6,this.timeInMs(t);case 6:r=n.sent,dn.i(wi,"Time taken for Plugin ".concat(e," initialization : ").concat(r)),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(3),i=Cn.InitFailed(gn.VIDEO_PLUGINS,"failed during initialization of plugin".concat(n.t0.message||n.t0)),dn.e(wi,i),this.failure(e,i),i;case 14:r&&(this.initTime[e]=r);case 15:case"end":return n.stop()}}),n,this,[[3,10]])})))}},{key:"preProcessWithTime",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.timeInMs(e);case 2:n=t.sent,this.preProcessingAvgs.add(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"processWithTime",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.timeInMs(t);case 3:i=n.sent,n.next=10;break;case 6:throw n.prev=6,n.t0=n.catch(0),a=Cn.ProcessingFailed(gn.VIDEO_PLUGINS,"Failed during processing of plugin".concat(n.t0.message||n.t0)),dn.e(wi,a),this.failure(e,a),a;case 10:i&&(null==(r=this.processingAvgs[e])||r.add(i));case 11:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"timeInMs",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Date.now(),t.next=3,e();case 3:return t.abrupt("return",Math.floor(Date.now()-n));case 4:case"end":return t.stop()}}),t)})))}},{key:"clean",value:function(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.processingAvgs[e],delete this.pluginAdded[e],delete this.pluginInputFrameRate[e],delete this.pluginFrameRate[e]}}]),e}(),Ti="VideoPluginsManager",Ei=function(){function e(t,n){p(this,e),this.pluginsLoopRunning=!1,this.pluginsLoopState="paused",this.pluginAddInProgress=!1,this.hmsTrack=t,this.pluginsMap=new Map,this.pluginNumFramesToSkip={},this.pluginNumFramesSkipped={},this.analytics=new Si(n),this.canvases=new Array}return m(e,[{key:"getPlugins",value:function(){return Array.from(this.pluginsMap.keys())}},{key:"addPlugin",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.pluginAddInProgress){n.next=7;break}if((i=null==(r=e.getName)?void 0:r.call(e))&&""!==i){n.next=5;break}return dn.w("no name provided by the plugin"),n.abrupt("return");case 5:throw a=Cn.AddAlreadyInProgress(gn.VIDEO_PLUGINS,"Add Plugin is already in Progress"),this.analytics.failure(i,a),dn.w("can't add another plugin when previous add is in progress"),a;case 7:return this.pluginAddInProgress=!0,n.prev=8,n.next=11,this.addPluginInternal(e,t);case 11:return n.prev=11,this.pluginAddInProgress=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[8,,11,14]])})))}},{key:"addPluginInternal",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o,s,c,u=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=null==(r=e.getName)?void 0:r.call(e))&&""!==a){n.next=4;break}return dn.w("no name provided by the plugin"),n.abrupt("return");case 4:if(!this.pluginsMap.has(a)){n.next=7;break}return dn.w(Ti,"plugin - ".concat(e.getName()," already added.")),n.abrupt("return");case 7:return o=this.hmsTrack.getMediaTrackSettings().frameRate||24,s=0,t&&t>0?(dn.i(Ti,"adding plugin ".concat(e.getName()," with framerate ").concat(t)),t<o&&(s=Math.ceil(o/t)-1),this.analytics.added(a,o,t)):(dn.i(Ti,"adding plugin ".concat(e.getName())),this.analytics.added(a,o)),dn.i(Ti,"numFrames to skip processing",s),this.pluginNumFramesToSkip[a]=s,this.pluginNumFramesSkipped[a]=s,this.validateAndThrow(a,e),n.prev=9,n.next=12,this.analytics.initWithTime(a,(function(){return rn(u,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}));case 12:if(this.pluginsMap.set(a,e),!(this.pluginsMap.size+1>this.canvases.length)){n.next=15;break}for(c=this.canvases.length;c<=this.pluginsMap.size;c++)this.canvases[c]=document.createElement("canvas");case 15:return n.next=17,this.startPluginsLoop(null==(i=e.getContextType)?void 0:i.call(e));case 17:n.next=25;break;case 19:return n.prev=19,n.t0=n.catch(9),dn.e(Ti,"failed to add plugin",n.t0),n.next=24,this.removePlugin(e);case 24:throw n.t0;case 25:case"end":return n.stop()}}),n,this,[[9,19]])})))}},{key:"validatePlugin",value:function(e){return e.checkSupport()}},{key:"validateAndThrow",value:function(e,t){var n,r=this.validatePlugin(t);if(r.isSupported)dn.i(Ti,"plugin is supported,- ".concat(t.getName()));else switch(r.errType){case ni.PLATFORM_NOT_SUPPORTED:throw n=Cn.PlatformNotSupported(gn.VIDEO_PLUGINS,"platform not supported, see docs"),this.analytics.failure(e,n),n;case ni.DEVICE_NOT_SUPPORTED:throw n=Cn.DeviceNotSupported(gn.VIDEO_PLUGINS,"video device not supported, see docs"),this.analytics.failure(e,n),n}}},{key:"removePlugin",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getName(),this.pluginsMap.get(n)){t.next=4;break}return dn.w(Ti,"plugin - ".concat(n," not found to remove.")),t.abrupt("return");case 4:if(dn.i(Ti,"removing plugin ".concat(n)),this.removePluginEntry(n),t.t0=0===this.pluginsMap.size,!t.t0){t.next=11;break}return dn.i(Ti,"No plugins left, stopping plugins loop"),t.next=11,this.stopPluginsLoop();case 11:e.stop(),this.analytics.removed(n);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"removePluginEntry",value:function(e){this.pluginsMap.delete(e),this.pluginNumFramesToSkip[e]&&delete this.pluginNumFramesToSkip[e],this.pluginNumFramesSkipped[e]&&delete this.pluginNumFramesSkipped[e]}},{key:"waitForRestart",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pluginsLoopRunning||"running"===this.pluginsLoopState){e.next=6;break}case 1:if("paused"!==this.pluginsLoopState){e.next=6;break}return e.next=4,Pr(100);case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(this.pluginsMap.values()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,this.removePlugin(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:null==(t=this.outputTrack)||t.stop();case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})))}},{key:"initElementsAndStream",value:function(e){this.inputCanvas||(this.inputCanvas=document.createElement("canvas")),this.outputCanvas=document.createElement("canvas"),this.inputVideo||(this.inputVideo=document.createElement("video")),this.inputCanvas.getContext("2d"),this.outputCanvas.getContext(e||yi["2D"]);var t=this.outputCanvas.captureStream();this.outputTrack=t.getVideoTracks()[0]}},{key:"startPluginsLoop",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pluginsLoopRunning){t.next=11;break}return this.initElementsAndStream(e),this.pluginsLoopRunning=!0,t.prev=2,t.next=5,this.hmsTrack.setProcessedTrack(this.outputTrack);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),this.pluginsLoopRunning=!1,dn.e(Ti,"error in setting processed track",t.t0),t.t0;case 10:this.pluginsLoop().then((function(){dn.d(Ti,"processLoop stopped")}));case 11:case"end":return t.stop()}}),t,this,[[2,7]])})))}},{key:"stopPluginsLoop",value:function(){return rn(this,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pluginsLoopRunning=!1,e.next=3,this.hmsTrack.setProcessedTrack(void 0);case 3:this.resetCanvases(),null==(t=this.outputTrack)||t.stop(),this.inputVideo&&(this.inputVideo.srcObject=null,this.inputVideo=void 0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"pluginsLoop",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pluginsLoopRunning){e.next=27;break}if(t=this.hmsTrack.getMediaTrackSettings().frameRate||24,n=Math.floor(1e3/t),this.hmsTrack.enabled&&"ended"!==this.hmsTrack.nativeTrack.readyState){e.next=8;break}return"running"===this.pluginsLoopState&&this.resetCanvases(),this.pluginsLoopState="paused",e.next=7,Pr(n);case 7:return e.abrupt("continue",25);case 8:return r=0,e.prev=9,e.next=12,this.analytics.preProcessWithTime((function(){return rn(a,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doPreProcessing();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 12:return i=Date.now(),e.next=15,this.processFramesThroughPlugins();case 15:(r=Math.floor(Date.now()-i))>n&&(r=n),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),dn.e(Ti,"error in plugins loop",e.t0);case 22:return this.pluginsLoopState="running",e.next=25,Pr(n-r);case 25:e.next=0;break;case 27:case"end":return e.stop()}}),e,this,[[9,19]])})))}},{key:"doPreProcessing",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.addTrackToVideo();case 2:return e.next=4,this.updateInputCanvas();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"processFramesThroughPlugins",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.canvases[0]=this.inputCanvas,t=0,n=g(this.pluginsMap.values()),e.prev=3,i=f().mark((function e(){var n,i,o,s,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.value,i=n.getName(),!n){e.next=39;break}if(e.prev=3,o=a.checkIfSkipRequired(i),n.getPluginType()!==gi.TRANSFORM){e.next=27;break}if(s=function(e,t){return rn(a,null,f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.processVideoFrame(e,t,o);case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),dn.e(Ti,"error in processing plugin ".concat(i),r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))},!o){e.next=17;break}if(t!==a.pluginsMap.size-1){e.next=13;break}return e.next=11,s(a.canvases[t],a.outputCanvas);case 11:e.next=15;break;case 13:return e.next=15,s(a.canvases[t],a.canvases[t+1]);case 15:e.next=25;break;case 17:if(c=a.canvases[t],u=a.canvases[t+1],t!==a.pluginsMap.size-1){e.next=23;break}return e.next=21,a.analytics.processWithTime(i,(function(){return rn(a,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(c,this.outputCanvas));case 1:case"end":return e.stop()}}),e,this)})))}));case 21:e.next=25;break;case 23:return e.next=25,a.analytics.processWithTime(i,(function(){return rn(a,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(c,u));case 1:case"end":return e.stop()}}),e)})))}));case 25:e.next=31;break;case 27:if(e.t0=n.getPluginType()===gi.ANALYZE&&!o,!e.t0){e.next=31;break}return e.next=31,a.analytics.processWithTime(i,(function(){return rn(a,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.processVideoFrame(this.inputCanvas);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 31:e.next=38;break;case 33:return e.prev=33,e.t1=e.catch(3),dn.e(Ti,"error in processing plugin ".concat(i),e.t1),e.next=38,a.removePlugin(n);case 38:t++;case 39:case"end":return e.stop()}}),e,null,[[3,33]])})),n.s();case 6:if((r=n.n()).done){e.next=10;break}return e.delegateYield(i(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),n.e(e.t1);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[3,12,15,18]])})))}},{key:"addTrackToVideo",value:function(){return rn(this,null,f().mark((function e(){var t,n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inputVideo){e.next=2;break}return e.abrupt("return");case 2:null!==(n=this.inputVideo.srcObject)&&n instanceof MediaStream&&(null==(t=n.getVideoTracks()[0])?void 0:t.id)===this.hmsTrack.nativeTrack.id||(this.inputVideo.pause(),this.inputVideo.srcObject=new MediaStream([this.hmsTrack.nativeTrack]),this.inputVideo.muted=!0,this.inputVideo.playsInline=!0,this.inputVideo&&(this.inputVideo.oncanplaythrough=function(){var e;null==(e=r.inputVideo)||e.play()}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateInputCanvas",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inputCanvas&&this.inputVideo){e.next=2;break}return e.abrupt("return");case 2:t=this.hmsTrack.getMediaTrackSettings(),n=t.width,r=void 0===n?320:n,i=t.height,a=void 0===i?240:i,this.inputCanvas.height!==a&&(this.inputCanvas.height=a),this.inputCanvas.width!==r&&(this.inputCanvas.width=r),this.inputCanvas.getContext("2d").drawImage(this.inputVideo,0,0,r,a);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resetCanvases",value:function(){if(this.outputCanvas&&this.inputCanvas){var e=this.inputCanvas.getContext("2d");e&&(e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,this.outputCanvas.width,this.outputCanvas.height)),this.canvases=[]}}},{key:"checkIfSkipRequired",value:function(e){var t=!1;return this.pluginNumFramesSkipped[e]<this.pluginNumFramesToSkip[e]?(this.pluginNumFramesSkipped[e]++,t=!0):(t=!1,this.pluginNumFramesSkipped[e]=0),t}}]),e}(),xi="HMSLocalStream",Ci=function(e){Ee(n,e);var t=Pe(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).connection=null,e}return m(n,[{key:"setConnection",value:function(e){this.connection=e}},{key:"addTransceiver",value:function(e,t){var n=[];if(e instanceof Fi)if(t.length>0)dn.v(xi,"Simulcast enabled with layers",t),n.push.apply(n,h(t));else{var r={active:this.nativeStream.active};e.settings.maxBitrate&&!gr&&(r.maxBitrate=e.settings.maxBitrate),n.push(r)}var i=this.connection.addTransceiver(e.nativeTrack,{streams:[this.nativeStream],direction:"sendonly",sendEncodings:n});return this.setPreferredCodec(i,e.nativeTrack.kind),i}},{key:"setMaxBitrate",value:function(e,t){return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==(r=this.connection)?void 0:r.setMaxBitrate(e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"setPreferredCodec",value:function(e,t){}},{key:"replaceTrack",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.replaceSenderTrack(e,t);case 2:e.stop(),this.replaceStreamTrack(e,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"replaceStreamTrack",value:function(e,t){this.nativeStream.addTrack(t),this.nativeStream.removeTrack(e)}},{key:"replaceSenderTrack",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(i=null==(r=this.connection)?void 0:r.getSenders().find((function(t){return t.track&&t.track.id===e.id})))){n.next=4;break}return dn.w(xi,"No sender found for trackId=".concat(e.id)),n.abrupt("return");case 4:return n.next=6,i.replaceTrack(t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"removeSender",value:function(e){var t=this,n=0;this.connection.getSenders().forEach((function(r){var i,a;if((null==(i=r.track)?void 0:i.id)===e.trackId||(null==(a=r.track)?void 0:a.id)===e.getTrackIDBeingSent()){t.connection.removeTrack(r),n+=1;var o=t.tracks.indexOf(e);-1!==o?t.tracks.splice(o,1):dn.e(xi,"Cannot find ".concat(e.trackId," in locally stored tracks"))}})),1!==n&&dn.e(xi,"Removed ".concat(n," sender's, expected to remove 1"))}},{key:"trackUpdate",value:function(e){var t;null==(t=this.connection)||t.trackUpdate(e)}}]),n}(rr),Pi=function(){function e(){p(this,e)}return m(e,null,[{key:"connect",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,a=arguments.length>4?arguments[4]:void 0,o=this.eventNameFor("connect",void 0===e),s=e?oi.ERROR:oi.INFO,c=this.getPropertiesWithError(tn(en({},t),(l(n={},this.KEY_REQUESTED_AT,null==r?void 0:r.getTime()),l(n,this.KEY_RESPONDED_AT,null==i?void 0:i.getTime()),l(n,"endpoint",a),n)),e);return new ci({name:o,level:s,properties:c})}},{key:"disconnect",value:function(e,t){var n=e?oi.ERROR:oi.INFO,r=this.getPropertiesWithError(t,e);return new ci({name:"disconnected",level:n,properties:r})}},{key:"preview",value:function(e){var t=e,n=t.error,r=nn(t,["error"]),i=this.eventNameFor("preview",void 0===n),a=n?oi.ERROR:oi.INFO,o=this.getPropertiesWithError(r,n);return new ci({name:i,level:a,properties:o})}},{key:"join",value:function(e){var t=e,n=t.error,r=nn(t,["error"]),i=this.eventNameFor("join",void 0===n),a=n?oi.ERROR:oi.INFO,o=this.getPropertiesWithError(tn(en({},r),{is_preview_called:!!r.is_preview_called}),n);return new ci({name:i,level:a,properties:o})}},{key:"publish",value:function(e){var t=e.devices,n=e.settings,r=e.error,i=this.eventNameFor("publish",void 0===r),a=r?oi.ERROR:oi.INFO,o=this.getPropertiesWithError({devices:t,audio:null==n?void 0:n.audio,video:null==n?void 0:n.video},r);return new ci({name:i,level:a,properties:o})}},{key:"subscribeFail",value:function(e){var t=this.eventNameFor("subscribe",!1),n=oi.ERROR,r=this.getErrorProperties(e);return new ci({name:t,level:n,properties:r})}},{key:"leave",value:function(){return new ci({name:"leave",level:oi.INFO})}},{key:"autoplayError",value:function(){return new ci({name:"autoplayError",level:oi.ERROR})}},{key:"deviceChange",value:function(e){var t=e.selection,n=e.type,r=e.devices,i=e.error,a=this.eventNameFor(i?"publish":"device.".concat(n),void 0===i),o=i?oi.ERROR:oi.INFO,s=this.getPropertiesWithError({selection:t,devices:r},i);return new ci({name:a,level:o,properties:s})}},{key:"performance",value:function(e){var t=oi.INFO,n=e.toAnalyticsProperties();return new ci({name:"perf.stats",level:t,properties:n})}},{key:"rtcStats",value:function(e){var t=oi.INFO,n=e.toAnalyticsProperties();return new ci({name:"rtc.stats",level:t,properties:n})}},{key:"degradationStats",value:function(e,t){var n=oi.INFO,r={degradedAt:e.degradedAt,trackId:e.trackId};if(!t&&e.degradedAt instanceof Date){var i=new Date,a=i.valueOf()-e.degradedAt.valueOf();r=tn(en({},r),{duration:a,restoredAt:i})}return new ci({name:"video.degradation.stats",level:n,properties:r})}},{key:"audioDetectionFail",value:function(e,t){var n=this.getPropertiesWithError({device:t},e),r=oi.ERROR;return new ci({name:"audiopresence.failed",level:r,properties:n})}},{key:"previewNetworkQuality",value:function(e){return new ci({name:"perf.networkquality.preview",level:e.error?oi.ERROR:oi.INFO,properties:e})}},{key:"eventNameFor",value:function(e,t){return"".concat(e,".").concat(t?"success":"failed")}},{key:"getPropertiesWithError",value:function(e,t){var n=this.getErrorProperties(t);return e=en(en({},n),e)}},{key:"getErrorProperties",value:function(e){return e?e instanceof kn?e.toAnalyticsProperties():{error_name:e.name,error_message:e.message}:{}}}]),e}();Pi.KEY_REQUESTED_AT="requested_at",Pi.KEY_RESPONDED_AT="responded_at";var Ri,_i={audioContext:null,getAudioContext:function(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext},resumeContext:function(){this.getAudioContext().resume().catch((function(e){dn.e("AudioContext",e)}))}};!function(e){e.INIT="init_response_time",e.WEBSOCKET_CONNECT="ws_connect_time",e.ON_POLICY_CHANGE="on_policy_change_time",e.LOCAL_TRACKS="local_tracks_time",e.JOIN="join_time",e.PREVIEW="preview_time"}(Ri||(Ri={}));var Ai,Ii=function(){function e(){p(this,e),this.eventPerformanceMeasures={}}return m(e,[{key:"start",value:function(e){performance.mark(e)}},{key:"end",value:function(e){var t;try{this.eventPerformanceMeasures[e]=performance.measure(e,e),dn.d("[HMSPerformanceTiming]",e,null==(t=this.eventPerformanceMeasures[e])?void 0:t.duration)}catch(n){dn.w("[AnalyticsTimer]","Error in measuring performance for event ".concat(e),{error:n})}}},{key:"getTimeTaken",value:function(e){var t;return null==(t=this.eventPerformanceMeasures[e])?void 0:t.duration}},{key:"getTimes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return tn(en({},t),l({},n,e.getTimeTaken(n)))}),{})}},{key:"cleanUp",value:function(){this.eventPerformanceMeasures={}}}]),e}(),Oi="default",Ni="default",Di=function(){function e(t,n,r,i,a){p(this,e),this.store=t,this.observer=n,this.deviceManager=r,this.eventBus=i,this.analyticsTimer=a,this.TAG="[LocalTrackManager]"}return m(e,[{key:"getTracksToPublish",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a,o,s,c,u,l,d,h;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getTrackSettings(e)){t.next=3;break}return t.abrupt("return",[]);case 3:return r=!!n.audio,i=!!n.video,a=[],t.next=8,this.updateCurrentLocalTrackSettings(n);case 8:if(o=t.sent,s=o.videoTrack,c=o.audioTrack,u=(null==s?void 0:s.stream)||(null==c?void 0:c.stream),l=Boolean(s&&this.store.getTrackById(s.trackId)),d=Boolean(c&&this.store.getTrackById(c.trackId)),!l||!d){t.next=16;break}return t.abrupt("return",[]);case 16:return h={audio:r&&!c&&(!e.isAudioMuted||"empty"),video:i&&!s&&(!e.isVideoMuted||"empty")},this.analyticsTimer.start(Ri.LOCAL_TRACKS),t.prev=18,dn.d(this.TAG,"Init Local Tracks",{fetchTrackOptions:h}),t.next=22,this.getLocalTracks(h,n,u);case 22:a=t.sent,t.next=30;break;case 25:return t.prev=25,t.t0=t.catch(18),t.next=29,this.retryGetLocalTracks(t.t0,n,h,u);case 29:a=t.sent;case 30:return t.abrupt("return",(this.analyticsTimer.end(Ri.LOCAL_TRACKS),s&&i&&!l&&a.push(s),c&&r&&!d&&a.push(c),a));case 31:case"end":return t.stop()}}),t,this,[[18,25]])})))}},{key:"getLocalTracks",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{audio:!0,video:!0},n=a.length>1?a[1]:void 0,r=a.length>2?a[2]:void 0,e.prev=3,e.next=6,this.getNativeLocalTracks(t,n);case 6:return i=e.sent,e.abrupt("return",this.createHMSLocalTracks(i,n,r));case 10:throw e.prev=10,e.t0=e.catch(3),e.t0 instanceof kn&&this.eventBus.analytics.publish(Pi.publish({devices:this.deviceManager.getDevices(),error:e.t0,settings:n})),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,10]])})))}},{key:"getNativeLocalTracks",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{audio:!1,video:!1},n=a.length>1?a[1]:void 0,r=new Lr(!0===t.video?n.video:null,!0===t.audio?n.audio:null,n.simulcast),i=[],e.t0=r.audio||r.video,!e.t0){e.next=13;break}return e.t1=i.push,e.t2=i,e.t3=h,e.next=10,this.getAVTracks(r);case 10:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 13:return i.push.apply(i,h(this.getEmptyTracks(t))),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"getLocalScreen",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o,s,c,u,l,d;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={video:e.toConstraints()},t&&(delete(i=t.toConstraints()).advanced,r.audio=tn(en({},i),{autoGainControl:!1,noiseSuppression:!1,googAutoGainControl:!1,echoCancellation:!1})),n.prev=2,n.next=5,navigator.mediaDevices.getDisplayMedia(r);case 5:a=n.sent,n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(2),$r(n.t0,Vr.SCREEN);case 11:return o=[],s=new Ci(a),c=a.getVideoTracks()[0],u=new Fi(s,c,"screen",this.eventBus,e),o.push(u),(l=a.getAudioTracks()[0])&&(d=new ki(s,l,"screen",this.eventBus,t),o.push(d)),n.abrupt("return",(dn.v(this.TAG,"getLocalScreen",o),o));case 16:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"requestPermissions",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 3:e.sent.getTracks().forEach((function(e){return e.stop()})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),dn.e(this.TAG,e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"getAVTracks",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!!e.audio&&e.audio.toConstraints(),video:!!e.video&&e.video.toConstraints()});case 3:return n=t.sent,t.abrupt("return",n.getVideoTracks().concat(n.getAudioTracks()));case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,this.deviceManager.init();case 11:throw r=!(this.deviceManager.hasWebcamPermission||!e.video),i=!(this.deviceManager.hasMicrophonePermission||!e.audio),a=this.getErrorType(r,i),$r(t.t0,a);case 13:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getTrackSettings",value:function(e){var t=this.getAudioSettings(e),n=this.getVideoSettings(e);if(!t&&!n)return null;var r=this.getScreenSettings();return(new Dr).video(n).audio(t).screen(r).build()}},{key:"retryGetLocalTracks",value:function(e,t,n,r){return rn(this,null,f().mark((function i(){var a,o,s,c,u,l,d;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e instanceof kn&&e.action===gn.TRACK)){i.next=37;break}if(this.observer.onFailure(e),a=e.code===yn.TracksErrors.OVER_CONSTRAINED,o=e.message.includes("audio"),s=e.message.includes("video"),!a){i.next=19;break}return c=(new Dr).video(new Nr).audio(new Ir).build(),dn.w(this.TAG,"Fetch AV Tracks failed with overconstrained error",{fetchTrackOptions:n},{error:e}),i.prev=6,i.next=9,this.getLocalTracks(n,c,r);case 9:case 18:case 23:case 34:return i.abrupt("return",i.sent);case 12:return i.prev=12,i.t0=i.catch(6),u=i.t0 instanceof kn?i.t0.nativeError:i.t0,l=i.t0,"OverconstrainedError"===(null==u?void 0:u.name)&&((d=Sn.GenericTrack(gn.TRACK,"Overconstrained error after dropping all constraints")).addNativeError(u),l=d),i.next=18,this.retryGetLocalTracks(l,t,n,r);case 19:return n.audio=o?"empty":n.audio,n.video=s?"empty":n.video,dn.w(this.TAG,"Fetch AV Tracks failed",{fetchTrackOptions:n},e),i.prev=20,i.next=23,this.getLocalTracks(n,t,r);case 26:return i.prev=26,i.t1=i.catch(20),dn.w(this.TAG,"Fetch empty tacks failed",i.t1),n.audio=n.audio&&"empty",n.video=n.video&&"empty",this.observer.onFailure(i.t1),i.next=34,this.getLocalTracks(n,t,r);case 35:i.next=38;break;case 37:return i.abrupt("return",(dn.w(this.TAG,"Fetch AV Tracks failed - unknown exception",e),this.observer.onFailure(e),[]));case 38:case"end":return i.stop()}}),i,this,[[6,12],[20,26]])})))}},{key:"getErrorType",value:function(e,t){return e&&t?Vr.AV:e?Vr.VIDEO:t?Vr.AUDIO:Vr.UNKNOWN}},{key:"getEmptyTracks",value:function(t){var n=[];return"empty"===t.audio&&n.push(e.getEmptyAudioTrack()),"empty"===t.video&&n.push(e.getEmptyVideoTrack()),n}},{key:"updateCurrentLocalTrackSettings",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getLocalPeerTracks(),r=n.find((function(e){return e.type===Dn.VIDEO&&"regular"===e.source})),i=n.find((function(e){return e.type===Dn.AUDIO&&"regular"===e.source})),a=n.find((function(e){return e.type===Dn.VIDEO&&"screen"===e.source})),t.t0=null==e?void 0:e.video,!t.t0){t.next=5;break}return t.next=5,null==r?void 0:r.setSettings(e.video);case 5:if(t.t1=null==e?void 0:e.audio,!t.t1){t.next=9;break}return t.next=9,null==i?void 0:i.setSettings(e.audio);case 9:if(t.t2=null==e?void 0:e.screen,!t.t2){t.next=13;break}return t.next=13,null==a?void 0:a.setSettings(e.screen);case 13:return t.abrupt("return",{videoTrack:r,audioTrack:i});case 14:case"end":return t.stop()}}),t,this)})))}},{key:"getAudioSettings",value:function(e){var t,n=this.store.getPublishParams();if(!n||!(null==(t=n.allowed)?void 0:t.includes("audio")))return null;var r=this.store.getLocalPeer(),i=null==r?void 0:r.audioTrack,a=(null==i?void 0:i.settings.deviceId)||e.audioInputDeviceId;return(new Ar).codec(n.audio.codec).maxBitrate(n.audio.bitRate).deviceId(a||Oi).build()}},{key:"getVideoSettings",value:function(e){var t,n=this.store.getPublishParams();if(!n||!(null==(t=n.allowed)?void 0:t.includes("video")))return null;var r=this.store.getLocalPeer(),i=null==r?void 0:r.videoTrack,a=(null==i?void 0:i.settings.deviceId)||e.videoDeviceId,o=n.video,s=this.store.getSimulcastDimensions("regular")||{},c=s.width,u=void 0===c?o.width:c,l=s.height,d=void 0===l?o.height:l;return(new Or).codec(o.codec).maxBitrate(o.bitRate).maxFramerate(o.frameRate).setWidth(u).setHeight(d).deviceId(a||Ni).build()}},{key:"getScreenSettings",value:function(){var e,t=this.store.getPublishParams();if(!t||!(null==(e=t.allowed)?void 0:e.includes("screen")))return null;var n=t.screen,r=this.store.getSimulcastDimensions("screen")||{},i=r.width,a=void 0===i?n.width:i,o=r.height,s=void 0===o?n.height:o;return(new Or).maxBitrate(n.bitRate,!1).codec(n.codec).maxFramerate(n.frameRate).setWidth(a).setHeight(s).build()}},{key:"createHMSLocalTracks",value:function(e,t,n){var r=e.find((function(e){return"video"===e.kind})),i=e.find((function(e){return"audio"===e.kind}));n?e.forEach((function(e){return null==n?void 0:n.nativeStream.addTrack(e)})):n=new Ci(new MediaStream(e));var a=[];if(i&&(null==t?void 0:t.audio)){var o=new ki(n,i,"regular",this.eventBus,t.audio);a.push(o)}if(r&&(null==t?void 0:t.video)){var s=new Fi(n,r,"regular",this.eventBus,t.video);a.push(s)}return a}}],[{key:"getEmptyVideoTrack",value:function(e){var t,n,r,i=(null==(t=null==e?void 0:e.getSettings())?void 0:t.width)||320,a=(null==(n=null==e?void 0:e.getSettings())?void 0:n.height)||240;Ai||(null==(r=(Ai=Object.assign(document.createElement("canvas"),{width:i,height:a})).getContext("2d"))||r.fillRect(0,0,i,a));var o=Ai.captureStream(10).getVideoTracks()[0],s=setInterval((function(){if("ended"!==o.readyState){var e=Ai.getContext("2d");if(e){var t=0===e.getImageData(0,0,1,1).data[0]?1:0;e.fillStyle="rgb(".concat(t,", 0, 0)"),e.fillRect(0,0,1,1)}}else clearInterval(s)}),100);return o.onended=function(){clearInterval(s)},o.enabled=!1,o}},{key:"getEmptyAudioTrack",value:function(){var e=_i.getAudioContext(),t=e.createOscillator(),n=e.createMediaStreamDestination();t.connect(n),t.start();var r=n.stream.getAudioTracks()[0];return r.enabled=!1,r}}]),e}();function Li(e,t){return function(n){return n in e&&e[n]!==t[n]}}var Mi,Fi=function(e){Ee(n,e);var t=Pe(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(new Or).build();return p(this,n),(o=t.call(this,e,r,i)).eventBus=a,o.buildNewSettings=function(e){var t=en(en({},o.settings),e),n=t.width,r=t.height,i=t.codec,a=t.maxFramerate,s=t.maxBitrate,c=t.deviceId,u=t.advanced;return new Nr(n,r,i,a,c,u,s)},o.handleSettingsChange=function(e){return rn(Se(o),null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.stream,r=Li(e,this.settings),t.t0=r("maxBitrate")&&e.maxBitrate,!t.t0){t.next=5;break}return t.next=5,n.setMaxBitrate(e.maxBitrate,this);case 5:if(t.t1=r("width")||r("height")||r("advanced"),!t.t1){t.next=9;break}return t.next=9,this.nativeTrack.applyConstraints(e.toConstraints());case 9:case"end":return t.stop()}}),t,this)})))},o.handleDeviceChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return rn(Se(o),null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Li(e,this.settings)("deviceId")||"regular"!==this.source){n.next=9;break}if(!this.enabled){n.next=8;break}return n.next=4,this.replaceTrackWith(e);case 4:return r=n.sent,n.next=7,this.replaceSender(r,this.enabled);case 7:this.nativeTrack=r;case 8:t||vi.updateSelection("videoInput",{deviceId:e.deviceId,groupId:this.nativeTrack.getSettings().groupId});case 9:case"end":return n.stop()}}),n,this)})))},e.tracks.push(Se(o)),o.settings=s,"default"===s.deviceId&&r.enabled&&(o.settings=o.buildNewSettings({deviceId:r.getSettings().deviceId})),o.pluginsManager=new Ei(Se(o),a),o.setFirstTrackId(o.trackId),o}return m(n,[{key:"setEnabled",value:function(e){var t=this,r=function(e){return we(ke(n.prototype),e,t)};return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===this.enabled){t.next=23;break}if("regular"!==this.source){t.next=19;break}if(!e){t.next=8;break}return t.next=5,this.replaceTrackWith(this.settings);case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,this.replaceTrackWithBlank();case 10:n=t.sent;case 11:return t.next=13,this.replaceSender(n,e);case 13:if(this.nativeTrack=n,t.t0=e,!t.t0){t.next=19;break}return t.next=18,this.pluginsManager.waitForRestart();case 18:this.settings=this.buildNewSettings({deviceId:n.getSettings().deviceId});case 19:return t.next=21,r("setEnabled").call(this,e);case 21:this.eventBus.localVideoEnabled.publish({enabled:e,track:this}),this.stream.trackUpdate(this);case 23:case"end":return t.stop()}}),t,this)})))}},{key:"isPublishedTrackId",value:function(e){return this.publishedTrackId===e}},{key:"addSink",value:function(e){this.addSinkInternal(e,this.processedTrack||this.nativeTrack)}},{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.buildNewSettings(e),n.next=3,this.handleDeviceChange(r,t);case 3:if(this.enabled){n.next=6;break}return this.settings=r,n.abrupt("return");case 6:return n.next=8,this.handleSettingsChange(r);case 8:this.settings=r;case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getPlugins",value:function(){return this.pluginsManager.getPlugins()}},{key:"addPlugin",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.pluginsManager.addPlugin(e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"removePlugin",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pluginsManager.removePlugin(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validatePlugin",value:function(e){return this.pluginsManager.validatePlugin(e)}},{key:"cleanup",value:function(){var e=this,t=function(t){return we(ke(n.prototype),t,e)};return rn(this,null,f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("cleanup").call(this),e.next=3,this.pluginsManager.cleanup();case 3:null==(n=this.processedTrack)||n.stop();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"setProcessedTrack",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nativeTrack.enabled){t.next=3;break}return this.processedTrack=e,t.abrupt("return");case 3:if(e){t.next=10;break}if(t.t0=this.processedTrack,!t.t0){t.next=8;break}return t.next=8,this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack);case 8:return this.processedTrack=void 0,t.abrupt("return");case 10:if(t.t1=e!==this.processedTrack,!t.t1){t.next=20;break}if(!this.processedTrack){t.next=17;break}return t.next=15,this.stream.replaceSenderTrack(this.processedTrack,e);case 15:t.next=19;break;case 17:return t.next=19,this.stream.replaceSenderTrack(this.nativeTrack,e);case 19:this.processedTrack=e;case 20:case"end":return t.stop()}}),t,this)})))}},{key:"getTrackIDBeingSent",value:function(){return this.getTrackBeingSent().id}},{key:"getTrackBeingSent",value:function(){return this.enabled&&this.processedTrack||this.nativeTrack}},{key:"replaceTrackWith",value:function(e){return rn(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=this.nativeTrack)||n.stop(),t.next=4,Zr(e);case 4:return r=t.sent,t.abrupt("return",("default"===this.settings.deviceId&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),r));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"replaceTrackWithBlank",value:function(){return rn(this,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.nativeTrack,e.abrupt("return",(null==t||t.stop(),Di.getEmptyVideoTrack(t)));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"replaceSender",value:function(e,t){return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.stream,!t){n.next=6;break}return n.next=4,r.replaceSenderTrack(this.nativeTrack,this.processedTrack||e);case 4:n.next=8;break;case 6:return n.next=8,r.replaceSenderTrack(this.processedTrack||this.nativeTrack,e);case 8:return n.next=10,r.replaceStreamTrack(this.nativeTrack,e);case 10:case"end":return n.stop()}}),n,this)})))}}]),n}(lr),Ui=function(){function e(t,n,r){var i=this;p(this,e),this.store=t,this.eventBus=n,this.listener=r,this.tracksToProcess=new Map,this.handleTrackAdd=function(e){dn.d(i.TAG,"ONTRACKADD",e,e.nativeTrack),i.store.addTrack(e),i.tracksToProcess.set(e.trackId,e),i.processPendingTracks()},this.handleTrackRemove=function(e){var t;dn.d(i.TAG,"ONTRACKREMOVE",e,e.nativeTrack);var n=i.store.getTrackState(e.trackId);if(n){e.type===Dn.AUDIO&&i.eventBus.audioTrackRemoved.publish(e);var r=i.store.getPeerById(n.peerId);!r||(i.removePeerTracks(r,e),i.store.removeTrack(e.trackId),null==(t=i.listener)||t.onTrackUpdate(sn.TRACK_REMOVED,e,r))}},this.handleTrackLayerUpdate=function(e){var t,n;for(var r in e.tracks){var a=e.tracks[r],o=i.store.getTrackById(r);if(o){var s=i.store.getPeerByTrackId(r);if(s&&o instanceof dr){var c=i.isTrackDegraded(a.expected_layer,a.current_layer);o.setLayerFromServer(a.current_layer,c),c?null==(t=i.listener)||t.onTrackUpdate(sn.TRACK_DEGRADED,o,s):null==(n=i.listener)||n.onTrackUpdate(sn.TRACK_RESTORED,o,s)}}}},this.handleTrackUpdate=function(e){var t,n,r=i.store.getPeerById(e.peer.peer_id);if(r)for(var a in e.tracks){var o=Object.assign({},null==(t=i.store.getTrackState(a))?void 0:t.trackInfo),s=e.tracks[a],c=i.store.getTrackById(a);if(i.store.setTrackState({peerId:e.peer.peer_id,trackInfo:en(en({},o),s)}),!c||i.tracksToProcess.has(a))i.processPendingTracks();else{c.setEnabled(!s.mute);var u=i.processTrackUpdate(c,o,s);u&&(null==(n=i.listener)||n.onTrackUpdate(u,c,r))}}}}return m(e,[{key:"TAG",get:function(){return"[".concat(this.constructor.name,"]")}},{key:"isTrackDegraded",value:function(e,t){var n=function(e){switch(e){case un.HIGH:return 3;case un.MEDIUM:return 2;case un.LOW:return 1;case un.NONE:return 0}};return n(t)<n(e)}},{key:"handleTrackMetadataAdd",value:function(e){for(var t in dn.d(this.TAG,"TRACK_METADATA_ADD",e),e.tracks)this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:e.tracks[t]});this.processPendingTracks()}},{key:"processPendingTracks",value:function(){var e=this;new Map(this.tracksToProcess).forEach((function(t){var n,r=e.store.getTrackState(t.trackId);if(r){var i=e.store.getPeerById(r.peerId);!i||(t.source=r.trackInfo.source,t.peerId=i.peerId,t.logIdentifier=i.name,t.setEnabled(!r.trackInfo.mute),e.addAudioTrack(i,t),e.addVideoTrack(i,t),t.type===Dn.AUDIO?e.eventBus.audioTrackAdded.publish({track:t,peer:i}):null==(n=e.listener)||n.onTrackUpdate(sn.TRACK_ADDED,t,i),e.tracksToProcess.delete(t.trackId))}}))}},{key:"removePeerTracks",value:function(e,t){var n,r,i=e.auxiliaryTracks.indexOf(t);i>-1?e.auxiliaryTracks.splice(i,1):t.type===Dn.AUDIO&&(null==(n=e.audioTrack)?void 0:n.trackId)===t.trackId?e.audioTrack=void 0:t.type===Dn.VIDEO&&(null==(r=e.videoTrack)?void 0:r.trackId)===t.trackId&&(e.videoTrack=void 0)}},{key:"addAudioTrack",value:function(e,t){t.type===Dn.AUDIO&&(e.audioTrack||"regular"!==t.source?e.auxiliaryTracks.push(t):e.audioTrack=t)}},{key:"addVideoTrack",value:function(e,t){if(t.type===Dn.VIDEO){var n=t,r=this.store.getSimulcastDefinitionsForPeer(e,n.source);n.setSimulcastDefinitons(r),e.videoTrack||"regular"!==t.source?e.auxiliaryTracks.push(n):e.videoTrack=n}}},{key:"processTrackUpdate",value:function(e,t,n){var r;return e.setEnabled(!n.mute),t.mute!==n.mute?(r=n.mute?sn.TRACK_MUTED:sn.TRACK_UNMUTED,e.type===Dn.AUDIO&&this.eventBus.audioTrackUpdate.publish({track:e,enabled:!n.mute})):t.description!==n.description&&(r=sn.TRACK_DESCRIPTION_CHANGED),r}}]),e}(),ji=function(){function e(t){p(this,e),this.listener=t}return m(e,[{key:"handleQualityUpdate",value:function(e){var t,n=e.peers.map((function(e){return{peerID:e.peer_id,downlinkQuality:e.downlink_score}}));null==(t=this.listener)||t.onConnectionQualityUpdate(n)}}]),e}(),Vi=function(){function e(t,n,r,i,a){var o=this;p(this,e),this.store=t,this.listener=r,this.audioListener=i,this.connectionQualityListener=a,this.TAG="[HMSNotificationManager]",this.hasConsistentRoomStateArrived=!1,this.ignoreNotification=function(e){if(e===Rr.PEER_LIST)o.hasConsistentRoomStateArrived=!0;else if(e===Rr.ROOM_STATE)return o.hasConsistentRoomStateArrived;return!1},this.handleTrackAdd=function(e){o.trackManager.handleTrackAdd(e)},this.handleTrackRemove=function(e){o.trackManager.handleTrackRemove(e)},this.updateLocalPeer=function(e){var t=e.name,n=e.metadata,r=o.store.getLocalPeer();o.peerManager.handlePeerInfoUpdate({peer:r,name:t,data:n})},this.trackManager=new Ui(this.store,n,this.listener),this.peerManager=new Kr(this.store,this.trackManager,this.listener),this.peerListManager=new Hr(this.store,this.peerManager,this.trackManager,this.listener),this.broadcastManager=new Gr(this.store,this.listener),this.policyChangeManager=new qr(this.store,n),this.requestManager=new Qr(this.store,this.listener),this.activeSpeakerManager=new Mr(this.store,this.listener,this.audioListener),this.connectionQualityManager=new ji(this.connectionQualityListener),this.roomUpdateManager=new Jr(this.store,this.listener)}return m(e,[{key:"setListener",value:function(e){this.listener=e,this.trackManager.listener=e,this.peerManager.listener=e,this.peerListManager.listener=e,this.broadcastManager.listener=e,this.requestManager.listener=e,this.activeSpeakerManager.listener=e,this.roomUpdateManager.listener=e}},{key:"setAudioListener",value:function(e){this.audioListener=e,this.activeSpeakerManager.audioListener=e}},{key:"setConnectionQualityListener",value:function(e){this.connectionQualityListener=e,this.connectionQualityManager.listener=e}},{key:"handleNotification",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.method,a=e.params;[Rr.ACTIVE_SPEAKERS,Rr.SFU_STATS,Rr.CONNECTION_QUALITY].includes(i)||dn.d(this.TAG,"Received notification - ".concat(i),{notification:a}),i===Rr.SFU_STATS&&(null==(t=window.HMS)?void 0:t.ON_SFU_STATS)&&"function"==typeof(null==(n=window.HMS)?void 0:n.ON_SFU_STATS)&&window.HMS.ON_SFU_STATS(e.params),!this.ignoreNotification(i)&&(this.roomUpdateManager.handleNotification(i,a),this.peerManager.handleNotification(i,a),this.requestManager.handleNotification(i,a),this.peerListManager.handleNotification(i,a,r),this.broadcastManager.handleNotification(i,a),this.handleIsolatedMethods(i,a))}},{key:"handleIsolatedMethods",value:function(e,t){switch(e){case Rr.TRACK_METADATA_ADD:this.trackManager.handleTrackMetadataAdd(t);break;case Rr.TRACK_UPDATE:this.trackManager.handleTrackUpdate(t);break;case Rr.ON_SFU_TRACK_LAYER_UPDATE:this.trackManager.handleTrackLayerUpdate(t);break;case Rr.ACTIVE_SPEAKERS:this.activeSpeakerManager.handleActiveSpeakers(t);break;case Rr.CONNECTION_QUALITY:this.connectionQualityManager.handleQualityUpdate(t);break;case Rr.POLICY_CHANGE:this.policyChangeManager.handlePolicyChange(t)}}}]),e}(),Bi=m((function e(t){p(this,e),this.type=t.type,this.source=t.source||"regular",this.description="",t instanceof or?(this.mute=!t.enabled,this.track_id=t.publishedTrackId,this.stream_id=t.stream.id):(this.mute=t.mute,this.track_id=t.track_id,this.stream_id=t.stream_id)}));!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Joined="Joined",e.Preview="Preview",e.Failed="Failed",e.Reconnecting="Reconnecting",e.Leaving="Leaving"}(Mi||(Mi={}));var zi,Gi,Hi=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"https://prod-init.100ms.live/init",o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];p(this,e),this.authToken=t,this.peerId=n,this.peerName=r,this.data=i,this.endpoint=a,this.autoSubscribeVideo=o}));!function(e){e.FLAG_SERVER_SUB_DEGRADATION="subscribeDegradation",e.FLAG_SERVER_SIMULCAST="simulcast",e.FLAG_NON_WEBRTC_DISABLE_OFFER="nonWebRTCDisableOffer"}(zi||(zi={})),function(e){e[e.ConnectFailed=0]="ConnectFailed",e[e.SignalDisconnect=1]="SignalDisconnect",e[e.PublishNegotiationFailed=2]="PublishNegotiationFailed",e[e.PublishIceConnectionFailed=3]="PublishIceConnectionFailed",e[e.SubscribeIceConnectionFailed=4]="SubscribeIceConnectionFailed"}(Gi||(Gi={}));var Wi,Ki=(l(Gt={},0,[]),l(Gt,1,[]),l(Gt,2,[1]),l(Gt,3,[1]),l(Gt,4,[1]),Gt),qi=m((function e(t){var n=this;p(this,e),this.promise=new Promise((function(e,r){n.resolve=e,n.reject=r,t(e,r)}))})),Qi="[RetryScheduler]",Ji=function(){function e(t,n){p(this,e),this.onStateChange=t,this.sendEvent=n,this.inProgress=new Map,this.retryTaskIds=[]}return m(e,[{key:"schedule",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i,a,o,s,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,r=t.error,i=t.task,a=t.originalState,o=t.maxFailedRetries,s=void 0===o?5:o,c=t.changeState,u=void 0===c||c,e.next=3,this.scheduleTask({category:n,error:r,changeState:u,task:i,originalState:a,maxFailedRetries:s});case 3:case"end":return e.stop()}}),e,this)})))}},{key:"reset",value:function(){this.retryTaskIds.forEach((function(e){return clearTimeout(e)})),this.retryTaskIds=[],this.inProgress.clear()}},{key:"scheduleTask",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,h,p,v,m,g,y,k,b,w;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.category,r=t.error,i=t.changeState,a=t.task,o=t.originalState,s=t.maxFailedRetries,c=void 0===s?5:s,u=t.failedRetryCount,l=void 0===u?0:u,dn.d(Qi,"schedule: ",{category:Gi[n],error:r}),0!==l){e.next=10;break}if(!(d=this.inProgress.get(n))){e.next=8;break}return dn.d(Qi,"schedule: Already a task for ".concat(Gi[n]," scheduled, waiting for its completion")),e.next=7,d.promise;case 7:return e.abrupt("return");case 8:h=new qi((function(e,t){})),this.inProgress.set(n,h),this.sendEvent(r,n);case 10:p=!1,v=Ki[n],e.t0=f().keys(v);case 12:if((e.t1=e.t0()).done){e.next=31;break}if(m=e.t1.value,g=v[parseInt(m)],e.prev=15,y=this.inProgress.get(g),e.t2=y,!e.t2){e.next=23;break}return dn.d(Qi,"schedule: Suspending retry task of ".concat(Gi[n],", waiting for ").concat(Gi[g]," to recover")),e.next=22,y.promise;case 22:dn.d(Qi,"schedule: Resuming retry task ".concat(Gi[n]," as it's dependency ").concat(Gi[g]," is recovered"));case 23:e.next=29;break;case 25:return e.prev=25,e.t3=e.catch(15),dn.d(Qi,"schedule: Stopping retry task of ".concat(Gi[n]," as it's dependency ").concat(Gi[g]," failed to recover")),p=!0,e.abrupt("break",31);case 29:e.next=12;break;case 31:if(!(l>=c||p)){e.next=38;break}if(r.description+=". [".concat(Gi[n],"] Could not recover after ").concat(l," tries"),p&&(r.description+=" Could not recover all of it's required dependencies - [".concat(v.map((function(e){return Gi[e]})).toString(),"]")),r.isTerminal=!0,this.inProgress.delete(n),this.sendEvent(r,n),this.reset(),!i){e.next=36;break}this.onStateChange(Mi.Failed,r),e.next=37;break;case 36:throw r;case 37:return e.abrupt("return");case 38:return i&&this.onStateChange(Mi.Reconnecting,r),k=this.getDelayForRetryCount(l),dn.i(Qi,"schedule: [".concat(Gi[n],"] [failedRetryCount=").concat(l,"] Scheduling retry task in ").concat(k,"ms")),e.prev=41,e.next=44,this.setTimeoutPromise(a,k);case 44:b=e.sent,e.next=50;break;case 47:e.prev=47,e.t4=e.catch(41),b=!1,dn.w(Qi,"[".concat(Gi[n],"] Un-caught exception ").concat(e.t4.name," in retry-task, initiating retry"),e.t4);case 50:if(!b){e.next=55;break}w=this.inProgress.get(n),this.inProgress.delete(n),null==w||w.resolve(l),i&&0===this.inProgress.size&&this.onStateChange(o),dn.i(Qi,"schedule: [".concat(Gi[n],"] [failedRetryCount=").concat(l,"] Recovered \u267b\ufe0f")),e.next=57;break;case 55:return e.next=57,this.scheduleTask({category:n,error:r,changeState:i,task:a,originalState:o,maxFailedRetries:c,failedRetryCount:l+1});case 57:case"end":return e.stop()}}),e,this,[[15,25],[41,47]])})))}},{key:"getDelayForRetryCount",value:function(e){var t=Math.pow(2,e),n=Math.random();return Math.round(1e3*Math.min(t+n,60))}},{key:"setTimeoutPromise",value:function(e,t){return rn(this,null,f().mark((function n(){var r=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,i){var a=window.setTimeout((function(){return rn(r,null,f().mark((function t(){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:(r=t.sent)&&this.retryTaskIds.splice(this.retryTaskIds.indexOf(a),1),n(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}),t);r.retryTaskIds.push(a)})));case 1:case"end":return n.stop()}}),n)})))}}]),e}();!function(e){e.PROD="prod",e.QA="qa",e.DEV="dev"}(Wi||(Wi={}));var Yi=function(){function e(){p(this,e),this.TAG="[HTTPAnalyticsTransport]",this.failedEvents=new pr("client-events"),this.isConnected=!0,this.env=null}return m(e,[{key:"setEnv",value:function(e){this.env=e,this.flushFailedEvents()}},{key:"sendEvent",value:function(e){var t=this;if(this.env){var n={event:e.name,payload:e.properties,event_id:String(e.timestamp),peer:e.metadata.peer,timestamp:e.timestamp,agent:br,device_id:e.device_id},r=this.env===Wi.PROD?"https://event.100ms.live/v2/client/report":"https://event-nonprod.100ms.live/v2/client/report";fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.metadata.token)},body:JSON.stringify(n)}).then((function(n){if(401!==n.status){if(200!==n.status)throw Error(n.statusText);t.removeFromStorage(e)}else t.removeFromStorage(e)})).catch((function(n){dn.v(t.TAG,"Failed to send event",n,e),t.addEventToStorage(e)}))}else this.addEventToStorage(e)}},{key:"flushFailedEvents",value:function(){var e=this,t=this.failedEvents.get();null==t||t.forEach((function(t){return e.sendEvent(t)}))}},{key:"addEventToStorage",value:function(e){var t=this.failedEvents.get()||[];t.find((function(t){return t.timestamp===e.timestamp}))||(100===t.length&&t.shift(),t.push(e),this.failedEvents.set(t))}},{key:"removeFromStorage",value:function(e){var t=this.failedEvents.get()||[],n=t.findIndex((function(t){return t.timestamp===e.timestamp}));n>-1&&(t.splice(n,1),this.failedEvents.set(t))}}]),e}(),$i=new Yi,Xi=function(){function e(){p(this,e),this.TAG="AnalyticsTransport"}return m(e,[{key:"sendEvent",value:function(e){try{this.sendSingleEvent(e),this.flushFailedEvents()}catch(b){dn.w(this.TAG,"sendEvent failed",b)}}},{key:"flushFailedEvents",value:function(e){var t;try{for(dn.d(this.TAG,"Flushing failed events",this.failedEvents);this.failedEvents.size()>0;){var n=this.failedEvents.dequeue();n&&((null==(t=n.metadata)?void 0:t.peer.peer_id)!==e&&n.metadata.peer.peer_id?$i.sendEvent(n):this.sendSingleEvent(n))}}catch(r){dn.w(this.TAG,"flushFailedEvents failed",r)}}},{key:"sendSingleEvent",value:function(e){try{this.transportProvider.sendEvent(e),dn.d(this.TAG,"Sent event",e.name,e)}catch(b){throw dn.w(this.TAG,"".concat(this.transportProvider.TAG,".sendEvent failed, adding to local storage events"),{event:e,error:b}),this.failedEvents.enqueue(e),b}}}]),e}(),Zi=function(e){Ee(n,e);var t=Pe(n);function n(){var e;return p(this,n),(e=t.call(this,100)).localStorage=new pr("hms-analytics"),e.localStorage.clear(),e.initLocalStorageQueue(),e}return m(n,[{key:"enqueue",value:function(e){we(ke(n.prototype),"enqueue",this).call(this,e),this.localStorage.set(this.storage)}},{key:"dequeue",value:function(){var e=we(ke(n.prototype),"dequeue",this).call(this);return this.localStorage.set(this.storage),e}},{key:"initLocalStorageQueue",value:function(){var e,t=this;null==(e=this.localStorage.get())||e.forEach((function(e){var r=new ci(e);we(ke(n.prototype),"enqueue",t).call(t,r)}))}}]),n}(Cr),ea=function(e){Ee(n,e);var t=Pe(n);function n(e){var r;return p(this,n),(r=t.call(this)).transportProvider=e,r.failedEvents=new Zi,r}return m(n)}(Xi),ta=function(){function e(t,n){p(this,e),this.store=t,this.eventBus=n,this.TAG="[TrackDegradationController]",this.MAX_RECOVER_GRACE_PERIOD=120,this.recoverAttemptCount=0,this.packetsLost=0;var r=this.store.getSubscribeDegradationParams();this.PACKETS_LOST_THRESHOLD=r.packetLossThreshold,this.MIN_DEGRADE_GRACE_PERIOD=r.degradeGracePeriodSeconds,this.MIN_RECOVER_GRACE_PERIOD=r.recoverGracePeriodSeconds,this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD}return m(e,[{key:"isAttemptingRecover",get:function(){return Boolean(this.recoveringTrack)}},{key:"handleRtcStatsChange",value:function(e){var t=e>this.packetsLost+this.PACKETS_LOST_THRESHOLD;this.packetsLost=e,t?this.degrade():this.recover()}},{key:"degrade",value:function(){if(!(this.degradeGracePeriod>0))return this.isAttemptingRecover?this.cancelRecovery():(dn.d(this.TAG,"Packet loss increased, Degrading",{packetsLost:this.packetsLost}),this.degradeActiveTracksByHalf(),this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,void(this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD));this.degradeGracePeriod--}},{key:"recover",value:function(){this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod>0?this.recoverGracePeriod--:(this.recoveringTrack=this.getActiveTracks(!0).find((function(e){return e.degraded})),this.recoveringTrack&&(dn.d(this.TAG,"Packet lost stable, recovering track",this.recoveringTrack),this.recoveringTrack.setDegradedFromSdk(!1),this.eventBus.trackRestored.publish(this.recoveringTrack),this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD))}},{key:"cleanUp",value:function(){this.eventBus.trackDegraded.removeAllListeners(),this.eventBus.trackRestored.removeAllListeners()}},{key:"degradeActiveTracksByHalf",value:function(){var e=this.getActiveTracks(!1);if(e.length){dn.d(this.TAG,{activeTracks:h(e)});for(var t=Math.ceil(e.length/2);t--;){var n=e.pop();n.setDegradedFromSdk(!0),this.eventBus.trackDegraded.publish(n)}}}},{key:"getActiveTracks",value:function(e){var t=this;return this.store.getRemoteVideoTracks().filter((function(t){return t.hasSinks()&&(!t.degraded||e)})).sort((function(e,n){var r=t.store.getComparator().getTrackComparators();return-1*(r.screenShare(e,n)||r.rolePriority(e,n)||r.peerAudioLevel(e,n)||t.store.getComparator().stringComparator(e.trackId,n.trackId))})).slice(0)}},{key:"cancelRecovery",value:function(){this.recoveringTrack&&(this.recoveringTrack.setDegradedFromSdk(!0),this.eventBus.trackDegraded.publish(this.recoveringTrack)),this.recoveringTrack=void 0,this.recoverAttemptCount++,this.recoverGracePeriod=this.getDelayForRecoverCount(this.recoverAttemptCount),this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,dn.d(this.TAG,"Recover Attempt Failed",{count:this.recoverAttemptCount,delay:this.recoverGracePeriod})}},{key:"getDelayForRecoverCount",value:function(e){var t=this.MIN_RECOVER_GRACE_PERIOD+this.MIN_RECOVER_GRACE_PERIOD*e;return Math.min(t,this.MAX_RECOVER_GRACE_PERIOD)}}]),e}(),na=function(e){var t=e.stream instanceof Ci;return{peerConnectionType:t?"publish":"subscribe",nativeTrack:t?e.getTrackBeingSent():e.nativeTrack}},ra=function(e,t,n,r){return rn(void 0,null,f().mark((function i(){var a,o,s,c,u,l,d,h;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=na(t),s=o.peerConnectionType,c=o.nativeTrack,i.prev=1,i.next=4,null==(a=e[s])?void 0:a.call(e,c);case 4:u=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),dn.w("[HMSWebrtcStats]","Error in getting track stats",t,c,i.t0);case 10:return l=ia(u),d=ua("publish"===s?"bytesSent":"bytesReceived",l,r),h=la("packetsLost",l,r),i.abrupt("return",((null==l?void 0:l.remote)&&Object.assign(l.remote,{packetsLostRate:la("packetsLost",l.remote,null==r?void 0:r.remote)}),l&&Object.assign(l,{bitrate:d,packetsLostRate:h,peerId:t.peerId,peerName:n,codec:l.codec})));case 12:case"end":return i.stop()}}),i,null,[[1,7]])})))},ia=function(e){var t,n,r={};null==e||e.forEach((function(e){switch(e.type){case"inbound-rtp":case"outbound-rtp":t=e;break;case"remote-inbound-rtp":n=e;break;case"codec":r[e.id]=e.mimeType}}));var i,a=(null==t?void 0:t.codecId)?r[t.codecId]:void 0;return a&&(i=a.substring(a.indexOf("/")+1)),t&&Object.assign(t,{remote:n,codec:i})},aa=function(e,t,n){var r=oa(t),i=ua("publish"===e?"bytesSent":"bytesReceived",r,n&&n[e]);return r&&Object.assign(r,{bitrate:i})},oa=function(e){var t;return e.forEach((function(n){"transport"===n.type&&(t=e.get(n.selectedCandidatePairId))})),t||e.forEach((function(e){"candidate-pair"===e.type&&e.selected&&(t=e)})),t},sa=function(e){var t={packetsLost:0,jitter:0};return null==e||e.forEach((function(e){e.packetsLost&&(t.packetsLost+=e.packetsLost),e.jitter>t.jitter&&(t.jitter=e.jitter)})),t},ca=function(e,t){return Array.from(new Set(e.concat(t)))},ua=function(e,t,n){return 8*la(e,t,n)},la=function(e,t,n){var r=t&&t[e],i=n?n[e]:null;return[t,n,_n(r),_n(i)].every((function(e){return!!e}))?1e3*da(r,i,null==t?void 0:t.timestamp,null==n?void 0:n.timestamp):0},da=function(e,t,n,r){return _n(e)&&_n(t)&&n&&r?(e-t)/(n-r):0},fa=function(){function e(t,n){var r;p(this,e),this.getStats=t,this.store=n,this.TAG="[HMSWebrtcStats]",this.peerStats={},this.trackStats={},this.localPeerID=null==(r=this.store.getLocalPeer())?void 0:r.peerId}return m(e,[{key:"getLocalPeerStats",value:function(){return this.peerStats[this.localPeerID]}},{key:"getTrackStats",value:function(e){return this.trackStats[e]}},{key:"updateStats",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateLocalPeerStats();case 2:return e.next=4,this.updateTrackStats();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateLocalPeerStats",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a,o,s,c,u,l,d,h,p,v,m,g;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.getLocalPeerStats(),e.prev=1,e.next=4,null==(n=(t=this.getStats).publish)?void 0:n.call(t);case 4:c=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),dn.w(this.TAG,"Error in getting publish stats",e.t0);case 10:return u=c&&aa("publish",c,s),e.prev=11,e.next=14,null==(i=(r=this.getStats).subscribe)?void 0:i.call(r);case 14:l=e.sent,e.next=20;break;case 17:e.prev=17,e.t1=e.catch(11),dn.w(this.TAG,"Error in getting subscribe stats",e.t1);case 20:d=l&&aa("subscribe",l,s),h=sa(l),p=h.packetsLost,v=h.jitter,m=da(p,null==(a=null==s?void 0:s.subscribe)?void 0:a.packetsLost,null==d?void 0:d.timestamp,null==(o=null==s?void 0:s.subscribe)?void 0:o.timestamp),g=d&&Object.assign(d,{packetsLostRate:m,jitter:v,packetsLost:p}),this.peerStats[this.localPeerID]={publish:u,subscribe:g};case 22:case"end":return e.stop()}}),e,this,[[1,7],[11,17]])})))}},{key:"updateTrackStats",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a,o,s,c,u,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.store.getTracksMap(),r=ca(Object.keys(this.trackStats),Object.keys(n)),i=g(r),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=19;break}if(o=a.value,!(s=n[o])){e.next=16;break}return c=s.peerId&&(null==(t=this.store.getPeerById(s.peerId))?void 0:t.name),u=this.getTrackStats(s.trackId),e.next=12,ra(this.getStats,s,c,u);case 12:(l=e.sent)&&(this.trackStats[o]=l),e.next=17;break;case 16:delete this.trackStats[o];case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[2,21,24,27]])})))}}]),e}(),ha=function(){function e(t,n,r,i){var a=this;p(this,e),this.store=t,this.eventBus=n,this.publishConnection=r,this.subscribeConnection=i,this.TAG="[HMSWebrtcInternals]",this.interval=1e3,this.isMonitored=!1,this.handleStatsUpdate=function(){return rn(a,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(t=this.hmsStats)?void 0:t.updateStats();case 2:this.eventBus.statsUpdate.publish(this.hmsStats);case 3:case"end":return e.stop()}}),e,this)})))}}return m(e,[{key:"getPublishPeerConnection",value:function(){return this.publishConnection}},{key:"getSubscribePeerConnection",value:function(){return this.subscribeConnection}},{key:"getCurrentStats",value:function(){return this.hmsStats}},{key:"onStatsChange",value:function(e){var t=this;return this.eventBus.statsUpdate.subscribe(e),function(){t.eventBus.statsUpdate.unsubscribe(e)}}},{key:"setPeerConnections",value:function(e){var t,n,r=e.publish,i=e.subscribe;this.publishConnection=r,this.subscribeConnection=i,this.hmsStats=new fa({publish:null==(t=this.publishConnection)?void 0:t.getStats.bind(this.publishConnection),subscribe:null==(n=this.subscribeConnection)?void 0:n.getStats.bind(this.subscribeConnection)},this.store)}},{key:"start",value:function(){return rn(this,null,f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMonitored){e.next=3;break}return dn.d(this.TAG,"Already started"),e.abrupt("return");case 3:this.stop(),this.isMonitored=!0,dn.d(this.TAG,"Starting Webrtc Stats Monitor"),this.startLoop().then((function(){return dn.d(t.TAG,"Stopping Webrtc Stats Monitor")})).catch((function(e){return dn.e(t.TAG,e.message)}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){this.isMonitored=!1}},{key:"startLoop",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMonitored){e.next=7;break}return e.next=3,this.handleStatsUpdate();case 3:return e.next=5,Pr(this.interval);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanUp",value:function(){this.stop(),this.eventBus.statsUpdate.removeAllListeners()}}]),e}(),pa="[HMSTransport]:",va=function(){function e(t,n,r,i,a,o,s){var c,u,l=this;p(this,e),this.observer=t,this.deviceManager=n,this.store=r,this.localTrackManager=i,this.eventBus=a,this.analyticsEventsService=o,this.analyticsTimer=s,this.state=Mi.Disconnected,this.trackStates=new Map,this.publishConnection=null,this.subscribeConnection=null,this.maxSubscribeBitrate=0,this.callbacks=new Map,this.signalObserver={onOffer:function(e){return rn(l,null,f().mark((function t(){var n,r,i,a,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.subscribeConnection){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.subscribeConnection.setRemoteDescription(e);case 5:dn.d(pa,"[SUBSCRIBE] Adding ".concat(this.subscribeConnection.candidates.length," ice-candidates"),this.subscribeConnection.candidates),n=g(this.subscribeConnection.candidates),t.prev=7,n.s();case 9:if((r=n.n()).done){t.next=15;break}return i=r.value,t.next=13,this.subscribeConnection.addIceCandidate(i);case 13:t.next=9;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:return this.subscribeConnection.candidates.length=0,t.next=26,this.subscribeConnection.createAnswer();case 26:return a=t.sent,t.next=29,this.subscribeConnection.setLocalDescription(a);case 29:this.signal.answer(a),dn.d(pa,"[role=SUBSCRIBE] onOffer renegotiation DONE \u2705"),t.next=37;break;case 33:throw t.prev=33,t.t1=t.catch(0),dn.d(pa,"[role=SUBSCRIBE] onOffer renegotiation FAILED \u274c"),this.state=Mi.Failed,o=t.t1 instanceof kn?t.t1:xn.Unknown(gn.PUBLISH,t.t1.message),this.eventBus.analytics.publish(Pi.subscribeFail(o)),o;case 37:case"end":return t.stop()}}),t,this,[[0,33],[7,17,20,23]])})))},onTrickle:function(e){return rn(l,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==(n=e.target===vn.Publish?this.publishConnection:this.subscribeConnection)?void 0:n.remoteDescription)){t.next=6;break}return t.next=4,n.addIceCandidate(e.candidate);case 4:t.next=7;break;case 6:null==n||n.candidates.push(e.candidate);case 7:case"end":return t.stop()}}),t,this)})))},onNotification:function(e){return l.observer.onNotification(e)},onServerError:function(e){return rn(l,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.observer.onStateChange(Mi.Failed,e);case 2:case"end":return t.stop()}}),t,this)})))},onFailure:function(e){l.joinParameters&&l.retryScheduler.schedule({category:Gi.SignalDisconnect,error:e,task:l.retrySignalDisconnectTask,originalState:l.state})},onOffline:function(e){return rn(l,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:dn.d(pa,"socket offline",Mi[this.state]);try{this.state!==Mi.Leaving&&this.joinParameters&&this.retryScheduler.schedule({category:Gi.SignalDisconnect,error:bn.WebSocketConnectionLost(gn.RECONNECT_SIGNAL,e),task:this.retrySignalDisconnectTask,originalState:this.state})}catch(n){console.error(n)}case 2:case"end":return t.stop()}}),t,this)})))},onOnline:function(){var e;dn.d(pa,"socket online",Mi[l.state]),l.analyticsSignalTransport.flushFailedEvents(null==(e=l.store.getLocalPeer())?void 0:e.peerId)},onNetworkOnline:function(){l.analyticsEventsService.flushFailedClientEvents()}},this.signal=new _r(this.signalObserver),this.analyticsSignalTransport=new ea(this.signal),this.publishConnectionObserver={onRenegotiationNeeded:function(){return rn(l,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.performPublishRenegotiation();case 2:case"end":return e.stop()}}),e,this)})))},onIceConnectionChange:function(e){return rn(l,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:dn.d("publisher ice connection state change, ",e);case 1:case"end":return t.stop()}}),t)})))},onConnectionStateChange:function(e){return rn(l,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(dn.d("publisher connection state change, ",e),t.t0="failed"===e,!t.t0){t.next=5;break}return t.next=5,this.handleIceConnectionFailure(vn.Publish);case 5:case"end":return t.stop()}}),t,this)})))}},this.subscribeConnectionObserver={onApiChannelMessage:function(e){l.observer.onNotification(JSON.parse(e))},onTrackAdd:function(e){dn.d(pa,"[Subscribe] onTrackAdd",e),l.observer.onTrackAdd(e)},onTrackRemove:function(e){dn.d(pa,"[Subscribe] onTrackRemove",e),l.observer.onTrackRemove(e)},onIceConnectionChange:function(e){return rn(l,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:dn.d("subscriber ice connection state change, ",e),"connected"===e&&(n=this.callbacks.get(jn),this.callbacks.delete(jn),n&&n.promise.resolve(!0));case 1:case"end":return t.stop()}}),t,this)})))},onConnectionStateChange:function(e){return rn(l,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(dn.d("subscriber connection state change, ",e),t.t0="failed"===e,!t.t0){t.next=5;break}return t.next=5,this.handleIceConnectionFailure(vn.Subscribe);case 5:if("connected"!==e){t.next=8;break}n=this.callbacks.get(jn),this.callbacks.delete(jn),n&&n.promise.resolve(!0);case 8:case"end":return t.stop()}}),t,this)})))}},this.handleLocalRoleUpdate=function(e){return rn(l,[e],f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldRole,r=t.newRole,e.t0=!(!this.doesRoleNeedWebRTC(n)&&this.doesRoleNeedWebRTC(r)),e.t0){e.next=7;break}return dn.i(pa,"Local peer role updated to webrtc role, creating PeerConnections and performing inital publish negotiation \u23f3"),this.createPeerConnections(),e.next=7,this.negotiateOnFirstPublish();case 7:case"end":return e.stop()}}),e,this)})))},this.retryPublishIceFailedTask=function(){return rn(l,null,f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.publishConnection||"connected"===this.publishConnection.iceConnectionState&&"connected"===this.publishConnection.connectionState){e.next=6;break}return t=new Promise((function(e,t){n.callbacks.set(Fn,{promise:{resolve:e,reject:t},action:gn.RESTART_ICE,extra:{}})})),e.next=4,this.performPublishRenegotiation({iceRestart:!0});case 4:return e.next=6,t;case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})))},this.retrySubscribeIceFailedTask=function(){return rn(l,null,f().mark((function e(){var t,n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.subscribeConnection||"connected"===this.subscribeConnection.iceConnectionState&&"connected"===this.subscribeConnection.connectionState){e.next=3;break}return t=new Promise((function(e,t){r.callbacks.set(jn,{promise:{resolve:e,reject:t},action:gn.RESTART_ICE,extra:{}})})),n=new Promise((function(e){setTimeout(e,6e4,!1)})),e.abrupt("return",Promise.race([t,n]));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})))},this.retrySignalDisconnectTask=function(){return rn(l,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dn.d(pa,"retrySignalDisconnectTask",{signalConnected:this.signal.isConnected}),this.signal.isConnected){e.next=8;break}return e.prev=1,e.next=4,this.internalConnect(this.joinParameters.authToken,this.joinParameters.endpoint,this.joinParameters.peerId);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:if(!this.store.getRoom().joinedAt){e.next=17;break}if(e.t2=this.signal.isConnected,!e.t2){e.next=14;break}return e.next=13,this.retryPublishIceFailedTask();case 13:e.t2=e.sent;case 14:e.t1=e.t2,e.next=18;break;case 17:e.t1=this.signal.isConnected;case 18:return t=e.t1,e.abrupt("return",(this.signal.trackUpdate(this.trackStates),t));case 20:case"end":return e.stop()}}),e,this,[[1,6]])})))},this.webrtcInternals=new ha(this.store,this.eventBus,null==(c=this.publishConnection)?void 0:c.nativeConnection,null==(u=this.subscribeConnection)?void 0:u.nativeConnection);this.retryScheduler=new Ji((function(e,t){return rn(l,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e!==this.state,!n.t0){n.next=5;break}return this.state=e,n.next=5,this.observer.onStateChange(this.state,t);case 5:case"end":return n.stop()}}),n,this)})))}),this.sendErrorAnalyticsEvent.bind(this)),this.eventBus.statsUpdate.subscribe((function(e){var t,n,r=(null==(n=null==(t=e.getLocalPeerStats())?void 0:t.subscribe)?void 0:n.bitrate)||0;l.maxSubscribeBitrate=Math.max(l.maxSubscribeBitrate,r)}))}return m(e,[{key:"getLocalScreen",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.localTrackManager.getLocalScreen(e,t);case 3:return n.abrupt("return",n.sent);case 6:throw n.prev=6,n.t0=n.catch(0),n.t0 instanceof kn&&this.eventBus.analytics.publish(Pi.publish({error:n.t0,devices:this.deviceManager.getDevices(),settings:new Lr(e,t,!1)})),n.t0;case 9:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"getWebrtcInternals",value:function(){return this.webrtcInternals}},{key:"isFlagEnabled",value:function(e){var t,n=null==(t=this.initConfig)?void 0:t.config;return((null==n?void 0:n.enabledFlags)||[]).includes(e)}},{key:"preview",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return rn(this,null,f().mark((function a(){var o;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.connect(e,t,n,r,i);case 2:return o=a.sent,a.abrupt("return",(this.state=Mi.Preview,this.observer.onStateChange(this.state),o));case 4:case"end":return a.stop()}}),a,this)})))}},{key:"join",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return rn(this,null,f().mark((function a(){var o,s;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(dn.d(pa,"join: started \u23f0"),a.prev=1,a.t0=!this.signal.isConnected||!this.initConfig,!a.t0){a.next=6;break}return a.next=6,this.connect(e,r,t,n,i);case 6:if(this.validateNotDisconnected("connect"),o=this.isFlagEnabled(zi.FLAG_SERVER_SUB_DEGRADATION),a.t1=this.initConfig,!a.t1){a.next=17;break}return a.next=12,this.waitForLocalRoleAvailability();case 12:return a.next=14,this.createConnectionsAndNegotiateJoin(n,i,o);case 14:return a.next=16,this.initRtcStatsMonitor();case 16:dn.d(pa,"\u2705 join: Negotiated over PUBLISH connection");case 17:a.next=27;break;case 19:return a.prev=19,a.t2=a.catch(1),dn.e(pa,"join: failed \u274c [token=".concat(e,"]"),a.t2),this.state=Mi.Failed,(s=a.t2).isTerminal=500===s.code,a.next=26,this.observer.onStateChange(this.state,s);case 26:throw s;case 27:dn.i(pa,"\u2705 join: successful"),this.state=Mi.Joined,this.observer.onStateChange(this.state);case 28:case"end":return a.stop()}}),a,this,[[1,19]])})))}},{key:"connect",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return rn(this,null,f().mark((function a(){var o,s=this;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return this.setTransportStateForConnect(),this.joinParameters=new Hi(e,n,r.name,r.metaData,t,i),a.prev=1,a.next=4,this.internalConnect(e,t,n);case 4:return a.abrupt("return",a.sent);case 7:if(a.prev=7,a.t0=a.catch(1),!(a.t0 instanceof kn&&([yn.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,yn.WebSocketConnectionErrors.FAILED_TO_CONNECT,yn.InitAPIErrors.ENDPOINT_UNREACHABLE].includes(a.t0.code)||a.t0.code.toString().startsWith("5")||a.t0.code.toString().startsWith("429")))){a.next=15;break}return o=function(){return rn(s,null,f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.internalConnect(e,t,n);case 2:return r.abrupt("return",Boolean(this.initConfig&&this.initConfig.endpoint));case 3:case"end":return r.stop()}}),r,this)})))},a.next=13,this.retryScheduler.schedule({category:Gi.ConnectFailed,error:a.t0,task:o,originalState:this.state,maxFailedRetries:5,changeState:!1});case 13:a.next=16;break;case 15:throw a.t0;case 16:case"end":return a.stop()}}),a,this,[[1,7]])})))}},{key:"leave",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.retryScheduler.reset(),this.joinParameters=void 0,e.prev=1,this.state=Mi.Leaving,null==(t=this.webrtcInternals)||t.cleanUp(),null==(n=this.trackDegradationController)||n.cleanUp(),e.next=7,null==(r=this.publishConnection)?void 0:r.close();case 7:return e.next=9,null==(i=this.subscribeConnection)?void 0:i.close();case 9:try{this.signal.leave()}catch(a){dn.w(pa,"failed to send leave on websocket to server",a)}return this.analyticsEventsService.flushFailedClientEvents(),this.analyticsEventsService.reset(),e.next=14,this.signal.close();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),e.t0 instanceof kn&&this.eventBus.analytics.publish(Pi.disconnect(e.t0)),dn.e(pa,"leave: FAILED \u274c",e.t0);case 19:return e.prev=19,this.state=Mi.Disconnected,this.observer.onStateChange(this.state),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,16,19,22]])})))}},{key:"publish",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=g(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=15;break}return i=r.value,t.prev=5,t.next=8,this.publishTrack(i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),t.t0 instanceof kn&&this.eventBus.analytics.publish(Pi.publish({devices:this.deviceManager.getDevices(),error:t.t0}));case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(1),n.e(t.t1);case 20:return t.prev=20,n.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[1,17,20,23],[5,10]])})))}},{key:"unpublish",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=g(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return i=r.value,t.next=7,this.unpublishTrack(i);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})))}},{key:"sendMessage",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.broadcast(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"trackUpdate",value:function(e){var t=Array.from(this.trackStates.values()).find((function(t){return e.type===t.type&&e.source===t.source}));if(t){var n=new Bi(tn(en({},t),{mute:!e.enabled}));this.trackStates.set(t.track_id,n),dn.d(pa,"Track Update",this.trackStates,e),this.signal.trackUpdate(new Map([[t.track_id,n]]))}}},{key:"changeRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return rn(this,null,f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.signal.requestRoleChange({requested_for:e.peerId,role:t,force:n});case 2:case"end":return r.stop()}}),r,this)})))}},{key:"acceptRoleChange",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.acceptRoleChangeRequest({role:e.role.name,token:e.token});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"endRoom",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.signal.endRoom(e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"removePeer",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.signal.removePeer({requested_for:e,reason:t});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"startRTMPOrRecording",value:function(e){return rn(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={meeting_url:e.meetingURL,record:e.record},(null==(n=e.rtmpURLs)?void 0:n.length)&&(r.rtmp_urls=e.rtmpURLs),e.resolution&&(r.resolution=e.resolution),t.next=5,this.signal.startRTMPOrRecording(r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPOrRecording",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.stopRTMPAndRecording();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={variants:e.variants.map((function(e){var t={meeting_url:e.meetingURL};return e.metadata&&(t.metadata=e.metadata),t}))},e.recording&&(n.hls_recording={single_file_per_layer:e.recording.singleFilePerLayer,hls_vod:e.recording.hlsVod}),t.next=4,this.signal.startHLSStreaming(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return n={variants:null==e?void 0:e.variants.map((function(e){var t={meeting_url:e.meetingURL};return e.metadata&&(t.metadata=e.metadata),t}))},t.next=4,this.signal.stopHLSStreaming(n);case 4:return t.next=6,this.signal.stopHLSStreaming();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"changeName",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.updatePeer({name:e});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeMetadata",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.updatePeer({data:e});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeTrackState",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.requestTrackStateChange(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeMultiTrackState",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.requestMultiTrackStateChange(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"publishTrack",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a,o=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.publishedTrackId=e.nativeTrack.id,dn.d(pa,"\u23f3 publishTrack: trackId=".concat(e.trackId,", toPublishTrackId=").concat(e.publishedTrackId),e),this.trackStates.set(e.publishedTrackId,new Bi(e)),n=new Promise((function(e,t){o.callbacks.set(Fn,{promise:{resolve:e,reject:t},action:gn.PUBLISH,extra:{}})})),(r=e.stream).setConnection(this.publishConnection),i=this.store.getSimulcastLayers(e.source),r.addTransceiver(e,i),dn.time("publish-".concat(e.trackId,"-").concat(e.type)),t.next=8,n;case 8:if(dn.timeEnd("publish-".concat(e.trackId,"-").concat(e.type)),this.store.addTrack(e),a=e.settings.maxBitrate,t.t0=a,!t.t0){t.next=15;break}return t.next=15,r.setMaxBitrate(a,e).then((function(){dn.d(pa,"Setting maxBitrate for ".concat(e.source," ").concat(e.type," to ").concat(a," kpbs"))})).catch((function(e){return dn.e(pa,"Failed setting maxBitrate",e)}));case 15:dn.d(pa,"\u2705 publishTrack: trackId=".concat(e.trackId),e,this.callbacks);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"unpublishTrack",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return dn.d(pa,"\u23f3 unpublishTrack: trackId=".concat(e.trackId),e),e.publishedTrackId&&this.trackStates.has(e.publishedTrackId)?this.trackStates.delete(e.publishedTrackId):(n=Array.from(this.trackStates.values()).find((function(t){return e.type===t.type&&e.source===t.source})),n&&this.trackStates.delete(n.track_id)),r=new Promise((function(e,t){i.callbacks.set(Fn,{promise:{resolve:e,reject:t},action:gn.UNPUBLISH,extra:{}})})),e.stream.removeSender(e),t.next=5,r;case 5:return t.next=7,e.cleanup();case 7:this.store.removeTrack(e.trackId),dn.d(pa,"\u2705 unpublishTrack: trackId=".concat(e.trackId),this.callbacks);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"waitForLocalRoleAvailability",value:function(){var e=this;if(!this.store.hasRoleDetailsArrived())return new Promise((function(t){e.eventBus.policyChange.subscribeOnce((function(){return t()}))}))}},{key:"createConnectionsAndNegotiateJoin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return rn(this,null,f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(i=this.doesLocalPeerNeedWebRTC())&&this.createPeerConnections(),r.next=4,this.negotiateJoin(e.name,e.metaData,t,n,i);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"createPeerConnections",value:function(){this.initConfig&&(this.publishConnection||(this.publishConnection=new nr(this.signal,this.initConfig.rtcConfiguration,this.publishConnectionObserver,this)),this.subscribeConnection||(this.subscribeConnection=new hr(this.signal,this.initConfig.rtcConfiguration,this.subscribeConnectionObserver)))}},{key:"negotiateJoin",value:function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return rn(this,null,f().mark((function a(){var o,s=this;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!i){a.next=7;break}return a.next=4,this.negotiateJoinWebRTC(e,t,n,r);case 4:a.t0=a.sent,a.next=10;break;case 7:return a.next=9,this.negotiateJoinNonWebRTC(e,t,n,r);case 9:a.t0=a.sent;case 10:return a.abrupt("return",a.t0);case 13:return a.prev=13,a.t1=a.catch(0),dn.e(pa,"Publish negotiation failed \u274c",a.t1),o=function(){return rn(s,null,f().mark((function a(){return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.negotiateJoin(e,t,n,r,i);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a,this)})))},a.next=19,this.retryScheduler.schedule({category:Gi.PublishNegotiationFailed,error:Tn.SetRemoteDescriptionFailed(gn.JOIN,"Failed to send join over WS connection"),task:o,originalState:Mi.Joined});case 19:return a.abrupt("return",!1);case 20:case"end":return a.stop()}}),a,this,[[0,13]])})))}},{key:"negotiateJoinWebRTC",value:function(e,t,n,r){return rn(this,null,f().mark((function i(){var a,o,s,c,u;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(dn.d(pa,"\u23f3 join: Negotiating over PUBLISH connection"),this.publishConnection){i.next=2;break}return i.abrupt("return",(dn.e(pa,"Publish peer connection not found, cannot negotiate"),!1));case 2:return i.next=4,this.publishConnection.createOffer();case 4:return a=i.sent,i.next=7,this.publishConnection.setLocalDescription(a);case 7:return i.next=9,this.signal.join(e,t,!n,r,a);case 9:return o=i.sent,i.next=12,this.publishConnection.setRemoteDescription(o);case 12:s=g(this.publishConnection.candidates),i.prev=13,s.s();case 15:if((c=s.n()).done){i.next=21;break}return u=c.value,i.next=19,this.publishConnection.addIceCandidate(u);case 19:i.next=15;break;case 21:i.next=26;break;case 23:i.prev=23,i.t0=i.catch(13),s.e(i.t0);case 26:return i.prev=26,s.f(),i.finish(26);case 29:return i.abrupt("return",(this.publishConnection.initAfterJoin(),!!o));case 30:case"end":return i.stop()}}),i,this,[[13,23,26,29]])})))}},{key:"negotiateJoinNonWebRTC",value:function(e,t,n,r){return rn(this,null,f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return dn.d(pa,"\u23f3 join: Negotiating Non-WebRTC"),i.next=3,this.signal.join(e,t,!n,r);case 3:return i.abrupt("return",!!i.sent);case 4:case"end":return i.stop()}}),i,this)})))}},{key:"negotiateOnFirstPublish",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dn.d(pa,"\u23f3 Negotiating offer over PUBLISH connection"),this.publishConnection){e.next=2;break}return e.abrupt("return",(dn.e(pa,"Publish peer connection not found, cannot negotiate"),!1));case 2:return e.next=4,this.publishConnection.createOffer(this.trackStates);case 4:return t=e.sent,e.next=7,this.publishConnection.setLocalDescription(t);case 7:return e.next=9,this.signal.offer(t,this.trackStates);case 9:return n=e.sent,e.next=12,this.publishConnection.setRemoteDescription(n);case 12:r=g(this.publishConnection.candidates),e.prev=13,r.s();case 15:if((i=r.n()).done){e.next=21;break}return a=i.value,e.next=19,this.publishConnection.addIceCandidate(a);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(13),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:return e.abrupt("return",(this.publishConnection.initAfterJoin(),!!n));case 30:case"end":return e.stop()}}),e,this,[[13,23,26,29]])})))}},{key:"performPublishRenegotiation",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(dn.d(pa,"\u23f3 [role=PUBLISH] onRenegotiationNeeded START",this.trackStates),!(n=this.callbacks.get(Fn))){t.next=27;break}if(this.publishConnection){t.next=6;break}return dn.e(pa,"Publish peer connection not found, cannot renegotiate"),t.abrupt("return");case 6:return t.prev=6,t.next=9,this.publishConnection.createOffer(this.trackStates,e);case 9:return r=t.sent,t.next=12,this.publishConnection.setLocalDescription(r);case 12:return dn.time("renegotiation-offer-exchange"),t.next=15,this.signal.offer(r,this.trackStates);case 15:return i=t.sent,this.callbacks.delete(Fn),dn.timeEnd("renegotiation-offer-exchange"),t.next=20,this.publishConnection.setRemoteDescription(i);case 20:n.promise.resolve(!0),dn.d(pa,"[role=PUBLISH] onRenegotiationNeeded DONE \u2705"),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(6),a=t.t0 instanceof kn?t.t0:xn.Unknown(gn.PUBLISH,t.t0.message),n.promise.reject(a),dn.d(pa,"[role=PUBLISH] onRenegotiationNeeded FAILED \u274c");case 27:case"end":return t.stop()}}),t,this,[[6,24]])})))}},{key:"handleIceConnectionFailure",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e===vn.Publish?this.retryScheduler.schedule({category:Gi.PublishIceConnectionFailed,error:Tn.ICEFailure(gn.PUBLISH),task:this.retryPublishIceFailedTask,originalState:Mi.Joined}):this.retryScheduler.schedule({category:Gi.SubscribeIceConnectionFailed,error:Tn.ICEFailure(gn.SUBSCRIBE),task:this.retrySubscribeIceFailedTask,originalState:Mi.Joined,maxFailedRetries:1});case 1:case"end":return t.stop()}}),t,this)})))}},{key:"internalConnect",value:function(e,t,n){return rn(this,null,f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return dn.d(pa,"connect: started \u23f0"),i=new Date,r.prev=2,this.analyticsTimer.start(Ri.INIT),r.next=6,Sr.fetchInitConfig(e,n,t);case 6:return this.initConfig=r.sent,this.analyticsTimer.end(Ri.INIT),this.validateNotDisconnected("post init"),r.next=11,this.openSignal(e,n);case 11:return dn.d(pa,"Adding Analytics Transport: JsonRpcSignal"),this.analyticsEventsService.setTransport(this.analyticsSignalTransport),this.analyticsEventsService.flush(),r.abrupt("return",this.initConfig);case 17:throw r.prev=17,r.t0=r.catch(2),r.t0 instanceof kn&&this.state!==Mi.Reconnecting&&this.eventBus.analytics.publish(Pi.connect(r.t0,this.getAdditionalAnalyticsProperties(),i,new Date,t)),dn.d(pa,"\u274c internal connect: failed",r.t0),r.t0;case 20:case"end":return r.stop()}}),r,this,[[2,17]])})))}},{key:"validateNotDisconnected",value:function(e){if(this.state===Mi.Disconnected)throw dn.w(pa,"aborting join as transport state is disconnected"),xn.ValidationFailed("leave called before join could complete - stage=".concat(e))}},{key:"openSignal",value:function(e,t){return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.initConfig){n.next=2;break}throw wn.InitConfigNotAvailable(gn.INIT,"Init Config not found");case 2:return dn.d(pa,"\u23f3 internal connect: connecting to ws endpoint",this.initConfig.endpoint),(r=new URL(this.initConfig.endpoint)).searchParams.set("peer",t),r.searchParams.set("token",e),r.searchParams.set("user_agent",br),this.endpoint=r.toString(),this.analyticsTimer.start(Ri.WEBSOCKET_CONNECT),n.next=11,this.signal.open(this.endpoint);case 11:this.analyticsTimer.end(Ri.WEBSOCKET_CONNECT),this.analyticsTimer.start(Ri.ON_POLICY_CHANGE),dn.d(pa,"\u2705 internal connect: connected to ws endpoint");case 14:case"end":return n.stop()}}),n,this)})))}},{key:"initRtcStatsMonitor",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=this.webrtcInternals)||r.setPeerConnections({publish:null==(t=this.publishConnection)?void 0:t.nativeConnection,subscribe:null==(n=this.subscribeConnection)?void 0:n.nativeConnection}),e.t0=this.store.getSubscribeDegradationParams(),!e.t0){e.next=11;break}if(e.t1=this.isFlagEnabled(zi.FLAG_SERVER_SUB_DEGRADATION),e.t1){e.next=9;break}return e.next=7,null==(i=this.webrtcInternals)?void 0:i.start();case 7:this.trackDegradationController=new ta(this.store,this.eventBus),this.eventBus.statsUpdate.subscribe((function(e){var t,n,r;null==(r=a.trackDegradationController)||r.handleRtcStatsChange((null==(n=null==(t=e.getLocalPeerStats())?void 0:t.subscribe)?void 0:n.packetsLost)||0)}));case 9:this.eventBus.trackDegraded.subscribe((function(e){a.eventBus.analytics.publish(Pi.degradationStats(e,!0)),a.observer.onTrackDegrade(e)})),this.eventBus.trackRestored.subscribe((function(e){a.eventBus.analytics.publish(Pi.degradationStats(e,!1)),a.observer.onTrackRestore(e)}));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"doesRoleNeedWebRTC",value:function(e){var t,n;if(!this.isFlagEnabled(zi.FLAG_NON_WEBRTC_DISABLE_OFFER))return!0;var r=Boolean(e.publishParams.allowed&&(null==(t=e.publishParams.allowed)?void 0:t.length)>0),i=Boolean(e.subscribeParams.subscribeToRoles&&(null==(n=e.subscribeParams.subscribeToRoles)?void 0:n.length)>0);return r||i}},{key:"doesLocalPeerNeedWebRTC",value:function(){var e,t=null==(e=this.store.getLocalPeer())?void 0:e.role;return!t||this.doesRoleNeedWebRTC(t)}},{key:"setTransportStateForConnect",value:function(){if(this.state===Mi.Failed&&(this.state=Mi.Disconnected),this.state!==Mi.Disconnected&&this.state!==Mi.Reconnecting)throw En.AlreadyJoined(gn.JOIN,"Cannot join a meeting in ".concat(this.state," state"));this.state===Mi.Disconnected&&(this.state=Mi.Connecting,this.observer.onStateChange(this.state))}},{key:"sendErrorAnalyticsEvent",value:function(e,t){var n,r=this.getAdditionalAnalyticsProperties();switch(t){case Gi.ConnectFailed:n=Pi.connect(e,r);break;case Gi.SignalDisconnect:n=Pi.disconnect(e,r);break;case Gi.PublishNegotiationFailed:n=Pi.join({error:e,time:this.analyticsTimer.getTimeTaken(Ri.JOIN),init_response_time:this.analyticsTimer.getTimeTaken(Ri.INIT),ws_connect_time:this.analyticsTimer.getTimeTaken(Ri.WEBSOCKET_CONNECT),on_policy_change_time:this.analyticsTimer.getTimeTaken(Ri.ON_POLICY_CHANGE),local_tracks_time:this.analyticsTimer.getTimeTaken(Ri.LOCAL_TRACKS)});break;case Gi.PublishIceConnectionFailed:n=Pi.publish({error:e});break;case Gi.SubscribeIceConnectionFailed:n=Pi.subscribeFail(e)}this.eventBus.analytics.publish(n)}},{key:"getAdditionalAnalyticsProperties",value:function(){var e,t,n,r,i,a,o,s,c=function(){if(yr&&"undefined"!=typeof navigator.connection){var e=navigator.connection;return{downlink:e.downlink,downlinkMax:e.downlinkMax,effectiveType:e.effectiveType,rtt:e.rtt,saveData:e.saveData,type:e.type}}}(),u="undefined"!=typeof document&&document.hidden,l=this.store.getRemoteVideoTracks().filter((function(e){return e.degraded})).length;return{network_info:c,document_hidden:u,num_degraded_tracks:l,bitrate:{publish:null==(r=null==(n=null==(t=null==(e=this.getWebrtcInternals())?void 0:e.getCurrentStats())?void 0:t.getLocalPeerStats())?void 0:n.publish)?void 0:r.bitrate,subscribe:null==(s=null==(o=null==(a=null==(i=this.getWebrtcInternals())?void 0:i.getCurrentStats())?void 0:a.getLocalPeerStats())?void 0:o.subscribe)?void 0:s.bitrate},max_sub_bitrate:this.maxSubscribeBitrate,recent_pong_response_times:this.signal.getPongResponseTimes(),transport_state:this.state}}}]),e}();function ma(e){if(0===e.length)throw wn.InvalidTokenFormat(gn.INIT,"Token cannot be an empty string");var t=e.split(".");if(3!==t.length)throw wn.InvalidTokenFormat(gn.INIT,"Expected 3 '.' separate fields - header, payload and signature respectively");var n=atob(t[1]);try{var r=JSON.parse(n);return{roomId:r.room_id,userId:r.user_id,role:r.role}}catch(i){throw wn.InvalidTokenFormat(gn.INIT,"couldn't parse to json - ".concat(i.message))}}var ga=function(){function e(t,n){p(this,e),this.id=t,this.store=n,this.recording={server:{running:!1},browser:{running:!1},hls:{running:!1}},this.rtmp={running:!1},this.hls={running:!1,variants:[]}}return m(e,[{key:"localPeer",get:function(){return this.store.getLocalPeer()}},{key:"peers",get:function(){return this.store.getPeers()}}]),e}(),ya={autoplayFailed:void 0,initialized:!1,autoplayCheckPromise:void 0},ka=function(){function e(t,n,r){var i=this;p(this,e),this.store=t,this.deviceManager=n,this.eventBus=r,this.autoPausedTracks=new Set,this.TAG="[AudioSinkManager]:",this.volume=100,this.state=en({},ya),this.handleAudioPaused=function(e){var t,n=null==(t=e.target.srcObject)?void 0:t.getAudioTracks()[0];if(null==n?void 0:n.enabled){dn.d(i.TAG,"Audio Paused",e.target.id);var r=i.store.getTrackById(e.target.id);r&&("mobile"===mr.getDevice().type?setTimeout((function(){return rn(i,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=4;break}return e.next=4,this.playAudioFor(r);case 4:case"end":return e.stop()}}),e,this)})))}),500):i.autoPausedTracks.add(r))}},this.handleTrackUpdate=function(e){var t,n=e.track,r=e.enabled;(null==(t=window.HMS)?void 0:t.AUDIO_SINK)&&(r?(n.addSink(),i.playAudioFor(n)):n.removeSink())},this.handleTrackAdd=function(e){return rn(i,[e],f().mark((function e(t){var n,r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.track,r=t.peer,(s=document.createElement("audio")).style.display="none",s.id=n.trackId,s.addEventListener("pause",this.handleAudioPaused),n.setAudioElement(s),n.setVolume(this.volume),dn.d(this.TAG,"Audio track added",n.trackId),null==(i=this.audioSink)||i.append(s),e.t0=this.outputDevice,!e.t0){e.next=13;break}return e.next=13,n.setOutputDevice(this.outputDevice);case 13:return(null==(a=window.HMS)?void 0:a.AUDIO_SINK)?n.enabled?n.addSink():n.removeSink():s.srcObject=new MediaStream([n.nativeTrack]),null==(o=this.listener)||o.onTrackUpdate(sn.TRACK_ADDED,n,r),e.next=17,this.handleAutoplayError(n);case 17:case"end":return e.stop()}}),e,this)})))},this.handleAutoplayError=function(e){return rn(i,null,f().mark((function t(){var n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=void 0===this.state.autoplayFailed,!t.t0){t.next=5;break}return this.state.autoplayCheckPromise||(this.state.autoplayCheckPromise=new Promise((function(t){n.playAudioFor(e).then(t)}))),t.next=5,this.state.autoplayCheckPromise;case 5:if(!this.state.autoplayFailed){t.next=8;break}return this.autoPausedTracks.add(e),t.abrupt("return");case 8:return t.next=10,this.playAudioFor(e);case 10:case"end":return t.stop()}}),t,this)})))},this.handleAudioDeviceChange=function(e){e.error||!e.selection||"video"===e.type||i.unpauseAudioTracks()},this.handleTrackRemove=function(e){i.autoPausedTracks.delete(e);var t=document.getElementById(e.trackId);t&&(t.removeEventListener("pause",i.handleAudioPaused),t.srcObject=null,t.remove(),e.setAudioElement(null)),i.audioSink&&0===i.audioSink.childElementCount&&(i.state.autoplayCheckPromise=void 0,i.state.autoplayFailed=void 0),dn.d(i.TAG,"Audio track removed",e.trackId)},this.unpauseAudioTracks=function(){return rn(i,null,f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.autoPausedTracks.forEach((function(e){t.push(n.playAudioFor(e))})),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})))},this.eventBus.audioTrackAdded.subscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.subscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.subscribe(this.handleTrackUpdate),this.eventBus.deviceChange.subscribe(this.handleAudioDeviceChange)}return m(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"outputDevice",get:function(){return this.deviceManager.outputDevice}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.store.updateAudioOutputVolume(e),this.volume=e}},{key:"unblockAutoplay",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.autoPausedTracks.size>0&&this.unpauseAudioTracks();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"init",value:function(e){if(!this.state.initialized){this.state.initialized=!0;var t=document.createElement("div");t.id="HMS-SDK-audio-sink-".concat(Wt()),(e&&document.getElementById(e)||document.body).append(t),this.audioSink=t}}},{key:"cleanUp",value:function(){var e;null==(e=this.audioSink)||e.remove(),this.audioSink=void 0,this.eventBus.audioTrackAdded.unsubscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.unsubscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.unsubscribe(this.handleTrackUpdate),this.eventBus.deviceChange.unsubscribe(this.handleAudioDeviceChange),this.autoPausedTracks=new Set,this.state=en({},ya)}},{key:"playAudioFor",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getAudioElement()){t.next=4;break}return dn.w(this.TAG,"No audio element found on track",e.trackId),t.abrupt("return");case 4:return t.prev=4,t.next=7,n.play();case 7:this.state.autoplayFailed=!1,this.autoPausedTracks.delete(e),dn.d(this.TAG,"Played track",e.trackId),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(4),this.autoPausedTracks.add(e),dn.e(this.TAG,"Failed to play track",e.trackId,t.t0),r=t.t0,this.state.autoplayFailed||"NotAllowedError"!==r.name||(this.state.autoplayFailed=!0,(i=Sn.AutoplayBlocked(gn.AUTOPLAY,"")).addNativeError(r),this.eventBus.analytics.publish(Pi.autoplayError()),this.eventBus.autoplayError.publish(i));case 17:case"end":return t.stop()}}),t,this,[[4,12]])})))}}]),e}(),ba=function(){function e(t,n){var r=this;p(this,e),this.store=t,this.eventBus=n,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.hasWebcamPermission=!1,this.hasMicrophonePermission=!1,this.TAG="[Device Manager]:",this.initialized=!1,this.videoInputChanged=!1,this.audioInputChanged=!1,this.updateOutputDevice=function(e){var t=r.audioOutput.find((function(t){return t.deviceId===e}));return t&&(r.outputDevice=t,r.store.updateAudioOutputDevice(t),vi.updateSelection("audioOutput",{deviceId:t.deviceId,groupId:t.groupId})),t},this.getCurrentSelection=function(){var e,t,n=r.store.getLocalPeer(),i=r.createIdentifier(null==(e=null==n?void 0:n.audioTrack)?void 0:e.getMediaTrackSettings()),a=r.createIdentifier(null==(t=null==n?void 0:n.videoTrack)?void 0:t.getMediaTrackSettings()),o=r.audioInput.find((function(e){return r.createIdentifier(e)===i})),s=r.videoInput.find((function(e){return r.createIdentifier(e)===a}));return{audioInput:o,videoInput:s,audioOutput:r.outputDevice}},this.computeChange=function(e,t){return e.length!==t.length||t.some((function(t){return!e.includes(r.createIdentifier(t))}))},this.enumerateDevices=function(){return rn(r,null,f().mark((function e(){var t,n,r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:t=e.sent,n=this.videoInput.map(this.createIdentifier),r=this.audioInput.map(this.createIdentifier),this.audioInput=[],this.audioOutput=[],this.videoInput=[],t.forEach((function(e){"audioinput"===e.kind&&e.label?(i.hasMicrophonePermission=!0,i.audioInput.push(e)):"audiooutput"===e.kind?i.audioOutput.push(e):"videoinput"===e.kind&&e.label&&(i.hasWebcamPermission=!0,i.videoInput.push(e))})),this.videoInputChanged=this.computeChange(n,this.videoInput),this.audioInputChanged=this.computeChange(r,this.audioInput),vi.setDevices({videoInput:h(this.videoInput),audioInput:h(this.audioInput),audioOutput:h(this.audioOutput)}),this.logDevices("Enumerate Devices"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),dn.e(this.TAG,"Failed enumerating devices",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})))},this.handleDeviceChange=function(){return rn(r,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices();case 2:return this.eventBus.analytics.publish(Pi.deviceChange({selection:this.getCurrentSelection(),type:"list",devices:this.getDevices()})),this.logDevices("After Device Change"),t=this.store.getLocalPeer(),this.setOutputDevice(!0),e.next=8,this.handleAudioInputDeviceChange(null==t?void 0:t.audioTrack);case 8:return e.next=10,this.handleVideoInputDeviceChange(null==t?void 0:t.videoTrack);case 10:case"end":return e.stop()}}),e,this)})))},this.handleAudioInputDeviceChange=function(e){return rn(r,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return dn.d(this.TAG,"No Audio track on local peer"),t.abrupt("return");case 3:if(this.audioInputChanged){t.next=6;break}return dn.d(this.TAG,"No Change in AudioInput Device"),t.abrupt("return");case 6:if((n=this.getNewAudioInputDevice())&&n.deviceId){t.next=10;break}return dn.w(this.TAG,"Audio device not found"),t.abrupt("return");case 10:return r=e.settings,i=(new Ar).codec(r.codec).maxBitrate(r.maxBitrate).deviceId(n.deviceId).build(),t.prev=11,t.next=14,e.setSettings(i,!0);case 14:this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:n,type:"audioInput"}),this.logDevices("Audio Device Change Success"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),dn.e(this.TAG,"[Audio Device Change]",t.t0),this.eventBus.analytics.publish(Pi.deviceChange({selection:{audioInput:n},devices:this.getDevices(),error:t.t0})),this.eventBus.deviceChange.publish({error:t.t0,selection:n,type:"audioInput",devices:this.getDevices()});case 21:case"end":return t.stop()}}),t,this,[[11,18]])})))},this.handleVideoInputDeviceChange=function(e){return rn(r,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return dn.d(this.TAG,"No video track on local peer"),t.abrupt("return");case 3:if(this.videoInputChanged){t.next=6;break}return dn.d(this.TAG,"No Change in VideoInput Device"),t.abrupt("return");case 6:if((n=this.videoInput[0])&&n.deviceId){t.next=10;break}return dn.w(this.TAG,"Video device not found"),t.abrupt("return");case 10:return r=e.settings,i=(new Or).codec(r.codec).maxBitrate(r.maxBitrate).maxFramerate(r.maxFramerate).setWidth(r.width).setHeight(r.height).deviceId(n.deviceId).build(),t.prev=11,t.next=14,e.setSettings(i,!0);case 14:this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:n,type:"video"}),this.logDevices("Video Device Change Success"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),dn.e(this.TAG,"[Video Device Change]",t.t0),this.eventBus.analytics.publish(Pi.deviceChange({selection:{videoInput:n},devices:this.getDevices(),error:t.t0})),this.eventBus.deviceChange.publish({error:t.t0,type:"video",selection:n,devices:this.getDevices()});case 21:case"end":return t.stop()}}),t,this,[[11,18]])})))};var i=function(e){var t=e.enabled,n=e.track;return t&&"regular"===n.source};this.eventBus.localVideoEnabled.waitFor(i).then((function(){return rn(r,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices();case 2:this.videoInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()});case 3:case"end":return e.stop()}}),e,this)})))})),this.eventBus.localAudioEnabled.waitFor(i).then((function(){return rn(r,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices();case 2:this.audioInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()});case 3:case"end":return e.stop()}}),e,this)})))}))}return m(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.initialized&&!e,t.t0){t.next=10;break}return!this.initialized&&navigator.mediaDevices.addEventListener("devicechange",this.handleDeviceChange),this.initialized=!0,t.next=6,this.enumerateDevices();case 6:this.logDevices("Init"),this.setOutputDevice(),this.eventBus.deviceChange.publish({devices:this.getDevices()}),this.eventBus.analytics.publish(Pi.deviceChange({selection:this.getCurrentSelection(),type:"list",devices:this.getDevices()}));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getDevices",value:function(){return{audioInput:this.audioInput,audioOutput:this.audioOutput,videoInput:this.videoInput}}},{key:"cleanUp",value:function(){this.initialized=!1,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.outputDevice=void 0,navigator.mediaDevices.removeEventListener("devicechange",this.handleDeviceChange)}},{key:"createIdentifier",value:function(e){return e?"".concat(e.deviceId).concat(e.groupId):""}},{key:"getNewAudioInputDevice",value:function(){var e=this.audioInput.find((function(e){return"default"===e.deviceId}));return e?this.audioInput.find((function(t){return t.label!==e.label&&e.label.includes(t.label)})):this.audioInput[0]}},{key:"setOutputDevice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getNewAudioInputDevice(),n=this.createIdentifier(this.outputDevice);this.outputDevice=void 0,(null==t?void 0:t.groupId)&&(this.outputDevice=this.audioOutput.find((function(e){return"default"!==t.deviceId&&e.label===t.label}))),this.outputDevice||(this.outputDevice=this.audioOutput.find((function(e){return"default"===e.deviceId}))||this.audioOutput[0]),this.store.updateAudioOutputDevice(this.outputDevice),e&&n!==this.createIdentifier(this.outputDevice)&&this.eventBus.deviceChange.publish({selection:this.outputDevice,type:"audioOutput",devices:this.getDevices()})}},{key:"logDevices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";dn.d(this.TAG,e,JSON.stringify({videoInput:h(this.videoInput),audioInput:h(this.audioInput),audioOutput:h(this.audioOutput),selected:this.getCurrentSelection()},null,4))}}]),e}(),wa=function(){function e(t,n){p(this,e),this.deviceManager=t,this.audioSinkManager=n}return m(e,[{key:"getVolume",value:function(){return this.audioSinkManager.getVolume()}},{key:"setVolume",value:function(e){if(e<0||e>100)throw Error("Please pass a valid number between 0-100");this.audioSinkManager.setVolume(e)}},{key:"getDevice",value:function(){return this.deviceManager.outputDevice}},{key:"setDevice",value:function(e){return this.deviceManager.updateOutputDevice(e)}},{key:"unblockAutoplay",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.audioSinkManager.unblockAutoplay();case 2:case"end":return e.stop()}}),e,this)})))}}]),e}(),Sa="AnalyticsEventsService",Ta=function(){function e(t){p(this,e),this.store=t,this.bufferSize=100,this.transport=null,this.pendingEvents=[],this.level=ai.INFO}return m(e,[{key:"setTransport",value:function(e){this.transport=e}},{key:"reset",value:function(){this.transport=null,this.pendingEvents=[]}},{key:"queue",value:function(e){if(e.level>=this.level&&(this.pendingEvents.push(e),this.pendingEvents.length>this.bufferSize)){var t=this.pendingEvents.shift();dn.d(Sa,"Max buffer size reached","Removed event to accommodate new events",t)}return this}},{key:"flushFailedClientEvents",value:function(){$i.flushFailedEvents()}},{key:"flush",value:function(){var e;try{for(;this.pendingEvents.length>0;){var t=this.pendingEvents.shift();t&&(t.metadata.peer.peer_id=null==(e=this.store.getLocalPeer())?void 0:e.peerId,this.transport&&this.transport.transportProvider.isConnected?this.transport.sendEvent(t):this.sendClientEventOnHTTP(t))}}catch(b){dn.w(Sa,"Flush Failed",b)}}},{key:"sendClientEventOnHTTP",value:function(e){var t,n,r,i,a=this.store.getRoom(),o=this.store.getLocalPeer();e.metadata.token=null==(t=this.store.getConfig())?void 0:t.authToken,e.metadata.peer={session_id:a.sessionId,room_id:a.id,room_name:a.name,template_id:a.templateId,joined_at:null==(n=a.joinedAt)?void 0:n.getTime(),session_started_at:null==(r=a.startedAt)?void 0:r.getTime(),role:null==(i=null==o?void 0:o.role)?void 0:i.name,user_name:null==o?void 0:o.name,user_data:null==o?void 0:o.metadata},$i.sendEvent(e)}}]),e}(),Ea=function(){function e(t){p(this,e),this.store=t,this.primitiveComparator=function(e,t){return e===t?0:Number(e)-Number(t)},this.stringComparator=function(e,t){return e===t?0:e<t?-1:1}}return m(e,[{key:"getPeerComparators",value:function(){var e=this;return{videoEnabled:function(t,n){var r,i;return e.primitiveComparator(Boolean(null==(r=t.videoTrack)?void 0:r.enabled),Boolean(null==(i=n.videoTrack)?void 0:i.enabled))},audioEnabled:function(t,n){var r,i;return e.primitiveComparator(Boolean(null==(r=t.audioTrack)?void 0:r.enabled),Boolean(null==(i=n.audioTrack)?void 0:i.enabled))},screenShare:function(t,n){return e.primitiveComparator(t.auxiliaryTracks.some((function(e){return"screen"===e.source})),n.auxiliaryTracks.some((function(e){return"screen"===e.source})))},audioLevel:function(t,n){var r,i;return e.primitiveComparator((null==(r=e.store.getSpeakers().find((function(e){return e.peer&&e.peer.peerId===(null==t?void 0:t.peerId)})))?void 0:r.audioLevel)||-1,(null==(i=e.store.getSpeakers().find((function(e){return e.peer&&e.peer.peerId===(null==n?void 0:n.peerId)})))?void 0:i.audioLevel)||-1)},rolePriority:function(t,n){var r,i;return e.primitiveComparator((null==(r=t.role)?void 0:r.priority)||0,(null==(i=n.role)?void 0:i.priority)||0)}}}},{key:"getTrackComparators",value:function(){var e=this;return{video:function(t,n){return e.primitiveComparator(t.type===Dn.VIDEO,n.type===Dn.VIDEO)},audio:function(t,n){return e.primitiveComparator(t.type===Dn.AUDIO,n.type===Dn.AUDIO)},enabled:function(t,n){return e.primitiveComparator(Boolean(t.enabled),Boolean(n.enabled))},peerAudioLevel:function(t,n){var r=e.store.getPeerByTrackId(t.trackId),i=e.store.getPeerByTrackId(n.trackId);return e.getPeerComparators().audioLevel(r,i)},audioLevel:function(t,n){var r,i;return e.primitiveComparator((null==(r=e.store.getSpeakers().find((function(e){return e.track.trackId===t.trackId})))?void 0:r.audioLevel)||0,(null==(i=e.store.getSpeakers().find((function(e){return e.track.trackId===n.trackId})))?void 0:i.audioLevel)||0)},screenShare:function(t,n){return e.primitiveComparator("screen"===t.source,"screen"===n.source)},rolePriority:function(t,n){var r,i,a,o;return e.primitiveComparator((null==(i=null==(r=e.store.getPeerByTrackId(t.trackId))?void 0:r.role)?void 0:i.priority)||0,(null==(o=null==(a=e.store.getPeerByTrackId(n.trackId))?void 0:a.role)?void 0:o.priority)||0)}}}}]),e}(),xa=function(){function e(){p(this,e),this.comparator=new Ea(this),this.knownRoles={},this.peers={},this.tracks={},this.peerTrackStates={},this.speakers=[],this.videoLayers=null,this.screenshareLayers=null,this.roleDetailsArrived=!1,this.env=Wi.PROD}return m(e,[{key:"getConfig",value:function(){return this.config}},{key:"getEnv",value:function(){return this.env}},{key:"getPublishParams",value:function(){return this.publishParams}},{key:"getComparator",value:function(){return this.comparator}},{key:"getRoom",value:function(){return this.room}},{key:"getPolicyForRole",value:function(e){return this.knownRoles[e]}},{key:"getKnownRoles",value:function(){return this.knownRoles}},{key:"getLocalPeer",value:function(){if(this.localPeerId&&this.peers[this.localPeerId])return this.peers[this.localPeerId]}},{key:"getRemotePeers",value:function(){return Object.values(this.peers).filter((function(e){return!e.isLocal}))}},{key:"getPeers",value:function(){return Object.values(this.peers)}},{key:"getPeerById",value:function(e){if(this.peers[e])return this.peers[e]}},{key:"getTracksMap",value:function(){return this.tracks}},{key:"getTracks",value:function(){return Object.values(this.tracks)}},{key:"getVideoTracks",value:function(){return this.getTracks().filter((function(e){return e.type===Dn.VIDEO}))}},{key:"getRemoteVideoTracks",value:function(){return this.getTracks().filter((function(e){return e instanceof dr}))}},{key:"getAudioTracks",value:function(){return this.getTracks().filter((function(e){return e.type===Dn.AUDIO}))}},{key:"getPeerTracks",value:function(e){var t=e?this.peers[e]:void 0,n=[];return(null==t?void 0:t.videoTrack)&&n.push(t.videoTrack),(null==t?void 0:t.audioTrack)&&n.push(t.audioTrack),n.concat((null==t?void 0:t.auxiliaryTracks)||[])}},{key:"getLocalPeerTracks",value:function(){return this.getPeerTracks(this.localPeerId)}},{key:"getTrackById",value:function(e){var t,n,r=this.tracks[e];if(r)return r;var i=this.getLocalPeer();if(i){if(null==(t=i.audioTrack)?void 0:t.isPublishedTrackId(e))return i.audioTrack;if(null==(n=i.videoTrack)?void 0:n.isPublishedTrackId(e))return i.videoTrack}}},{key:"getPeerByTrackId",value:function(e){var t=this.tracks[e];return t.peerId?this.peers[t.peerId]:void 0}},{key:"getSpeakers",value:function(){return this.speakers}},{key:"getSpeakerPeers",value:function(){return this.speakers.map((function(e){return e.peer}))}},{key:"setRoom",value:function(e){this.room=e}},{key:"setKnownRoles",value:function(e){this.knownRoles=e,this.roleDetailsArrived=!0,this.updatePeersPolicy()}},{key:"hasRoleDetailsArrived",value:function(){return this.roleDetailsArrived}},{key:"setConfig",value:function(e){var t,n,r;if(vi.rememberDevices(Boolean(e.rememberDeviceSelection)),e.rememberDeviceSelection){var i=vi.getSelection();i&&(e.settings||(e.settings={}),(null==(t=i.audioInput)?void 0:t.deviceId)&&(e.settings.audioInputDeviceId=e.settings.audioInputDeviceId||i.audioInput.deviceId),(null==(n=i.audioOutput)?void 0:n.deviceId)&&(e.settings.audioOutputDeviceId=e.settings.audioOutputDeviceId||i.audioOutput.deviceId),(null==(r=i.videoInput)?void 0:r.deviceId)&&(e.settings.videoDeviceId=e.settings.videoDeviceId||i.videoInput.deviceId))}this.config=e,this.setEnv()}},{key:"setPublishParams",value:function(e){this.publishParams=e}},{key:"addPeer",value:function(e){this.peers[e.peerId]=e,e.isLocal&&(this.localPeerId=e.peerId)}},{key:"addTrack",value:function(e){this.tracks[e.trackId]=e}},{key:"getTrackState",value:function(e){return this.peerTrackStates[e]}},{key:"setTrackState",value:function(e){this.peerTrackStates[e.trackInfo.track_id]=e}},{key:"removePeer",value:function(e){this.localPeerId===e&&(this.localPeerId=void 0),delete this.peers[e]}},{key:"removeTrack",value:function(e){delete this.tracks[e]}},{key:"updateSpeakers",value:function(e){this.speakers=e}},{key:"updateAudioOutputVolume",value:function(e){this.getAudioTracks().forEach((function(t){return t.setVolume(e)}))}},{key:"updateAudioOutputDevice",value:function(e){this.getAudioTracks().forEach((function(t){t.setOutputDevice(e)}))}},{key:"getSubscribeDegradationParams",value:function(){var e,t,n=null==(t=null==(e=this.getLocalPeer())?void 0:e.role)?void 0:t.subscribeParams.subscribeDegradation;if(n&&Object.keys(n).length>0)return n}},{key:"getSimulcastLayers",value:function(e){var t,n;return"screen"===e?(null==(t=this.screenshareLayers)?void 0:t.layers)||[]:(null==(n=this.videoLayers)?void 0:n.layers)||[]}},{key:"getSimulcastDimensions",value:function(e){var t="screen"===e?this.screenshareLayers:this.videoLayers;return{width:null==t?void 0:t.width,height:null==t?void 0:t.height}}},{key:"convertSimulcastLayers",value:function(e){return tn(en({},e),{layers:(e.layers||[]).map((function(e){return tn(en({},e),{maxBitrate:1e3*e.maxBitrate})}))})}},{key:"setVideoSimulcastLayers",value:function(e){this.videoLayers=this.convertSimulcastLayers(e)}},{key:"setScreenshareSimulcastLayers",value:function(e){this.screenshareLayers=this.convertSimulcastLayers(e)}},{key:"getSimulcastDefinitionsForPeer",value:function(e,t){var n;if(!e.role)return[];var r,i=this.getPolicyForRole(e.role.name).publishParams;"regular"===t?r=i.videoSimulcastLayers:"screen"===t&&(r=i.screenSimulcastLayers);var a=null==r?void 0:r.width,o=null==r?void 0:r.height;return(null==(n=null==r?void 0:r.layers)?void 0:n.map((function(e){return{layer:mn[e.rid],resolution:{width:a&&e.scaleResolutionDownBy?a/e.scaleResolutionDownBy:void 0,height:o&&e.scaleResolutionDownBy?o/e.scaleResolutionDownBy:void 0}}})))||[]}},{key:"cleanUp",value:function(){var e,t=g(this.getTracks());try{for(t.s();!(e=t.n()).done;){e.value.cleanup()}}catch(n){t.e(n)}finally{t.f()}this.room=void 0,this.config=void 0,this.localPeerId=void 0,this.roleDetailsArrived=!1}},{key:"setErrorListener",value:function(e){this.errorListener=e}},{key:"updatePeersPolicy",value:function(){var e=this;this.getPeers().forEach((function(t){var n;t.role?t.role=e.getPolicyForRole(t.role.name):null==(n=e.errorListener)||n.onError(xn.InvalidRole(gn.VALIDATION,""))}))}},{key:"setEnv",value:function(){var e,t=(null==(e=this.config)?void 0:e.initEndpoint).split("https://")[1],n=Wi.PROD;t.startsWith(Wi.PROD)?n=Wi.PROD:t.startsWith(Wi.QA)?n=Wi.QA:t.startsWith(Wi.DEV)&&(n=Wi.DEV),this.env=n,$i.setEnv(n)}}]),e}(),Ca=function(){function e(t,n,r,i,a){var o=this;p(this,e),this.store=t,this.transport=n,this.publish=r,this.removeAuxiliaryTrack=i,this.listener=a,this.handleLocalPeerRoleUpdate=function(e){return rn(o,[e],f().mark((function e(t){var n,r,i,a,o,s,c,u,l,d,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldRole,r=t.newRole,o=this.store.getLocalPeer()){e.next=4;break}return e.abrupt("return");case 4:return s=new Set(n.publishParams.allowed||[]),c=new Set(r.publishParams.allowed||[]),u=this.removeTrack(s,c,"video"),l=this.removeTrack(s,c,"audio"),d=this.removeTrack(s,c,"screen"),e.next=7,this.removeVideoTracks(u);case 7:return e.next=9,this.removeAudioTrack(l);case 9:return e.next=11,this.removeScreenTracks(d);case 11:return this.store.setPublishParams(r.publishParams),h=(null==(i=this.store.getConfig())?void 0:i.settings)||{isAudioMuted:!0,isVideoMuted:!0,audioInputDeviceId:"default",videoDeviceId:"default",audioOutputDeviceId:"default"},e.next=15,this.publish(tn(en({},h),{isAudioMuted:!0,isVideoMuted:!0}));case 15:null==(a=this.listener)||a.onPeerUpdate(on.ROLE_UPDATED,o);case 16:case"end":return e.stop()}}),e,this)})))}}return m(e,[{key:"removeVideoTracks",value:function(e){return rn(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(r=this.store.getLocalPeer(),t.t0=null==r?void 0:r.videoTrack,!t.t0){t.next=9;break}return t.next=7,this.transport.unpublish([r.videoTrack]);case 7:null==(n=this.listener)||n.onTrackUpdate(sn.TRACK_REMOVED,r.videoTrack,r),r.videoTrack=void 0;case 9:return t.next=11,this.removeAuxTracks((function(e){return"screen"!==e.source&&"video"===e.type}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"removeAudioTrack",value:function(e){return rn(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(r=this.store.getLocalPeer(),t.t0=null==r?void 0:r.audioTrack,!t.t0){t.next=9;break}return t.next=7,this.transport.unpublish([r.audioTrack]);case 7:null==(n=this.listener)||n.onTrackUpdate(sn.TRACK_REMOVED,r.audioTrack,r),r.audioTrack=void 0;case 9:return t.next=11,this.removeAuxTracks((function(e){return"screen"!==e.source&&"audio"===e.type}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"removeScreenTracks",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=!e,t.t0){t.next=4;break}return t.next=4,this.removeAuxTracks((function(e){return"screen"===e.source}));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"removeAuxTracks",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==(n=this.store.getLocalPeer())?void 0:n.auxiliaryTracks)){t.next=22;break}r=h(n.auxiliaryTracks),i=g(r),t.prev=4,i.s();case 6:if((a=i.n()).done){t.next=14;break}if(o=a.value,t.t0=e(o),!t.t0){t.next=12;break}return t.next=12,this.removeAuxiliaryTrack(o.trackId);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(4),i.e(t.t1);case 19:return t.prev=19,i.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[4,16,19,22]])})))}},{key:"removeTrack",value:function(e,t,n){return e.has(n)&&!t.has(n)}}]),e}(),Pa=function(e){Ee(n,e);var t=Pe(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"on",value:function(e,t){return we(ke(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){return we(ke(n.prototype),"off",this).call(this,e,t)}},{key:"emit",value:function(e,t){return we(ke(n.prototype),"emit",this).call(this,e,t)}},{key:"listeners",value:function(e){return we(ke(n.prototype),"listeners",this).call(this,e)}}]),n}(Kt.EventEmitter2),Ra=function(){function e(t){p(this,e),this.audioContext=new AudioContext,this.source=this.audioContext.createMediaElementSource(t),this.source.connect(this.audioContext.destination)}return m(e,[{key:"resumeContext",value:function(){"suspended"===this.audioContext.state&&(dn.d(this.TAG,"AudioContext is resumed"),this.audioContext.resume())}},{key:"getAudioTrack",value:function(){return this.destinationNode&&this.source.disconnect(this.destinationNode),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.source.connect(this.destinationNode),this.destinationNode.stream.getAudioTracks()[0]}},{key:"cleanup",value:function(){"closed"!==this.audioContext.state&&this.audioContext.close()}},{key:"TAG",get:function(){return"AudioContextManager"}}]),e}(),_a=function(e){Ee(n,e);var t=Pe(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).audioElement=null,e.seeked=!1,e}return m(n,[{key:"play",value:function(e){return rn(this,null,f().mark((function t(){var n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.audioElement=this.getAudioElement(),new Promise((function(t,r){n.audioElement=n.getAudioElement(),n.audioElement.src=e,n.seeked=!1,n.audioElement.onerror=function(){var t="Error loading ".concat(e);dn.e(n.TAG,t),n.stop(),r(t)},n.audioElement.oncanplaythrough=function(){return rn(n,null,f().mark((function n(){var i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,this.audioElement){n.next=3;break}return n.abrupt("return");case 3:if(this.audioContextManager.resumeContext(),!this.track){n.next=13;break}if(!this.seeked){n.next=8;break}this.seeked=!1,n.next=11;break;case 8:return n.next=10,this.audioElement.play();case 10:t([this.track]);case 11:n.next=17;break;case 13:return n.next=15,this.audioElement.play();case 15:i=this.audioContextManager.getAudioTrack(),this.track=i,t([i]);case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),dn.e(this.TAG,"Error playing audio",e,n.t0.message),r(n.t0);case 22:case"end":return n.stop()}}),n,this,[[0,19]])})))},n.audioElement.onseeked=function(){n.seeked=!0}}))));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getTracks",value:function(){return this.track?[this.track.id]:[]}},{key:"getElement",value:function(){return this.audioElement}},{key:"stop",value:function(){var e,t,n;null==(e=this.audioElement)||e.pause(),null==(t=this.audioElement)||t.removeAttribute("src"),this.audioElement=null,null==(n=this.audioContextManager)||n.cleanup(),this.track=void 0}},{key:"getAudioElement",value:function(){var e=this;if(this.audioElement)return this.audioElement;var t=document.createElement("audio");return t.crossOrigin="anonymous",t.addEventListener("timeupdate",(function(t){return e.emit("progress",t)})),t.addEventListener("ended",(function(){e.emit("ended",null)})),this.audioContextManager=new Ra(t),t}},{key:"TAG",get:function(){return"PlaylistAudioManager"}}]),n}(Pa),Aa=function(e){Ee(n,e);var t=Pe(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).videoElement=null,e.canvasContext=null,e.tracks=[],e.DEFAUL_FPS=24,e.seeked=!1,e.drawImage=function(){var t,n,r;e.videoElement&&!e.videoElement.paused&&!e.videoElement.ended&&(null==(r=e.canvasContext)||r.drawImage(e.videoElement,0,0,null==(t=e.canvas)?void 0:t.width,null==(n=e.canvas)?void 0:n.height),e.timer=setTimeout((function(){e.drawImage()}),1e3/e.DEFAUL_FPS))},e}return m(n,[{key:"play",value:function(e){var t=this;return this.videoElement=this.getVideoElement(),this.createCanvas(),new Promise((function(n,r){t.videoElement=t.getVideoElement(),t.videoElement.src=e,t.seeked=!1,t.videoElement.onerror=function(){var n="Error loading ".concat(e);dn.e(t.TAG,n),t.stop(),r(n)},t.videoElement.oncanplaythrough=function(){return rn(t,null,f().mark((function t(){var i,a,o,s,c,u=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.videoElement){t.next=3;break}return t.abrupt("return");case 3:if(this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,0!==this.tracks.length){t.next=17;break}if(this.clearCanvasAndTracks(),s=this.canvas.captureStream()){t.next=9;break}return dn.e(this.TAG,"Browser does not support captureStream"),t.abrupt("return");case 9:return this.videoElement.onplay=this.drawImage,this.audioContextManager.resumeContext(),t.next=13,this.videoElement.play();case 13:c=this.audioContextManager.getAudioTrack(),s.addTrack(c),s.getTracks().forEach((function(e){u.tracks.push(e)})),n(this.tracks),t.next=24;break;case 17:if(!this.seeked){t.next=21;break}this.seeked=!1,null==(o=this.canvasContext)||o.drawImage(this.videoElement,0,0,null==(i=this.canvas)?void 0:i.width,null==(a=this.canvas)?void 0:a.height),t.next=24;break;case 21:return t.next=23,this.videoElement.play();case 23:n(this.tracks);case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),dn.e(this.TAG,"Error playing video",e,t.t0.message),r(t.t0);case 29:case"end":return t.stop()}}),t,this,[[0,26]])})))},t.videoElement.onseeked=function(){t.seeked=!0}}))}},{key:"getTracks",value:function(){return this.tracks.map((function(e){return e.id}))}},{key:"getElement",value:function(){return this.videoElement}},{key:"stop",value:function(){var e,t,n;null==(e=this.videoElement)||e.pause(),null==(t=this.videoElement)||t.removeAttribute("src"),this.videoElement=null,null==(n=this.audioContextManager)||n.cleanup(),this.clearCanvasAndTracks()}},{key:"clearCanvasAndTracks",value:function(){var e;this.tracks=[],null==(e=this.canvasContext)||e.clearRect(0,0,this.canvas.width,this.canvas.height),clearTimeout(this.timer)}},{key:"getVideoElement",value:function(){var e=this;if(this.videoElement)return this.videoElement;var t=document.createElement("video");return t.crossOrigin="anonymous",t.addEventListener("timeupdate",(function(t){return e.emit("progress",t)})),t.addEventListener("ended",(function(){e.emit("ended",null)})),this.audioContextManager=new Ra(t),t}},{key:"createCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.canvasContext=this.canvas.getContext("2d"))}},{key:"TAG",get:function(){return"PlaylistVideoManager"}}]),n}(Pa),Ia={list:[],currentIndex:-1,isAutoplayOn:!0},Oa={list:[],currentIndex:-1,isAutoplayOn:!0},Na=function(e){Ee(n,e);var t=Pe(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).sdk=e,i.eventBus=r,i.state={audio:en({},Ia),video:en({},Oa)},i.handlePausePlaylist=function(e){return rn(Se(i),[e],f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.enabled,r=t.track,!n){e.next=3;break}return e.abrupt("return");case 3:"audioplaylist"===r.source&&(a=pn.audio),"videoplaylist"===r.source&&(a=pn.video),a&&(null==(i=this.getElement(a))||i.pause());case 4:case"end":return e.stop()}}),e,this)})))},i.addTrack=function(e,t){return rn(Se(i),null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sdk.addTrack(e,t);case 2:dn.d(this.TAG,"Playlist track added",e);case 3:case"end":return n.stop()}}),n,this)})))},i.removeTrack=function(e){return rn(Se(i),null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.removeTrack(e);case 2:dn.d(this.TAG,"Playlist track removed",e);case 3:case"end":return t.stop()}}),t,this)})))},i.audioManager=new _a,i.videoManager=new Aa,i.addListeners(),i}return m(n,[{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio;return this.state[e].list}},{key:"setList",value:function(e){var t=this;e&&0!==e.length?e.forEach((function(e){t.state[e.type].list.includes(e)||t.state[e.type].list.push(e)})):dn.w(this.TAG,"Please pass in a list of HMSPlaylistItem's")}},{key:"clearList",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.isPlaying(e),!t.t0){t.next=4;break}return t.next=4,this.stop(e);case 4:this.state[e].list=[];case 5:case"end":return t.stop()}}),t,this)})))}},{key:"removeItem",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.state[t],i=r.list,a=r.currentIndex,o=i.findIndex((function(t){return e===t.id})),!(o>-1)){n.next=10;break}if(n.t1=a===o&&this.isPlaying(t),!n.t1){n.next=6;break}return n.next=6,this.stop(t);case 6:i.splice(o,1),n.t0=!0,n.next=11;break;case 10:n.t0=!1;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}}),n,this)})))}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn.audio,n=this.state[t].currentIndex;if(-1===n)throw Pn.NoEntryToPlay(gn.PLAYLIST,"No item is currently playing");var r=this.getElement(t);if(r){var i=Math.max(r.currentTime+e,0);r.currentTime=Math.min(i,r.duration)}}},{key:"seekTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn.audio,n=this.state[t].currentIndex;if(-1===n)throw Pn.NoEntryToPlay(gn.PLAYLIST,"No item is currently playing");if(e<0)throw Error("value cannot be negative");var r=this.getElement(t);r&&(r.currentTime=Math.min(e,r.duration))}},{key:"setVolume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn.audio;if(e<0||e>100)throw Error("Please pass a valid number between 0-100");var n=this.getElement(t);n&&(n.volume=.01*e)}},{key:"getVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=this.getElement(e);return t?100*t.volume:0}},{key:"getCurrentTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=this.getElement(e);return(null==t?void 0:t.currentTime)||0}},{key:"getCurrentIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio;return this.state[e].currentIndex}},{key:"getCurrentProgress",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,n=this.state[t],r=n.list,i=n.currentIndex,a=null==(e=r[i])?void 0:e.url,o=this.getElement(t);return a&&o?Math.floor(o.currentTime/o.duration*100):0}},{key:"getCurrentSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=this.state[e],n=t.list,r=t.currentIndex;if(-1!==r)return n[r]}},{key:"isPlaying",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=this.getElement(e);return!!t&&!t.paused}},{key:"setIsAutoplayOn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=arguments.length>1?arguments[1]:void 0;this.state[e].isAutoplayOn=t}},{key:"getPlaybackRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=this.getElement(e);return t?t.playbackRate:1}},{key:"setPlaybackRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=arguments.length>1?arguments[1]:void 0;if(t<.25||t>2)throw Error("Please pass a value between 0.25 and 2.0");var n=this.getElement(e);n&&(n.playbackRate=t)}},{key:"setEnabled",value:function(e,t){return rn(this,arguments,f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,i=n.type,a=void 0===i?pn.audio:i,o=this.state[a].list.findIndex((function(e){return e.id===r})),r&&-1!==o){e.next=5;break}return dn.w(this.TAG,"Pass a valid id"),e.abrupt("return");case 5:if(s=this.state[a].list[o].url,!t){e.next=11;break}return e.next=9,this.play(s,a);case 9:e.next=13;break;case 11:return e.next=13,this.pause(s,a);case 13:this.state[a].currentIndex=o,this.setDuration(a);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"playNext",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:pn.audio,n=this.state[t],r=n.list,!((i=n.currentIndex)>=r.length-1)){e.next=4;break}throw Pn.NoEntryToPlay(gn.PLAYLIST,"Reached end of playlist");case 4:return e.next=6,this.play(r[i+1].url,t);case 6:this.state[t].currentIndex=i+1,this.setDuration(t);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"playPrevious",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:pn.audio,n=this.state[t],r=n.list,!((i=n.currentIndex)<=0)){e.next=4;break}throw Pn.NoEntryToPlay(gn.PLAYLIST,"Reached start of playlist");case 4:return e.next=6,this.play(r[i-1].url,t);case 6:this.state[t].currentIndex=i-1,this.setDuration(t);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:pn.audio,r=t===pn.audio?this.audioManager:this.videoManager,null==(n=r.getElement())||n.pause(),e.next=5,this.removeTracks(t);case 5:r.stop(),this.state[t].currentIndex=-1;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){this.state={audio:en({},Ia),video:en({},Oa)},this.eventBus.localAudioEnabled.unsubscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.unsubscribe(this.handlePausePlaylist),this.audioManager.stop(),this.videoManager.stop()}},{key:"onProgress",value:function(e){var t=this;this.videoManager.on("progress",(function(){try{e({type:pn.video,progress:t.getCurrentProgress(pn.video)})}catch(b){dn.e(t.TAG,"Error in onProgress callback")}})),this.audioManager.on("progress",(function(){try{e({type:pn.audio,progress:t.getCurrentProgress(pn.audio)})}catch(b){dn.e(t.TAG,"Error in onProgress callback")}}))}},{key:"onNewTrackStart",value:function(e){this.on("newTrackStart",e)}},{key:"onPlaylistEnded",value:function(e){this.on("playlistEnded",e)}},{key:"onCurrentTrackEnded",value:function(e){this.on("currentTrackEnded",e)}},{key:"getElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio;return e===pn.audio?this.audioManager.getElement():this.videoManager.getElement()}},{key:"removeTracks",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i,a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:pn.audio,n=(t===pn.audio?this.audioManager:this.videoManager).getTracks(),r=g(n),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=11;break}return a=i.value,e.next=9,this.removeTrack(a);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})))}},{key:"play",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i,a,o,s,c,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:pn.audio,r=n===pn.audio?this.audioManager:this.videoManager,i=r.getElement(),!this.isItemCurrentlyPlaying(t,n)){e.next=5;break}return dn.w(this.TAG,"The ".concat(n," is currently playing")),e.abrupt("return");case 5:if(!(null==i?void 0:i.src.includes(t))){e.next=10;break}return e.next=8,i.play();case 8:e.next=31;break;case 10:return null==i||i.pause(),e.next=13,r.play(t);case 13:a=e.sent,o=g(a),e.prev=15,o.s();case 17:if((s=o.n()).done){e.next=23;break}return c=s.value,e.next=21,this.addTrack(c,n===pn.audio?"audioplaylist":"videoplaylist");case 21:e.next=17;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(15),o.e(e.t0);case 28:return e.prev=28,o.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[15,25,28,31]])})))}},{key:"isItemCurrentlyPlaying",value:function(e,t){var n=this.getElement(t);return!(!n||n.paused||!n.src.includes(e))}},{key:"setDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn.audio,t=this.getElement(e),n=this.state[e],r=n.list,i=n.currentIndex;r[i]&&(r[i].duration=(null==t?void 0:t.duration)||0),this.emit("newTrackStart",r[i])}},{key:"pause",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:pn.audio,(r=this.getElement(n))&&!r.paused&&r.src.includes(t)?(r.pause(),dn.d(this.TAG,"paused url",t)):dn.w(this.TAG,"The passed in url is not currently playing");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"addListeners",value:function(){var e=this;this.audioManager.on("ended",(function(){return e.handleEnded(pn.audio)})),this.videoManager.on("ended",(function(){return e.handleEnded(pn.video)})),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist)}},{key:"handleEnded",value:function(){return rn(this,arguments,f().mark((function e(){var t,n,r,i,a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:pn.audio,n=this.state[t],r=n.list,i=n.currentIndex,a=n.isAutoplayOn,i!==r.length-1){e.next=8;break}return e.next=5,this.stop(t);case 5:this.emit("playlistEnded",t),e.next=14;break;case 8:if(!a){e.next=12;break}this.playNext(t),e.next=14;break;case 12:return e.next=14,this.pause(r[i].url,t);case 14:this.emit("currentTrackEnded",r[i]);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"TAG",get:function(){return"PlaylistManager"}}]),n}(Pa),Da=m((function e(t,n){var r=this;p(this,e),this.eventName=t,this.eventEmitter=n,this.publish=function(e){r.eventEmitter.emit(r.eventName,e)},this.subscribe=function(e){r.eventEmitter.on(r.eventName,e)},this.subscribeOnce=function(e){r.eventEmitter.once(r.eventName,e)},this.unsubscribe=function(e){r.eventEmitter.off(r.eventName,e)},this.waitFor=function(e){return r.eventEmitter.waitFor(r.eventName,{filter:e})},this.removeAllListeners=function(){r.eventEmitter.removeAllListeners(r.eventName)}})),La=m((function e(){p(this,e),this.eventEmitter=new Kt.EventEmitter2,this.deviceChange=new Da(Vn,this.eventEmitter),this.localAudioEnabled=new Da(Bn,this.eventEmitter),this.localVideoEnabled=new Da(zn,this.eventEmitter),this.statsUpdate=new Da(Gn,this.eventEmitter),this.trackDegraded=new Da(Hn,this.eventEmitter),this.trackRestored=new Da(Wn,this.eventEmitter),this.trackAudioLevelUpdate=new Da(Kn,this.eventEmitter),this.audioPluginFailed=new Da(Jn,this.eventEmitter),this.localAudioSilence=new Da(qn,this.eventEmitter),this.analytics=new Da(Qn,this.eventEmitter),this.policyChange=new Da(Yn,this.eventEmitter),this.localRoleUpdate=new Da($n,this.eventEmitter),this.audioTrackUpdate=new Da(Xn,this.eventEmitter),this.audioTrackAdded=new Da(Zn,this.eventEmitter),this.audioTrackRemoved=new Da(er,this.eventEmitter),this.autoplayError=new Da(tr,this.eventEmitter)})),Ma=m((function e(t,n){var r=this;p(this,e),this.eventBus=t,this.listener=n,this.TAG="NetworkTestManager",this.controller=new AbortController,this.start=function(e){return rn(r,null,f().mark((function t(){var n,r,i,a,o,s,c,u,l,d,h,p,v=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return a=e.url,o=e.timeout,s=e.scoreMap,c=this.controller.signal,u=Date.now(),l=0,d=Pr(o).then((function(){v.controller.abort()})),t.prev=3,t.next=6,fetch("".concat(a,"?").concat(Date.now()),{signal:c});case 6:if(t.t0=n=t.sent.body,null!=t.t0){t.next=11;break}t.t1=void 0,t.next=12;break;case 11:t.t1=n.getReader();case 12:if(h=t.t1){t.next=15;break}throw Error("unable to process request");case 15:return p=function(){return rn(v,null,f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=17;break}e.prev=1,t=!1;case 3:if(t){e.next=12;break}return e.next=6,h.read();case 6:n=e.sent,r=n.value,i=n.done,t=i,r&&(l+=r.byteLength,this.sendScore({scoreMap:s,downloadedSize:l,startTime:u}));case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),dn.e(this.TAG,e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})))},t.abrupt("return",Promise.race([p(),d]).then((function(){v.sendScore({scoreMap:s,downloadedSize:l,startTime:u,finished:!0})})).catch((function(e){var t,n;dn.e(v.TAG,e),null==(n=null==(t=v.listener)?void 0:t.onNetworkQuality)||n.call(t,0),v.eventBus.analytics.publish(Pi.previewNetworkQuality({error:e.message}))})));case 19:t.prev=19,t.t2=t.catch(3),dn.e(this.TAG,t.t2),"AbortError"!==t.t2.name&&(null==(i=null==(r=this.listener)?void 0:r.onNetworkQuality)||i.call(r,0),this.eventBus.analytics.publish(Pi.previewNetworkQuality({error:t.t2.message})));case 22:case"end":return t.stop()}}),t,this,[[3,19]])})))},this.stop=function(){r.controller.signal.aborted||r.controller.abort()},this.sendScore=function(e){var t,n,i=e.scoreMap,a=e.downloadedSize,o=e.startTime,s=e.finished,c=void 0!==s&&s,u=a/1024/((Date.now()-o)/1e3)*8,l=-1;for(var d in i){var f=i[d];u>=f.low&&(!f.high||u<=f.high)&&(l=Number(d))}null==(n=null==(t=r.listener)?void 0:t.onNetworkQuality)||n.call(t,l),c&&r.eventBus.analytics.publish(Pi.previewNetworkQuality({score:l,downLink:u.toFixed(2)}))}})),Fa={isAudioMuted:!1,isVideoMuted:!1,audioInputDeviceId:"default",audioOutputDeviceId:"default",videoDeviceId:"default"},Ua={published:!1,isInitialised:!1,isReconnecting:!1,isPreviewInProgress:!1,deviceManagersInitialised:!1},ja=function(){function e(){var t=this;p(this,e),this.TAG="[HMSSdk]:",this.transportState=Mi.Disconnected,this.analyticsTimer=new Ii,this.sdkState=en({},Ua),this.handleAutoplayError=function(e){var n,r;null==(r=null==(n=t.errorListener)?void 0:n.onError)||r.call(n,e)},this.observer={onNotification:function(e){e.method!==Rr.PEER_LEAVE_REQUEST?(e.method===Rr.POLICY_CHANGE&&t.analyticsTimer.end(Ri.ON_POLICY_CHANGE),t.notificationManager.handleNotification(e,t.sdkState.isReconnecting)):t.handlePeerLeaveRequest(e.params)},onTrackAdd:function(e){t.notificationManager.handleTrackAdd(e)},onTrackRemove:function(e){t.notificationManager.handleTrackRemove(e)},onTrackDegrade:function(e){var n,r;dn.d(t.TAG,"Sending Track Update Track Degraded",e),null==(r=t.listener)||r.onTrackUpdate(sn.TRACK_DEGRADED,e,null==(n=t.store)?void 0:n.getPeerByTrackId(e.trackId))},onTrackRestore:function(e){var n,r;dn.d(t.TAG,"Sending Track Update Track Restored",e),null==(r=t.listener)||r.onTrackUpdate(sn.TRACK_RESTORED,e,null==(n=t.store)?void 0:n.getPeerByTrackId(e.trackId))},onFailure:function(e){var n;null==(n=t.errorListener)||n.onError(e)},onStateChange:function(e,n){return rn(t,null,f().mark((function t(){var r,i,a,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===Mi.Preview||t.t0===Mi.Joined?3:t.t0===Mi.Failed?5:t.t0===Mi.Reconnecting?10:12;break;case 3:return this.transportState===Mi.Reconnecting&&(null==(r=this.listener)||r.onReconnected()),t.abrupt("break",12);case 5:return t.next=7,this.leave();case 7:return null==(a=null==(i=this.errorListener)?void 0:i.onError)||a.call(i,n),this.sdkState.isReconnecting=!1,t.abrupt("break",12);case 10:return this.sdkState.isReconnecting=!0,null==(o=this.listener)||o.onReconnecting(n),t.abrupt("break",12);case 12:this.transportState=e,dn.d(this.TAG,"Transport State Change",this.transportState);case 13:case"end":return t.stop()}}),t,this)})))}},this.handlePeerLeaveRequest=function(e){var n,r=e.requested_by?t.store.getPeerById(e.requested_by):void 0,i={roomEnded:e.room_end,reason:e.reason,requestedBy:r};null==(n=t.listener)||n.onRemovedFromRoom(i),t.leave()},this.handleDeviceChange=function(e){var n,r,i,a,o,s;if(dn.d(t.TAG,"Device Change event",e),null==(r=null==(n=t.deviceChangeListener)?void 0:n.onDeviceChange)||r.call(n,e),e.error&&e.type){var c=e.type.includes("audio")?null==(i=t.localPeer)?void 0:i.audioTrack:null==(a=t.localPeer)?void 0:a.videoTrack;null==(o=t.errorListener)||o.onError(e.error),[yn.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,yn.TracksErrors.DEVICE_IN_USE,yn.TracksErrors.DEVICE_NOT_AVAILABLE].includes(e.error.code)&&c&&(c.setEnabled(!1),null==(s=t.listener)||s.onTrackUpdate(sn.TRACK_MUTED,c,t.localPeer))}},this.handleAudioPluginError=function(e){var n;dn.e(t.TAG,"Audio Plugin Error event",e),null==(n=t.errorListener)||n.onError(e)},this.handleLocalRoleUpdate=function(e){return rn(t,[e],f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.oldRole,r=t.newRole,e.next=3,this.transport.handleLocalRoleUpdate({oldRole:n,newRole:r});case 3:return e.next=5,null==(i=this.roleChangeManager)?void 0:i.handleLocalPeerRoleUpdate({oldRole:n,newRole:r});case 5:case"end":return e.stop()}}),e,this)})))},this.getScreenshareSettings=function(e){var n=t.store.getPublishParams().screen,r=t.store.getSimulcastDimensions("screen");return{video:(new Or).maxBitrate(n.bitRate,!1).codec(n.codec).maxFramerate(n.frameRate).setWidth((null==r?void 0:r.width)||n.width).setHeight((null==r?void 0:r.height)||n.height).build(),audio:e?void 0:(new Ar).build()}},this.sendAudioPresenceFailed=function(){var e=Sn.NoAudioDetected(gn.PREVIEW);t.sendAnalyticsEvent(Pi.audioDetectionFail(e,t.deviceManager.getCurrentSelection().audioInput))},this.sendJoinAnalyticsEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;t.eventBus.analytics.publish(Pi.join(tn(en({error:n},t.analyticsTimer.getTimes(Ri.INIT,Ri.WEBSOCKET_CONNECT,Ri.ON_POLICY_CHANGE,Ri.LOCAL_TRACKS)),{time:t.analyticsTimer.getTimeTaken(Ri.JOIN),is_preview_called:e})))},this.sendPreviewAnalyticsEvent=function(e){t.eventBus.analytics.publish(Pi.preview(tn(en({error:e},t.analyticsTimer.getTimes(Ri.INIT,Ri.WEBSOCKET_CONNECT,Ri.ON_POLICY_CHANGE,Ri.LOCAL_TRACKS)),{time:t.analyticsTimer.getTimeTaken(Ri.PREVIEW)})))},this.sendAnalyticsEvent=function(e){t.analyticsEventsService.queue(e).flush()}}return m(e,[{key:"initStoreAndManagers",value:function(){if(this.sdkState.isInitialised)return this.notificationManager.setListener(this.listener),void this.audioSinkManager.setListener(this.listener);this.sdkState.isInitialised=!0,this.store=new xa,this.eventBus=new La,this.networkTestManager=new Ma(this.eventBus,this.listener),this.playlistManager=new Na(this,this.eventBus),this.notificationManager=new Vi(this.store,this.eventBus,this.listener,this.audioListener),this.deviceManager=new ba(this.store,this.eventBus),this.audioSinkManager=new ka(this.store,this.deviceManager,this.eventBus),this.audioOutput=new wa(this.deviceManager,this.audioSinkManager),this.audioSinkManager.setListener(this.listener),this.eventBus.autoplayError.subscribe(this.handleAutoplayError),this.localTrackManager=new Di(this.store,this.observer,this.deviceManager,this.eventBus,this.analyticsTimer),this.analyticsEventsService=new Ta(this.store),this.transport=new va(this.observer,this.deviceManager,this.store,this.localTrackManager,this.eventBus,this.analyticsEventsService,this.analyticsTimer),this.eventBus.analytics.subscribe(this.sendAnalyticsEvent),this.eventBus.deviceChange.subscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.subscribe(this.handleAudioPluginError)}},{key:"validateJoined",value:function(e){if(!this.localPeer)throw xn.NotConnected(gn.VALIDATION,"Not connected - ".concat(e))}},{key:"refreshDevices",value:function(){return rn(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateJoined("refreshDevices"),e.next=3,this.deviceManager.init(!0);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getWebrtcInternals",value:function(){var e;return null==(e=this.transport)?void 0:e.getWebrtcInternals()}},{key:"getPlaylistManager",value:function(){return this.playlistManager}},{key:"getRecordingState",value:function(){var e;return null==(e=this.store.getRoom())?void 0:e.recording}},{key:"getRTMPState",value:function(){var e;return null==(e=this.store.getRoom())?void 0:e.rtmp}},{key:"getHLSState",value:function(){var e;return null==(e=this.store.getRoom())?void 0:e.hls}},{key:"localPeer",get:function(){var e;return null==(e=this.store)?void 0:e.getLocalPeer()}},{key:"preview",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(In(),An(),!this.sdkState.isPreviewInProgress){n.next=2;break}return n.abrupt("return",Promise.reject(xn.PreviewAlreadyInProgress(gn.PREVIEW,"Preview already called")));case 2:return this.analyticsTimer.start(Ri.PREVIEW),this.setUpPreview(e,t),e.alwaysRequestPermissions&&this.localTrackManager.requestPermissions().then((function(){return rn(o,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initDeviceManagers();case 2:case"end":return e.stop()}}),e,this)})))})),r=!1,i=!1,a=setTimeout((function(){var e,t;(!r||!i)&&(null==(t=null==(e=o.listener)?void 0:e.onNetworkQuality)||t.call(e,-1))}),3e3),n.abrupt("return",new Promise((function(n,s){o.eventBus.policyChange.subscribeOnce((function(){return rn(o,null,f().mark((function r(){var i,a,o=this;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.localTrackManager.getTracksToPublish(e.settings||Fa);case 2:return(a=r.sent).forEach((function(e){return o.setLocalPeerTrack(e)})),(null==(i=this.localPeer)?void 0:i.audioTrack)&&this.initPreviewTrackAudioLevelMonitor(),r.next=7,this.initDeviceManagers();case 7:this.sdkState.isPreviewInProgress=!1,this.analyticsTimer.end(Ri.PREVIEW),t.onPreview(this.store.getRoom(),a),this.sendPreviewAnalyticsEvent(),n();case 12:case"end":return r.stop()}}),r,this)})))})),o.transport.preview(e.authToken,e.initEndpoint,o.localPeer.peerId,{name:e.userName,metaData:e.metaData||""},e.autoVideoSubscribe).then((function(t){var n;r=!0,clearTimeout(a),t&&e.captureNetworkQualityInPreview&&o.networkTestManager.start(null==(n=t.config)?void 0:n.networkHealth).then((function(){i=!0}))})).catch((function(e){var t;o.analyticsTimer.end(Ri.PREVIEW),null==(t=o.errorListener)||t.onError(e),o.sendPreviewAnalyticsEvent(e),o.sdkState.isPreviewInProgress=!1,s(e)}))})));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"join",value:function(e,t){var n,r,i,a=this;if(In(),An(),this.sdkState.isPreviewInProgress)throw xn.NotReady(gn.JOIN,"Preview is in progress, can't join");this.analyticsTimer.start(Ri.JOIN);var o=this.transportState===Mi.Preview,s=ma(e.authToken),c=s.roomId,u=s.userId,l=s.role;null==(n=this.networkTestManager)||n.stop(),null==(i=null==(r=this.localPeer)?void 0:r.audioTrack)||i.destroyAudioLevelMonitor(),this.listener=t,this.commonSetup(e,c,t),this.removeDevicesFromConfig(e),this.store.setConfig(e),this.localPeer?(this.localPeer.name=e.userName,this.localPeer.role=this.store.getPolicyForRole(l),this.localPeer.customerUserId=u,this.localPeer.metadata=e.metaData||""):this.createAndAddLocalPeerToStore(e,l,u),this.roleChangeManager=new Ca(this.store,this.transport,this.publish.bind(this),this.removeTrack.bind(this),this.listener),this.eventBus.localRoleUpdate.subscribe(this.handleLocalRoleUpdate),dn.d(this.TAG,"SDK Store",this.store),dn.d(this.TAG,"\u23f3 Joining room ".concat(c)),dn.time("join-room-".concat(c)),this.transport.join(e.authToken,this.localPeer.peerId,{name:e.userName,metaData:e.metaData||""},e.initEndpoint,e.autoVideoSubscribe).then((function(){return rn(a,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(dn.d(this.TAG,"\u2705 Joined room ".concat(c)),_i.resumeContext(),this.notifyJoin(),this.sendJoinAnalyticsEvent(o),t.t0=this.store.getPublishParams()&&!this.sdkState.published&&!gr,!t.t0){t.next=8;break}return t.next=8,this.publish(e.settings||Fa);case 8:case"end":return t.stop()}}),t,this)})))})).catch((function(e){var t;a.analyticsTimer.end(Ri.JOIN),null==(t=a.listener)||t.onError(e),a.sendJoinAnalyticsEvent(o,e),dn.e(a.TAG,"Unable to join room",e)})).then((function(){dn.timeEnd("join-room-".concat(c))}))}},{key:"stringifyMetadata",value:function(e){e.metaData&&"string"!=typeof e.metaData&&JSON.stringify(e.metaData)}},{key:"cleanUp",value:function(){var e,t;this.cleanDeviceManagers(),this.eventBus.analytics.unsubscribe(this.sendAnalyticsEvent),this.analyticsTimer.cleanUp(),vi.cleanup(),this.playlistManager.cleanup(),dn.cleanUp(),this.sdkState=en({},Ua),this.localPeer&&(null==(e=this.localPeer.audioTrack)||e.cleanup(),this.localPeer.audioTrack=void 0,null==(t=this.localPeer.videoTrack)||t.cleanup(),this.localPeer.videoTrack=void 0),this.store.cleanUp(),this.listener=void 0,this.roleChangeManager&&this.eventBus.localRoleUpdate.unsubscribe(this.roleChangeManager.handleLocalPeerRoleUpdate)}},{key:"leave",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.store.getRoom())){e.next=9;break}return i=r.id,null==(t=this.networkTestManager)||t.stop(),dn.d(this.TAG,"\u23f3 Leaving room ".concat(i)),e.next=7,null==(n=this.transport)?void 0:n.leave();case 7:this.cleanUp(),dn.d(this.TAG,"\u2705 Left room ".concat(i));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"getLocalPeer",value:function(){return this.store.getLocalPeer()}},{key:"getPeers",value:function(){var e=this.store.getPeers();return e.length<50&&dn.d(this.TAG,"Got peers",e),e}},{key:"getAudioOutput",value:function(){return this.audioOutput}},{key:"sendMessage",value:function(e,t){this.sendMessageInternal({message:t,type:e})}},{key:"sendBroadcastMessage",value:function(e,t){return rn(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sendMessageInternal({message:e,type:t});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"sendGroupMessage",value:function(e,t,n){return rn(this,null,f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.store.getKnownRoles(),0!==(t.filter((function(e){return i[e.name]}))||[]).length){r.next=3;break}throw xn.ValidationFailed("No valid role is present",t);case 3:return r.next=5,this.sendMessageInternal({message:e,recipientRoles:t,type:n});case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"sendDirectMessage",value:function(e,t,n){return rn(this,null,f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.store.getPeerById(t.peerId)){r.next=2;break}throw xn.ValidationFailed("Invalid peer - peer not present in the room",t);case 2:if((null==(i=this.localPeer)?void 0:i.peerId)!==t.peerId){r.next=4;break}throw xn.ValidationFailed("Cannot send message to self");case 4:return r.next=6,this.sendMessageInternal({message:e,recipientPeer:t,type:n});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"sendMessageInternal",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i,a,o,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.recipientRoles,r=t.recipientPeer,i=t.type,a=void 0===i?"chat":i,""!==(o=t.message).replace(/\u200b/g," ").trim()){e.next=3;break}throw dn.w(this.TAG,"sendMessage","Ignoring empty message send"),xn.ValidationFailed("Empty message not allowed");case 3:return s=new Fr({sender:this.localPeer,type:a,message:o,recipientPeer:r,recipientRoles:n,time:new Date}),dn.d(this.TAG,"Sending Message: ",s),e.next=7,this.transport.sendMessage(s);case 7:return c=e.sent,e.abrupt("return",(s.time=new Date(c.timestamp),s));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"startScreenShare",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i,a,o,s,c,u=this,l=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:{audioOnly:!1,videoOnly:!1},o=this.store.getPublishParams()){e.next=4;break}return e.abrupt("return");case 4:if((s=o.allowed)&&s.includes("screen")){e.next=8;break}return dn.e(this.TAG,"Role ".concat(null==(r=this.localPeer)?void 0:r.role," cannot share screen")),e.abrupt("return");case 8:if(!(null==(a=null==(i=this.localPeer)?void 0:i.auxiliaryTracks)?void 0:a.find((function(e){return"screen"===e.source})))){e.next=10;break}throw Error("Cannot share multiple screens");case 10:return e.next=12,this.getScreenshareTracks(t,n);case 12:if(c=e.sent,this.localPeer){e.next=16;break}return dn.d(this.TAG,"Screenshared when not connected"),c.forEach((function(e){e.cleanup()})),e.abrupt("return");case 16:return e.next=18,this.transport.publish(c);case 18:c.forEach((function(e){var t,n,r;e.peerId=null==(t=u.localPeer)?void 0:t.peerId,null==(n=u.localPeer)||n.auxiliaryTracks.push(e),null==(r=u.listener)||r.onTrackUpdate(sn.TRACK_ADDED,e,u.localPeer)}));case 19:case"end":return e.stop()}}),e,this)})))}},{key:"stopEndedScreenshare",value:function(e){return rn(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return dn.d(this.TAG,"\u2705 Screenshare ended natively"),t.next=3,this.stopScreenShare();case 3:e();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopScreenShare",value:function(){return rn(this,null,f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dn.d(this.TAG,"\u2705 Screenshare ended from app"),!(n=null==(t=this.localPeer)?void 0:t.auxiliaryTracks.filter((function(e){return"screen"===e.source})))){e.next=20;break}r=g(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return a=i.value,e.next=10,this.removeTrack(a.trackId);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})))}},{key:"addTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return rn(this,null,f().mark((function n(){var r,i,a,o,s,c,u,l;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return dn.w(this.TAG,"Please pass a valid MediaStreamTrack"),n.abrupt("return");case 3:if(this.localPeer){n.next=5;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot addTrack");case 5:if(!this.localPeer.auxiliaryTracks.find((function(t){return t.trackId===e.id}))){n.next=7;break}return n.abrupt("return");case 7:return s=e.kind,c=new MediaStream([e]),u=new Ci(c),l=new("audio"===s?ki:Fi)(u,e,t,this.eventBus),this.setPlaylistSettings({track:e,hmsTrack:l,source:t}),n.next=11,null==(r=this.transport)?void 0:r.publish([l]);case 11:l.peerId=null==(i=this.localPeer)?void 0:i.peerId,null==(a=this.localPeer)||a.auxiliaryTracks.push(l),null==(o=this.listener)||o.onTrackUpdate(sn.TRACK_ADDED,l,this.localPeer);case 14:case"end":return n.stop()}}),n,this)})))}},{key:"removeTrack",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot removeTrack");case 2:if(r=this.localPeer.auxiliaryTracks.findIndex((function(t){return t.trackId===e})),!(r>-1)){t.next=12;break}return i=this.localPeer.auxiliaryTracks[r],t.next=7,this.transport.unpublish([i]);case 7:"audioplaylist"===i.source?this.playlistManager.stop(pn.audio):"videoplaylist"===i.source&&this.playlistManager.stop(pn.video),this.localPeer.auxiliaryTracks.splice(r,1),null==(n=this.listener)||n.onTrackUpdate(sn.TRACK_REMOVED,i,this.localPeer),t.next=13;break;case 12:dn.w(this.TAG,"No track found for ".concat(e));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"setAnalyticsLevel",value:function(e){this.analyticsEventsService.level=e}},{key:"setLogLevel",value:function(e){dn.level=e}},{key:"addAudioListener",value:function(e){this.audioListener=e,this.notificationManager.setAudioListener(e)}},{key:"addConnectionQualityListener",value:function(e){this.notificationManager.setConnectionQualityListener(e)}},{key:"changeRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return rn(this,null,f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!e.role||e.role.name===t,r.t0){r.next=4;break}return r.next=4,null==(i=this.transport)?void 0:i.changeRole(e,t,n);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"acceptChangeRole",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(n=this.transport)?void 0:n.acceptRoleChange(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"endRoom",value:function(e,t){return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.localPeer){n.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot end room");case 2:return n.next=4,null==(r=this.transport)?void 0:r.endRoom(e,t);case 4:return n.next=6,this.leave();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"removePeer",value:function(e,t){return rn(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.localPeer){n.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot remove peer");case 2:if(this.store.getPeerById(e.peerId)){n.next=4;break}throw xn.ValidationFailed("Invalid peer, given peer not present in room",e);case 4:return n.next=6,null==(r=this.transport)?void 0:r.removePeer(e.peerId,t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"startRTMPOrRecording",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot start streaming or recording");case 2:return t.next=4,null==(n=this.transport)?void 0:n.startRTMPOrRecording(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPAndRecording",value:function(){return rn(this,null,f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localPeer){e.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot stop streaming or recording");case 2:return e.next=4,null==(t=this.transport)?void 0:t.stopRTMPOrRecording();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot start HLS streaming");case 2:return t.next=4,null==(n=this.transport)?void 0:n.startHLSStreaming(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw xn.NotConnected(gn.VALIDATION,"No local peer present, cannot stop HLS streaming");case 2:return t.next=4,null==(n=this.transport)?void 0:n.stopHLSStreaming(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"changeName",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateJoined("changeName"),t.next=3,null==(n=this.transport)?void 0:n.changeName(e);case 3:this.notificationManager.updateLocalPeer({name:e});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"changeMetadata",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateJoined("changeMetadata"),t.next=3,null==(n=this.transport)?void 0:n.changeMetadata(e);case 3:this.notificationManager.updateLocalPeer({metadata:e});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getRoles",value:function(){return Object.values(this.store.getKnownRoles())}},{key:"changeTrackState",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.type!==Dn.VIDEO||"regular"===e.source){n.next=3;break}return dn.w(this.TAG,"Muting non-regular video tracks is currently not supported"),n.abrupt("return");case 3:if(e.enabled!==t){n.next=6;break}return dn.w(this.TAG,"Aborting change track state, track already has enabled - ".concat(t),e),n.abrupt("return");case 6:if(this.store.getTrackById(e.trackId)){n.next=8;break}throw xn.ValidationFailed("No track found for change track state",e);case 8:if(i=this.store.getPeerByTrackId(e.trackId)){n.next=11;break}throw xn.ValidationFailed("No peer found for change track state",e);case 11:return n.next=13,null==(r=this.transport)?void 0:r.changeTrackState({requested_for:i.peerId,track_id:e.trackId,stream_id:e.stream.id,mute:!t});case 13:case"end":return n.stop()}}),n,this)})))}},{key:"changeMultiTrackState",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("boolean"==typeof e.enabled){t.next=2;break}throw xn.ValidationFailed("Pass a boolean for enabled");case 2:return r=e.enabled,i=e.roles,a=e.type,o=e.source,t.next=5,null==(n=this.transport)?void 0:n.changeMultiTrackState({value:!r,type:a,source:o,roles:null==i?void 0:i.map((function(e){return null==e?void 0:e.name}))});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"publish",value:function(e){return rn(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.localTrackManager.getTracksToPublish(e);case 2:return n=t.sent,t.next=5,this.setAndPublishTracks(n);case 5:this.sdkState.published=!0;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"setAndPublishTracks",value:function(e){return rn(this,null,f().mark((function t(){var n,r,i,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=g(e),t.prev=1,r.s();case 3:if((i=r.n()).done){t.next=11;break}return a=i.value,t.next=7,this.transport.publish([a]);case 7:this.setLocalPeerTrack(a),null==(n=this.listener)||n.onTrackUpdate(sn.TRACK_ADDED,a,this.localPeer);case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:return t.next=21,this.initDeviceManagers();case 21:case"end":return t.stop()}}),t,this,[[1,13,16,19]])})))}},{key:"setLocalPeerTrack",value:function(e){var t;switch(e.peerId=null==(t=this.localPeer)?void 0:t.peerId,e.type){case Dn.AUDIO:this.localPeer.audioTrack=e;break;case Dn.VIDEO:this.localPeer.videoTrack=e}}},{key:"initDeviceManagers",value:function(){return rn(this,null,f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.sdkState.deviceManagersInitialised,e.t0){e.next=7;break}return this.sdkState.deviceManagersInitialised=!0,e.next=5,this.deviceManager.init();case 5:this.deviceManager.updateOutputDevice(null==(n=null==(t=vi.getSelection())?void 0:t.audioOutput)?void 0:n.deviceId),this.audioSinkManager.init(null==(r=this.store.getConfig())?void 0:r.audioSinkElementId);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanDeviceManagers",value:function(){this.eventBus.deviceChange.unsubscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.unsubscribe(this.handleAudioPluginError),this.eventBus.autoplayError.unsubscribe(this.handleAutoplayError),this.deviceManager.cleanUp(),this.audioSinkManager.cleanUp()}},{key:"initPreviewTrackAudioLevelMonitor",value:function(){var e,t=this,n=null==(e=this.localPeer)?void 0:e.audioTrack;null==n||n.initAudioLevelMonitor(),this.eventBus.trackAudioLevelUpdate.subscribe((function(e){var r,i=e&&e.track.trackId===(null==n?void 0:n.trackId)?[{audioLevel:e.audioLevel,peer:t.localPeer,track:n}]:[];t.store.updateSpeakers(i),null==(r=t.audioListener)||r.onAudioLevelUpdate(i)})),this.eventBus.localAudioSilence.subscribe(this.sendAudioPresenceFailed)}},{key:"notifyJoin",value:function(){var e,t=this,n=this.store.getLocalPeer(),r=this.store.getRoom();r.joinedAt=new Date,n&&(n.joinedAt=r.joinedAt),(null==n?void 0:n.role)?(this.analyticsTimer.end(Ri.JOIN),null==(e=this.listener)||e.onJoin(r)):this.eventBus.policyChange.subscribeOnce((function(){var e;t.analyticsTimer.end(Ri.JOIN),null==(e=t.listener)||e.onJoin(r)}))}},{key:"setUpPreview",value:function(e,t){this.listener=t,this.sdkState.isPreviewInProgress=!0;var n=ma(e.authToken),r=n.roomId,i=n.userId,a=n.role;this.commonSetup(e,r,t),this.store.setConfig(e),this.createAndAddLocalPeerToStore(e,a,i),dn.d(this.TAG,"SDK Store",this.store)}},{key:"setPlaylistSettings",value:function(e){return rn(this,arguments,f().mark((function e(t){var n,r,i,a,o,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.track,r=t.hmsTrack,"videoplaylist"!==(i=t.source)){e.next=8;break}return a={},"audio"===n.kind?a.maxBitrate=64:(a.maxBitrate=1e3,o=n.getSettings(),s=o.width,c=o.height,a.width=s,a.height=c),e.next=6,r.setSettings(a);case 6:e.next=12;break;case 8:if(e.t0="audioplaylist"===i,!e.t0){e.next=12;break}return e.next=12,r.setSettings({maxBitrate:64});case 12:case"end":return e.stop()}}),e)})))}},{key:"createAndAddLocalPeerToStore",value:function(e,t,n){var r=this.store.getPolicyForRole(t),i=new Br({name:e.userName||"",customerUserId:n,metadata:e.metaData||"",role:r});this.store.addPeer(i)}},{key:"commonSetup",value:function(e,t,n){this.stringifyMetadata(e),e.initEndpoint||(e.initEndpoint="https://prod-init.100ms.live"),this.errorListener=n,this.deviceChangeListener=n,this.initStoreAndManagers(),this.store.setErrorListener(this.errorListener),this.store.getRoom()||this.store.setRoom(new ga(t,this.store))}},{key:"removeDevicesFromConfig",value:function(e){this.store.getConfig()&&e.settings&&(delete e.settings.audioOutputDeviceId,delete e.settings.videoDeviceId,delete e.settings.audioInputDeviceId)}},{key:"getScreenshareTracks",value:function(e,t){return rn(this,null,f().mark((function n(){var r,i,a,o,s,c,l,d,h,p=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.getScreenshareSettings(t.videoOnly),i=r.video,a=r.audio,n.next=5,this.transport.getLocalScreen(i,a);case 5:if(o=n.sent,s=u(o,2),c=s[0],l=s[1],d=function(){p.stopEndedScreenshare(e)},h=[],!t.audioOnly){n.next=17;break}if(c.nativeTrack.stop(),l){n.next=14;break}throw Error("Select share audio when sharing screen");case 14:h.push(l),l.nativeTrack.onended=d,n.next=18;break;case 17:h.push(c),c.nativeTrack.onended=d,l&&h.push(l);case 18:return n.abrupt("return",h);case 19:case"end":return n.stop()}}),n,this)})))}}]),e}();function Va(e,t){return e===t}function Ba(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function za(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}dn.i("adapter","".concat(Nt.browserDetails.browser," v").concat(Nt.browserDetails.version));var Ga,Ha,Wa,Ka=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=0,o=r.pop(),s=za(r),c=e.apply(void 0,[function(){return a++,o.apply(null,arguments)}].concat(n)),u=e((function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=o,u.dependencies=s,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Va,n=null,r=null;return function(){return Ba(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var qa,Qa=Object.defineProperty,Ja=Object.defineProperties,Ya=Object.getOwnPropertyDescriptors,$a=Object.getOwnPropertySymbols,Xa=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable,eo=function(e,t,n){return t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},to=function(e,t){for(var n in t||(t={}))Xa.call(t,n)&&eo(e,n,t[n]);if($a){var r,i=g($a(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Za.call(t,n)&&eo(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},no=function(e,t){return Ja(e,Ya(t))},ro=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(B){i(B)}},o=function(e){try{s(n.throw(e))}catch(B){i(B)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))};!function(e){e.Disconnected="Disconnected",e.Preview="Preview",e.Connecting="Connecting",e.Connected="Connected",e.Reconnecting="Reconnecting",e.Disconnecting="Disconnecting",e.Failed="Failed"}(qa||(qa={}));var io,ao,oo,so,co=function(){return{room:{id:"",isConnected:!1,name:"",peers:[],shareableLink:"",localPeer:"",hasWaitingRoom:!1,roomState:qa.Disconnected,recording:{browser:{running:!1},server:{running:!1},hls:{running:!1}},rtmp:{running:!1},hls:{running:!1,variants:[]},sessionId:""},peers:{},tracks:{},playlist:{audio:{list:{},selection:{id:"",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1},video:{list:{},selection:{id:"",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1}},messages:{byID:{},allIDs:[]},speakers:{},connectionQualities:{},settings:{audioInputDeviceId:"",audioOutputDeviceId:"",videoInputDeviceId:""},devices:{audioInput:[],audioOutput:[],videoInput:[]},roles:{},roleChangeRequests:[],errors:[]}},uo=function(){return{peerStats:{},trackStats:{},localPeer:{id:""}}};!function(e){e.CHAT="chat"}(io||(io={})),function(e){e.INFO="info",e.ERROR="error",e.CRITICAL="critical"}(ao||(ao={})),function(e){e.PEER_JOINED="PEER_JOINED",e.PEER_LEFT="PEER_LEFT",e.PEER_LIST="PEER_LIST",e.NEW_MESSAGE="NEW_MESSAGE",e.ERROR="ERROR",e.RECONNECTING="RECONNECTING",e.RECONNECTED="RECONNECTED",e.TRACK_ADDED="TRACK_ADDED",e.TRACK_REMOVED="TRACK_REMOVED",e.TRACK_MUTED="TRACK_MUTED",e.TRACK_UNMUTED="TRACK_UNMUTED",e.TRACK_DEGRADED="TRACK_DEGRADED",e.TRACK_RESTORED="TRACK_RESTORED",e.ROLE_CHANGE_REQUEST="ROLE_CHANGE_REQUEST",e.ROLE_UPDATED="ROLE_UPDATED",e.CHANGE_TRACK_STATE_REQUEST="CHANGE_TRACK_STATE_REQUEST",e.CHANGE_MULTI_TRACK_STATE_REQUEST="CHANGE_MULTI_TRACK_STATE_REQUEST",e.ROOM_ENDED="ROOM_ENDED",e.REMOVED_FROM_ROOM="REMOVED_FROM_ROOM",e.DEVICE_CHANGE_UPDATE="DEVICE_CHANGE_UPDATE",e.PLAYLIST_TRACK_ENDED="PLAYLIST_TRACK_ENDED",e.NAME_UPDATED="NAME_UPDATED",e.METADATA_UPDATED="METADATA_UPDATED"}(oo||(oo={})),function(e){e.audio="audio",e.video="video"}(so||(so={}));var lo=function(e,t){var n,r=g(go(Object.keys(e),Object.keys(t)));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i],o=t[i];ho(a,o)?Object.assign(a,o):po(a,o)?delete e[i]:vo(a,o)&&(e[i]=o)}}catch(s){r.e(s)}finally{r.f()}},fo=function(e,t){e.plugins&&mo(e.plugins,t.plugins)&&(t.plugins=e.plugins),e.layerDefinitions&&mo(e.layerDefinitions,t.layerDefinitions)&&(t.layerDefinitions=e.layerDefinitions)},ho=function(e,t){return e&&t},po=function(e,t){return e&&!t},vo=function(e,t){return!e&&t},mo=function(e,t){if(e===t||0===e.length&&0===(null==t?void 0:t.length))return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},go=function(e,t){var n,r=new Set,i=g(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.add(a)}}catch(u){i.e(u)}finally{i.f()}var o,s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;r.add(c)}}catch(u){s.e(u)}finally{s.f()}return Array.from(r)},yo=function(){function e(){p(this,e)}return m(e,null,[{key:"convertPeer",value:function(e){var t,n,r;return{id:e.peerId,name:e.name,roleName:null==(t=e.role)?void 0:t.name,isLocal:e.isLocal,videoTrack:null==(n=e.videoTrack)?void 0:n.trackId,audioTrack:null==(r=e.audioTrack)?void 0:r.trackId,auxiliaryTracks:e.auxiliaryTracks.map((function(e){return e.trackId})),customerUserId:e.customerUserId,customerDescription:e.metadata,metadata:e.metadata,joinedAt:e.joinedAt}}},{key:"convertTrack",value:function(e,t){var n={id:e.trackId,source:e.source,type:e.type,enabled:e.enabled,displayEnabled:e.enabled,peerId:e.peerId||t};return this.enrichTrack(n,e),n}},{key:"enrichTrack",value:function(t,n){var r=n.getMediaTrackSettings();"screen"===t.source&&"video"===t.type&&(t.displaySurface=r.displaySurface),t.height=r.height,t.width=r.width,n instanceof ur&&(t.volume=n.getVolume()||0),e.updateDeviceID(t,n),e.enrichVideoTrack(t,n),e.enrichPluginsDetails(t,n)}},{key:"updateDeviceID",value:function(e,t){var n;e.deviceID=t instanceof Fi||t instanceof ki?t.settings.deviceId:null==(n=t.getMediaTrackSettings())?void 0:n.deviceId}},{key:"enrichVideoTrack",value:function(e,t){t instanceof dr&&(e.layer=t.getSimulcastLayer(),e.degraded=t.degraded,mo(t.getSimulcastDefinitions(),e.layerDefinitions)||(e.layerDefinitions=t.getSimulcastDefinitions()))}},{key:"enrichPluginsDetails",value:function(e,t){(t instanceof Fi||t instanceof ki)&&(mo(t.getPlugins(),e.plugins)||(e.plugins=t.getPlugins()))}},{key:"convertRoom",value:function(t){var n,r,i=e.convertRecordingStreamingState(null==t?void 0:t.recording,null==t?void 0:t.rtmp,null==t?void 0:t.hls),a=i.recording,o=i.rtmp,s=i.hls;return{id:t.id,name:t.name,localPeer:null!=(r=null==(n=t.localPeer)?void 0:n.peerId)?r:"",hasWaitingRoom:t.hasWaitingRoom,shareableLink:t.shareableLink,recording:a,rtmp:o,hls:s,sessionId:t.sessionId,startedAt:t.startedAt,joinedAt:t.joinedAt,peerCount:t.peerCount}}},{key:"convertMessage",value:function(e){var t,n,r,i,a,o,s;return{sender:null==(t=e.sender)?void 0:t.peerId,senderName:null==(n=e.sender)?void 0:n.name,senderRole:null==(i=null==(r=e.sender)?void 0:r.role)?void 0:i.name,senderUserId:null==(a=e.sender)?void 0:a.customerUserId,recipientPeer:null==(o=e.recipientPeer)?void 0:o.peerId,recipientRoles:null==(s=e.recipientRoles)?void 0:s.map((function(e){return e.name})),time:e.time,type:e.type,message:e.message}}},{key:"convertRoles",value:function(e){var t={};return e&&e.forEach((function(e){t[e.name]=e})),t}},{key:"convertRoleChangeRequest",value:function(e){var t;return{requestedBy:null==(t=e.requestedBy)?void 0:t.peerId,roleName:e.role.name,token:e.token}}},{key:"convertException",value:function(e){return{code:e.code,action:e.action,name:e.name,message:e.message,description:e.description,isTerminal:e.isTerminal,nativeError:e.nativeError,timestamp:new Date}}},{key:"convertDeviceChangeUpdate",value:function(e){var t={devices:e.devices,selection:e.selection,type:e.type};return e.error&&(t.error=this.convertException(e.error)),t}},{key:"convertPlaylist",value:function(e){return{audio:this.getConvertedPlaylistType(e,so.audio),video:this.getConvertedPlaylistType(e,so.video)}}},{key:"convertPlaylistItem",value:function(e,t){var n=t.type,r=e.getCurrentSelection(n),i=e.isPlaying(n),a=t.url===(null==r?void 0:r.url);return no(to({},t),{type:t.type,selected:a,playing:a&&i})}},{key:"getConvertedPlaylistType",value:function(t,n){var r={},i=t.getCurrentSelection(n),a=t.getCurrentProgress(n),o=t.getVolume(n),s=t.getList(n),c=t.getCurrentIndex(n);return t.getList(n).forEach((function(n){r[n.id]=e.convertPlaylistItem(t,n)})),{list:r,selection:{id:null==i?void 0:i.id,hasPrevious:c>0,hasNext:c<s.length-1},progress:a,volume:o,currentTime:t.getCurrentTime(n),playbackRate:t.getPlaybackRate(n)}}},{key:"convertRecordingStreamingState",value:function(e,t,n){var r;return{recording:{browser:to({running:!1},null==e?void 0:e.browser),server:to({running:!1},null==e?void 0:e.server),hls:to({running:!1},null==e?void 0:e.hls)},rtmp:to({running:!1},t),hls:{variants:(null==(r=null==n?void 0:n.variants)?void 0:r.map((function(e){return e})))||[],running:!!(null==n?void 0:n.running),error:null==n?void 0:n.error}}}}]),e}();function ko(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:So;if(t){var a,o=g(t.auxiliaryTracks);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=e[s];i(c)&&(r=bo(c)?c:r,n=wo(c)?c:n)}}catch(u){o.e(u)}finally{o.f()}}return{video:n,audio:r}}function bo(e){return e&&"audio"===e.type}function wo(e){return e&&"video"===e.type}function So(e){return e&&"screen"===e.source}function To(e){return e&&"audioplaylist"===e.source}function Eo(e){return e&&"videoplaylist"===e.source}function xo(e){return Boolean(null==e?void 0:e.degraded)}function Co(e,t){return!(!t||!e.tracks[t])&&e.tracks[t].enabled}var Po=function(e){return e.room},Ro=(Ka(Po,(function(e){return e.id})),function(e){return e.peers}),_o=function(e){return e.messages.byID},Ao=function(e){return e.messages.allIDs},Io=function(e){return e.tracks},Oo=function(e){return e.settings},No=Ka([Po],(function(e){return e&&e.isConnected})),Do=(Ka([No,Po],(function(e,t){return e?void 0!==t.peerCount?t.peerCount||1:t.peers.length:Math.max(void 0!==t.peerCount?t.peerCount:t.peers.length-1,0)})),Ka([Po,Ro],(function(e,t){return e.peers.map((function(e){return t[e]}))}))),Lo=Ka(Io,(function(e){return Object.values(e)})),Mo=Ka(Po,Ro,(function(e,t){return t[e.localPeer]})),Fo=Ka(Po,(function(e){return e.localPeer})),Uo=(Ka(Mo,(function(e){return null==e?void 0:e.name})),Ka(Mo,(function(e){return null==e?void 0:e.roleName})),Ka(Mo,(function(e){return null==e?void 0:e.audioTrack}))),jo=Ka(Mo,(function(e){return null==e?void 0:e.videoTrack})),Vo=Ka(Mo,(function(e){return null==e?void 0:e.auxiliaryTracks})),Bo=Ka([Uo,jo,Vo],(function(e,t,n){var r=h(n);return e&&r.unshift(e),t&&r.unshift(t),r})),zo=(Ka(Do,(function(e){return e.filter((function(e){return!e.isLocal}))})),Ka(Ro,(function(e){return e.speakers}),(function(e,t){var n=Object.entries(t).sort((function(e,t){var n,r,i=(null==(n=e[1])?void 0:n.audioLevel)||0;return((null==(r=t[1])?void 0:r.audioLevel)||0)>i?1:-1}));if(n.length>0&&n[0][1].audioLevel&&n[0][1].audioLevel>0){var r=n[0][1].peerID;if(r in e)return e[r]}return null})),function(e){var t=Mo(e);return Co(e,null==t?void 0:t.audioTrack)}),Go=function(e){var t=Mo(e);return Co(e,null==t?void 0:t.videoTrack)},Ho=function(e){var t=Mo(e);return function(e,t){return!(!t||!e.tracks[t])&&e.tracks[t].displayEnabled}(e,null==t?void 0:t.videoTrack)},Wo=Ka(Mo,Io,(function(e,t){var n=ko(t,e),r=n.video,i=n.audio;return!(!r&&!i)})),Ko=Ka(Ro,Io,(function(e,t){var n;for(var r in e){var i=e[r],a=ko(t,i),o=a.video,s=a.audio;if(o)return i;s&&!n&&(n=i)}return n})),qo=(Ka(Ko,(function(e){return!!e})),Ka(Ro,Io,(function(e,t){for(var n in e){var r=e[n],i=ko(t,r),a=i.audio;if(!i.video&&a)return r}})),Ka(Ro,Io,(function(e,t){var n=[],r=[];for(var i in e){var a=e[i],o=ko(t,a),s=o.video,c=o.audio;s?n.push(a):c&&r.push(a)}return n.concat(r)})),Ka(Ro,Io,(function(e,t){for(var n in t){var r=t[n];if(Eo(r)&&wo(r)&&r.peerId)return e[r.peerId]}})),Ka(Ro,Io,(function(e,t){for(var n in t){var r=t[n];if(To(r)&&r.peerId)return e[r.peerId]}})),Ka(Lo,(function(e){return e.filter(xo)})),Ka(Ao,(function(e){return e.length}))),Qo=(Ka(_o,(function(e){return Object.values(e).filter((function(e){return!e.read})).length})),Ka(Ao,_o,(function(e,t){var n=[];return e.forEach((function(e){n.push(t[e])})),n}))),Jo=Ka([Po],(function(e){return e&&e.roomState})),Yo=(Ka(Jo,(function(e){return e===qa.Preview})),Ka(Po,(function(e){return e.roomState!==qa.Disconnected}))),$o=function(e){return e.roles},Xo=(Ka([$o],(function(e){return Object.keys(e)})),Ka([Mo,$o],(function(e,t){return(null==e?void 0:e.roleName)?t[e.roleName]:null}))),Zo=(Ka([Xo],(function(e){var t;return!!(null==(t=null==e?void 0:e.subscribeParams)?void 0:t.subscribeToRoles)&&e.subscribeParams.subscribeToRoles.length>0})),Ka(Xo,(function(e){return null==e?void 0:e.permissions}))),es=(Ka(Po,(function(e){return e.recording})),Ka(Po,(function(e){return e.rtmp})),Ka(Po,(function(e){return e.hls})),Ka(Po,(function(e){return e.sessionId})),Ka(Po,(function(e){return e.startedAt})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return function(t){return t.playlist[e].list}}),ts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return function(t){return t.playlist[e].selection}},ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return function(t){return t.playlist[e].progress}},rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return function(t){return t.playlist[e].currentTime}},is=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return function(t){return t.playlist[e].playbackRate}},as=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return function(t){return t.playlist[e].volume}},os=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return Ka(es(e),(function(e){return Object.values(e)}))},ss=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.audio;return Ka(es(e),ts(e),(function(e,t){if(t.id)return e[t.id]}))},cs={selection:ts(so.audio),progress:ns(so.audio),currentTime:rs(so.audio),playbackRate:is(so.audio),volume:as(so.audio),list:os(so.audio),selectedItem:ss(so.audio)},us={selection:ts(so.video),progress:ns(so.video),currentTime:rs(so.video),playbackRate:is(so.video),volume:as(so.video),list:os(so.video),selectedItem:ss(so.video)};function ls(e){return function(t){return function(n){return e(n,t)}}}var ds="HMS-Store:",fs=function(){function e(){p(this,e)}return m(e,null,[{key:"v",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Ht.VERBOSE,e].concat(n))}},{key:"d",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ht.DEBUG].concat(t))}},{key:"i",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ht.INFO].concat(t))}},{key:"w",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ht.WARN].concat(t))}},{key:"e",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Ht.ERROR].concat(t))}},{key:"time",value:function(e){this.log(Ht.TIME,"[HMSPerformanceTiming]",e)}},{key:"timeEnd",value:function(e){this.log(Ht.TIMEEND,"[HMSPerformanceTiming]",e,e)}},{key:"cleanUp",value:function(){performance.clearMarks(),performance.clearMeasures()}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!(this.level.valueOf()>e.valueOf()))switch(e){case Ht.VERBOSE:var i;(i=console).log.apply(i,[ds].concat(n));break;case Ht.DEBUG:var a;(a=console).debug.apply(a,[ds].concat(n));break;case Ht.INFO:var o;(o=console).info.apply(o,[ds].concat(n));break;case Ht.WARN:var s;(s=console).warn.apply(s,[ds].concat(n));break;case Ht.ERROR:var c;(c=console).error.apply(c,[ds].concat(n));break;case Ht.TIME:performance.mark(n[1]);break;case Ht.TIMEEND:var u=n[0],l=n[1];try{var d=performance.measure(l,l);this.log(Ht.DEBUG,u,l,null==d?void 0:d.duration),performance.clearMarks(l),performance.clearMeasures(l)}catch(d){this.log(Ht.DEBUG,u,l,d)}}}}]),e}();fs.level=Ht.VERBOSE;var hs=function(e,t){return t},ps=function(e,t){return t},vs=Ka([Ro,hs],(function(e,t){return t?e[t]:null})),ms=Ka([Io,function(e,t){return t}],(function(e,t){return t?e[t]:null})),gs=ls(vs),ys=(ls(Ka([function(e){return e.appData},function(e,t){return t}],(function(e,t){return e?t?e[t]:e:{}}))),ls(Ka(vs,(function(e){return null==e?void 0:e.name}))),ls(ms)),ks=(ls((function(e,t){var n=vs(e,t);if(n&&n.videoTrack&&""!==n.videoTrack)return e.tracks[n.videoTrack]})),ls((function(e,t){var n=vs(e,t);if(n&&n.audioTrack&&""!==n.audioTrack)return e.tracks[n.audioTrack]}))),bs=(ls((function(e,t){var n=vs(e,t);return(null==n?void 0:n.auxiliaryTracks.map((function(t){return e.tracks[t]})))||[]})),function(e,t){return t?e.speakers[t]:null}),ws=(ls(Ka(bs,(function(e){return(null==e?void 0:e.audioLevel)||0}))),ls(Ka((function(e,t){var n=ks(t)(e);return bs(e,null==n?void 0:n.id)}),(function(e){return(null==e?void 0:e.audioLevel)||0}))),ls((function(e,t){if(t)return e.connectionQualities[t]})),ls((function(e,t){var n=vs(e,t);if(n){var r=null==n?void 0:n.auxiliaryTracks.find((function(t){return bo(e.tracks[t])}));return r?e.tracks[r]:void 0}})),ls(Ka(Io,vs,(function(e,t){var n=null==t?void 0:t.auxiliaryTracks.find((function(t){var n=e[t];return Eo(n)&&wo(n)}));return n?e[n]:void 0}))),ls(Ka(Io,vs,(function(e,t){var n=null==t?void 0:t.auxiliaryTracks.find((function(t){var n=e[t];return Eo(n)&&bo(n)}));return n?e[n]:void 0}))),ls(Ka(Io,vs,(function(e,t){var n=null==t?void 0:t.auxiliaryTracks.find((function(t){var n=e[t];return To(n)&&bo(n)}));return n?e[n]:void 0}))),ls(Ka(Io,vs,(function(e,t){return ko(e,t)})))),Ss=function(e){return Ka(ws(e),(function(e){return e.audio}))},Ts=(ls((function(e,t){var n=vs(e,t);return Co(e,null==n?void 0:n.audioTrack)})),ls((function(e,t){var n=vs(e,t);return Co(e,null==n?void 0:n.videoTrack)})),ls((function(e,t){if(t&&e.tracks[t])return 0===e.tracks[t].volume}))),Es=(ls((function(e,t){var n=vs(e,t);return Ts(null==n?void 0:n.audioTrack)(e)})),ls((function(e,t){var n=Ss(t)(e);return Ts(null==n?void 0:n.id)(e)})),ls((function(e,t){var n=ms(e,t);if(n)return"audio"!==n.type?void fs.w("Please pass audio track here"):n.volume}))),xs=(ls((function(e,t){var n=vs(e,t);return Es(null==n?void 0:n.audioTrack)(e)})),ls((function(e,t){var n=Ss(t)(e);return Es(null==n?void 0:n.id)(e)})),ls((function(e,t){var n=ms(e,t);if(n)return"video"!==n.type?void fs.w("Please pass video track here"):n.layer})),Ka([Qo,Fo,hs],(function(e,t,n){if(n)return e.filter((function(e){var r;return!(!e.recipientPeer&&!(null==(r=e.recipientRoles)?void 0:r.length)||e.sender&&![t,n].includes(e.sender))&&[t,n].includes(e.recipientPeer)}))}))),Cs=Ka([Qo,ps],(function(e,t){if(t)return e.filter((function(e){var n,r;return!!(null==(n=e.recipientRoles)?void 0:n.length)&&(null==(r=e.recipientRoles)?void 0:r.includes(t))}))})),Ps=Ka(Qo,(function(e){return e.filter((function(e){var t;return!e.recipientPeer&&!(null==(t=e.recipientRoles)?void 0:t.length)}))})),Rs=Ka([Cs,ps],(function(e){return e?e.filter((function(e){return!e.read})).length:0})),_s=Ka([xs,hs],(function(e){return e?e.filter((function(e){return!e.read})).length:0})),As=(Ka(Ps,(function(e){return e.filter((function(e){return!e.read})).length})),ls(xs),ls(Cs),ls(Rs),ls(_s),Ka([Ro,Io],(function(e,t){return Object.values(e).map((function(e){var n;return{peer:e,isAudioEnabled:!!e.audioTrack&&(null==(n=t[e.audioTrack])?void 0:n.enabled)}}))})),Ka([function(e){return e.roleChangeRequests[0]||null},Ro,$o],(function(e,t,n){return e?{requestedBy:e.requestedBy?t[e.requestedBy]:void 0,role:n[e.roleName],token:e.token}:null})),Ka([Xo],(function(e){var t,n=!1,r=!1,i=!1;return(null==(t=null==e?void 0:e.publishParams)?void 0:t.allowed)&&(n=e.publishParams.allowed.includes("video"),r=e.publishParams.allowed.includes("audio"),i=e.publishParams.allowed.includes("screen")),{video:n,audio:r,screen:i}})));Ka([jo,Io],(function(e,t){var n=null;return e&&(n=t[e]),(null==n?void 0:n.plugins)||[]})),Ka([Uo,Io],(function(e,t){var n=null;return e&&(n=t[e]),(null==n?void 0:n.plugins)||[]}));function Is(e){return e instanceof ur||e instanceof dr}var Os=function(){function e(t,n,r,i){p(this,e),this.playlistManager=t,this.syncPlaylistState=r,this.store=i,this.type=n}return m(e,[{key:"play",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return fs.w("Please pass id to play"),t.abrupt("return");case 3:return t.next=5,this.playlistManager.setEnabled(!0,{id:e,type:this.type});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){return ro(this,null,f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.type===so.audio?cs:us,(n=this.store.getState(t.selection)).id){e.next=4;break}return fs.w("No item is currently playing to pause"),e.abrupt("return");case 4:return e.next=6,this.playlistManager.setEnabled(!1,{id:n.id,type:this.type});case 6:case"end":return e.stop()}}),e,this)})))}},{key:"playNext",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.playNext(this.type);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"playPrevious",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.playPrevious(this.type);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"seek",value:function(e){this.playlistManager.seek(e,this.type),this.syncPlaylistState("seekOn".concat(this.type,"Playlist"))}},{key:"seekTo",value:function(e){this.playlistManager.seekTo(e,this.type),this.syncPlaylistState("seekToOn".concat(this.type,"Playlist"))}},{key:"setVolume",value:function(e){this.playlistManager.setVolume(e,this.type),this.syncPlaylistState("setVolumeOn".concat(this.type,"Playlist"))}},{key:"setList",value:function(e){this.playlistManager.setList(e),this.syncPlaylistState("setListOn".concat(this.type,"Playlist"))}},{key:"stop",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.stop(this.type);case 2:this.syncPlaylistState("stop".concat(this.type,"Playlist"));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setIsAutoplayOn",value:function(e){this.playlistManager.setIsAutoplayOn(this.type,e)}},{key:"setPlaybackRate",value:function(e){this.playlistManager.setPlaybackRate(this.type,e),this.syncPlaylistState("set".concat(this.type,"PlaybackRate"))}},{key:"removeItem",value:function(e){return ro(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.playlistManager.removeItem(e,this.type);case 2:return n=t.sent,t.abrupt("return",(n&&this.syncPlaylistState("remove".concat(this.type,"PlaylistItem")),n));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"clearList",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.clearList(this.type);case 2:this.syncPlaylistState("clear".concat(this.type,"Playlist"));case 3:case"end":return e.stop()}}),e,this)})))}}]),e}(),Ns=(l(Ga={},on.PEER_JOINED,oo.PEER_JOINED),l(Ga,on.PEER_LEFT,oo.PEER_LEFT),l(Ga,on.ROLE_UPDATED,oo.ROLE_UPDATED),l(Ga,on.AUDIO_TOGGLED,"PEER_AUDIO_UPDATED"),l(Ga,on.VIDEO_TOGGLED,"PEER_VIDEO_UPDATED"),l(Ga,on.NAME_UPDATED,oo.NAME_UPDATED),l(Ga,on.METADATA_UPDATED,oo.METADATA_UPDATED),Ga),Ds=(l(Ha={},sn.TRACK_ADDED,oo.TRACK_ADDED),l(Ha,sn.TRACK_REMOVED,oo.TRACK_REMOVED),l(Ha,sn.TRACK_MUTED,oo.TRACK_MUTED),l(Ha,sn.TRACK_UNMUTED,oo.TRACK_UNMUTED),l(Ha,sn.TRACK_DEGRADED,oo.TRACK_DEGRADED),l(Ha,sn.TRACK_RESTORED,oo.TRACK_RESTORED),Ha),Ls=(l(Wa={},on.PEER_JOINED,"peerJoined"),l(Wa,on.PEER_LEFT,"peerLeft"),l(Wa,on.NAME_UPDATED,"peerNameUpdated"),l(Wa,on.ROLE_UPDATED,"peerRoleUpdated"),l(Wa,on.METADATA_UPDATED,"peerMetadataUpdated"),Wa),Ms=function(){function e(t,n,r){var i=this;p(this,e),this.hmsSDKTracks={},this.hmsSDKPeers={},this.isRoomJoinCalled=!1,this.ignoredMessageTypes=[],this.setProgress=function(e){var t=e.type,n=e.progress;i.setState((function(e){e.playlist[t].progress=n,e.playlist[t].currentTime=i.sdk.getPlaylistManager().getCurrentTime(t)}),"playlistProgress")},this.syncPlaylistState=function(e){i.setState((function(e){Object.assign(e.playlist,yo.convertPlaylist(i.sdk.getPlaylistManager()))}),e)},this.sendPeerUpdateNotification=function(e,t){var n=i.store.getState(gs(t.peerId)),r=Ls[e];i.syncRoomState(r),n||(n=i.store.getState(gs(t.peerId))),i.hmsNotifications.sendPeerUpdate(e,n)},this.setState=function(e,t){return i.store.namedSetState(e,t)},this.store=t,this.sdk=n,this.hmsNotifications=r}return m(e,[{key:"refreshDevices",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.refreshDevices();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"unblockAudio",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.getAudioOutput().unblockAutoplay();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"setVolume",value:function(e,t){t?this.setTrackVolume(e,t):(this.sdk.getAudioOutput().setVolume(e),this.syncRoomState("setOutputVolume"))}},{key:"setAudioOutputDevice",value:function(e){this.sdk.getAudioOutput().setDevice(e)&&this.setState((function(t){t.settings.audioOutputDeviceId=e}),"setAudioOutputDevice")}},{key:"setPreferredLayer",value:function(e,t){var n=this.hmsSDKTracks[e];n?n instanceof dr?(n.preferLayer(t),this.updateVideoLayer(e,"setPreferredLayer")):fs.w("track ".concat(e," is not an video track")):this.logPossibleInconsistency("track ".concat(e," not present, unable to set preffer layer"))}},{key:"preview",value:function(e){return ro(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isRoomJoinCalled){t.next=3;break}return this.logPossibleInconsistency("attempting to call preview after join was called"),t.abrupt("return");case 3:if((n=this.store.getState(Jo))!==qa.Preview&&n!==qa.Connecting){t.next=7;break}return this.logPossibleInconsistency("attempting to call preview while room is in preview/connecting"),t.abrupt("return");case 7:return t.prev=7,this.setState((function(e){e.room.roomState=qa.Connecting}),"connecting"),t.next=11,this.sdkPreviewWithListeners(e);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(7),fs.e("Cannot show preview. Failed to connect to room - ",t.t0),t.t0;case 16:case"end":return t.stop()}}),t,this,[[7,13]])})))}},{key:"join",value:function(e){if(this.isRoomJoinCalled)this.logPossibleInconsistency("room join is called again");else try{this.isRoomJoinCalled=!0,this.setState((function(e){e.room.roomState=qa.Connecting}),"join"),this.sdkJoinWithListeners(e)}catch(b){throw this.isRoomJoinCalled=!1,fs.e("Failed to connect to room - ",b),b}}},{key:"leave",value:function(){return ro(this,null,f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.store.getState(Yo)){e.next=3;break}return this.logPossibleInconsistency("room leave is called when no room is connected"),e.abrupt("return");case 3:return t=this.store.getState(Jo),e.abrupt("return",(this.setState((function(e){e.room.roomState=qa.Disconnecting}),"leaving"),this.sdk.leave().then((function(){n.resetState("leave"),fs.i("left room")})).catch((function(e){fs.e("error in leaving room - ",e),n.setState((function(e){e.room.roomState=t}),"revertLeave")}))));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"setScreenShareEnabled",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r={audioOnly:!1,videoOnly:!1},"object"==typeof t?Object.assign(r,t):"boolean"==typeof t&&(r.audioOnly=t),n.prev=2,!e){n.next=8;break}return n.next=6,this.startScreenShare(r);case 6:n.next=10;break;case 8:return n.next=10,this.stopScreenShare();case 10:n.next=15;break;case 12:throw n.prev=12,n.t0=n.catch(2),this.hmsNotifications.sendError(yo.convertException(n.t0)),n.t0;case 15:case"end":return n.stop()}}),n,this,[[2,12]])})))}},{key:"addTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return ro(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sdk.addTrack(e,t);case 2:this.syncRoomState("addTrack");case 3:case"end":return n.stop()}}),n,this)})))}},{key:"removeTrack",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.removeTrack(e);case 2:this.syncRoomState("removeTrack");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setLocalAudioEnabled",value:function(e){return ro(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(Uo),t.t0=n,!t.t0){t.next=5;break}return t.next=5,this.setEnabledTrack(n,e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setLocalVideoEnabled",value:function(e){return ro(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(jo),t.t0=n,!t.t0){t.next=5;break}return t.next=5,this.setEnabledTrack(n,e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setEnabledTrack",value:function(e,t){return ro(this,null,f().mark((function n(){var r,i,a=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((null==(r=this.store.getState().tracks[e])?void 0:r.enabled)!==t){n.next=3;break}return this.logPossibleInconsistency("local track[".concat(e,"] enabled state - ").concat(t)),n.abrupt("return");case 3:return this.setState((function(n){n.tracks[e]?n.tracks[e].displayEnabled=t:a.logPossibleInconsistency("track id not found for setEnabled")}),"displayEnabled"),n.prev=4,n.next=7,this.setEnabledSDKTrack(e,t);case 7:this.syncRoomState("setEnabled"),n.next=13;break;case 10:throw n.prev=10,n.t0=n.catch(4),this.setState((function(n){n.tracks[e].displayEnabled=!t}),"rollbackDisplayEnabled"),this.hmsNotifications.sendError(yo.convertException(n.t0)),n.t0;case 13:i=t?sn.TRACK_UNMUTED:sn.TRACK_MUTED,this.hmsNotifications.sendTrackUpdate(i,e);case 15:case"end":return n.stop()}}),n,this,[[4,10]])})))}},{key:"setAudioSettings",value:function(e){return ro(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(Uo),t.t0=n,!t.t0){t.next=6;break}return t.next=5,this.setSDKLocalAudioTrackSettings(n,e);case 5:this.syncRoomState("setAudioSettings");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"setVideoSettings",value:function(e){return ro(this,null,f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(jo),t.t0=n,!t.t0){t.next=6;break}return t.next=5,this.setSDKLocalVideoTrackSettings(n,e);case 5:this.syncRoomState("setVideoSettings");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"sendMessage",value:function(e){this.sendBroadcastMessage(e)}},{key:"sendBroadcastMessage",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sdk.sendBroadcastMessage(e,t);case 2:r=n.sent,this.updateMessageInStore(r,{message:e,type:t});case 4:case"end":return n.stop()}}),n,this)})))}},{key:"sendGroupMessage",value:function(e,t,n){return ro(this,null,f().mark((function r(){var i,a,o;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=this.store.getState($o),a=t.map((function(e){return i[e]})),r.next=4,this.sdk.sendGroupMessage(e,a,n);case 4:o=r.sent,this.updateMessageInStore(o,{message:e,recipientRoles:t,type:n});case 6:case"end":return r.stop()}}),r,this)})))}},{key:"sendDirectMessage",value:function(e,t,n){return ro(this,null,f().mark((function r(){var i,a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=this.hmsSDKPeers[t],r.next=3,this.sdk.sendDirectMessage(e,i,n);case 3:a=r.sent,this.updateMessageInStore(a,{message:e,recipientPeer:i.peerId,type:n});case 5:case"end":return r.stop()}}),r,this)})))}},{key:"updateMessageInStore",value:function(e,t){if(!e)throw fs.w("sendMessage","Failed to send message",t),Error("sendMessage Failed - ".concat(JSON.stringify(t)));var n=yo.convertMessage(e);return n.read=!0,n.senderName="You",n.ignored=this.ignoredMessageTypes.includes(n.type),this.putMessageInStore(n),n}},{key:"setMessageRead",value:function(e,t){var n=this;this.setState((function(r){t?r.messages.byID[t]?r.messages.byID[t].read=e:n.logPossibleInconsistency("no message with id is found"):r.messages.allIDs.forEach((function(t){r.messages.byID[t].read=e}))}),"setMessageRead")}},{key:"attachVideo",value:function(e,t){return ro(this,null,f().mark((function n(){var r=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.localAndVideoUnmuting(e)){n.next=2;break}return n.abrupt("return",new Promise((function(n){var i=r.store.subscribe((function(a){return ro(r,null,f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=a,!r.t0){r.next=6;break}return r.next=4,this.attachVideoInternal(e,t);case 4:i(),n();case 6:case"end":return r.stop()}}),r,this)})))}),Go)})));case 2:return n.next=4,this.attachVideoInternal(e,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"detachVideo",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])||"video"!==r.type){n.next=7;break}return n.next=4,r.removeSink(t);case 4:this.updateVideoLayer(e,"detachVideo"),n.next=8;break;case 7:this.logPossibleInconsistency("no video track found to remove sink");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"addPluginToVideoTrack",value:function(e,t){return ro(this,null,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.addRemoveVideoPlugin(e,"add",t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"addPluginToAudioTrack",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.addRemoveAudioPlugin(e,"add"));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validateVideoPluginSupport",value:function(e){var t={isSupported:!1};if(!e)return fs.w("no plugin passed in for checking support"),t.errMsg="no plugin passed in for checking support",t;var n=this.store.getState(jo);if(n){var r=this.hmsSDKTracks[n];r?t=r.validatePlugin(e):(fs.w("track ".concat(n," not present, unable to validate plugin")),t.errMsg="track ".concat(n," not present, unable to validate plugin"))}return t}},{key:"validateAudioPluginSupport",value:function(e){var t={isSupported:!1};if(!e)return fs.w('no plugin passed in for checking support"'),t.errMsg='no plugin passed in for checking support"',t;var n=this.store.getState(Uo);if(n){var r=this.hmsSDKTracks[n];r?t=r.validatePlugin(e):(fs.w("track ".concat(n," not present, unable to validate plugin")),t.errMsg="track ".concat(n," not present, unable to validate plugin"))}return t}},{key:"removePluginFromVideoTrack",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.addRemoveVideoPlugin(e,"remove"));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"removePluginFromAudioTrack",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.addRemoveAudioPlugin(e,"remove"));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"changeRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ro(this,null,f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.hmsSDKPeers[e]){r.next=4;break}return this.logPossibleInconsistency("Unknown peer ID given ".concat(e," for changerole")),r.abrupt("return");case 4:return r.next=6,this.sdk.changeRole(i,t,n);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"acceptChangeRole",value:function(e){return ro(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.requestedBy?this.hmsSDKPeers[e.requestedBy.id]:void 0)||fs.w("peer for which role change is requested no longer available - ".concat(e.requestedBy)),r={requestedBy:n,role:e.role,token:e.token},t.next=5,this.sdk.acceptChangeRole(r);case 5:this.removeRoleChangeRequest(e);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"initAppData",value:function(e){this.setState((function(t){t.appData=e}),"initAppData")}},{key:"setAppData",value:function(e,t,n){var r="Object"===(null==t?void 0:t.constructor.name);this.setState((function(i){if(i.appData)n&&r?Object.assign(i.appData[e],t):i.appData[e]=t;else{var a=l({},e,t);i.appData=a}}),"setAppData-".concat(e))}},{key:"rejectChangeRole",value:function(e){this.removeRoleChangeRequest(e)}},{key:"endRoom",value:function(e,t){return ro(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==(r=this.store.getState(Zo))?void 0:r.endRoom){n.next=4;break}return fs.w("You are not allowed to perform this action - endRoom"),n.abrupt("return");case 4:return i=this.store.getState(Jo),this.setState((function(e){e.room.roomState=qa.Disconnecting}),"endingRoom"),n.prev=6,n.next=9,this.sdk.endRoom(e,t);case 9:this.resetState("endRoom"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),fs.e("error in ending room - ",n.t0),this.setState((function(e){e.room.roomState=i}),"revertEndRoom");case 15:case"end":return n.stop()}}),n,this,[[6,12]])})))}},{key:"removePeer",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKPeers[e])||r.isLocal){n.next=6;break}return n.next=4,this.sdk.removePeer(r,t);case 4:n.next=8;break;case 6:return this.logPossibleInconsistency("No remote peer found for peerID - ".concat(e)),n.abrupt("return");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"startRTMPOrRecording",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.startRTMPOrRecording(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPAndRecording",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.stopRTMPAndRecording();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.startHLSStreaming(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.stopHLSStreaming(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeName",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.changeName(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeMetadata",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"!=typeof e&&(e=JSON.stringify(e)),t.next=3,this.sdk.changeMetadata(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setRemoteTrackEnabled",value:function(e,t){return ro(this,null,f().mark((function n(){var r,i=this;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof e){n.next=10;break}if(!(r=this.hmsSDKTracks[e])||!Is(r)){n.next=7;break}return n.next=5,this.sdk.changeTrackState(r,t);case 5:n.next=8;break;case 7:this.logPossibleInconsistency("No remote track with ID ".concat(e," found for change track state"));case 8:n.next=11;break;case 10:Array.isArray(e)&&e.forEach((function(e){return i.setRemoteTrackEnabled(e,t)}));case 11:case"end":return n.stop()}}),n,this)})))}},{key:"setRemoteTracksEnabled",value:function(e){return ro(this,null,f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={enabled:e.enabled,type:e.type,source:e.source},e.roles&&(r=this.store.getState($o),n.roles=e.roles.map((function(e){return r[e]}))),t.next=4,this.sdk.changeMultiTrackState(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setLogLevel",value:function(e){fs.level=e,this.sdk.setLogLevel(e)}},{key:"ignoreMessageTypes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this.ignoredMessageTypes=e;else{var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.ignoredMessageTypes.includes(i)||this.ignoredMessageTypes.push(i)}}catch(a){r.e(a)}finally{r.f()}}}},{key:"resetState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"resetState";this.setState((function(e){Object.assign(e,co())}),e),this.isRoomJoinCalled=!1,this.hmsSDKTracks={},fs.cleanUp()}},{key:"sdkJoinWithListeners",value:function(e){this.sdk.join(e,{onJoin:this.onJoin.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this),onMessageReceived:this.onMessageReceived.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onRoleChangeRequest:this.onRoleChangeRequest.bind(this),onRoleUpdate:this.onRoleUpdate.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onChangeTrackStateRequest:this.onChangeTrackStateRequest.bind(this),onChangeMultiTrackStateRequest:this.onChangeMultiTrackStateRequest.bind(this),onRemovedFromRoom:this.onRemovedFromRoom.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)}),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:this.onConnectionQualityUpdate.bind(this)})}},{key:"onRemovedFromRoom",value:function(e){var t,n=this.store.getState(gs(null==(t=e.requestedBy)?void 0:t.peerId));this.hmsNotifications.sendLeaveRoom(no(to({},e),{requestedBy:n||void 0}));var r=e.roomEnded||!n?"roomEnded":"removedFromRoom";fs.i("resetting state after peer removed ".concat(r),e),this.resetState(r)}},{key:"onDeviceChange",value:function(e){var t=this,n=e.devices;if(n){var r=this.store.getState(Mo);if(this.setState((function(e){mo(e.devices.audioInput,n.audioInput)||(e.devices.audioInput=n.audioInput),mo(e.devices.videoInput,n.videoInput)||(e.devices.videoInput=n.videoInput),mo(e.devices.audioOutput,n.audioOutput)||(e.devices.audioOutput=n.audioOutput),t.hmsSDKPeers[null==r?void 0:r.id]&&Object.assign(e.settings,t.getMediaSettings(t.hmsSDKPeers[null==r?void 0:r.id]))}),"deviceChange"),e.selection){var i=yo.convertDeviceChangeUpdate(e);this.hmsNotifications.sendDeviceChange(i)}}}},{key:"sdkPreviewWithListeners",value:function(e){return ro(this,null,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.preview(e,{onPreview:this.onPreview.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)});case 2:this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onNetworkQuality",value:function(e){var t=this;this.setState((function(n){var r,i=n.room.localPeer||(null==(r=t.sdk.getLocalPeer())?void 0:r.peerId);i&&(n.connectionQualities[i]={peerID:i,downlinkQuality:e})}),"ConnectionQuality")}},{key:"startScreenShare",value:function(e){return ro(this,null,f().mark((function t(){var n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.store.getState(Wo)){t.next=4;break}this.logPossibleInconsistency("start screenshare is called while it's on"),t.next=7;break;case 4:return t.next=6,this.sdk.startScreenShare((function(){return n.syncRoomState("screenshareStopped")}),e);case 6:this.syncRoomState("startScreenShare");case 7:case"end":return t.stop()}}),t,this)})))}},{key:"stopScreenShare",value:function(){return ro(this,null,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.getState(Wo)){e.next=6;break}return e.next=3,this.sdk.stopScreenShare();case 3:this.syncRoomState("stopScreenShare"),e.next=7;break;case 6:this.logPossibleInconsistency("stop screenshare is called while it's not on");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"attachVideoInternal",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])||"video"!==r.type){n.next=7;break}return n.next=4,r.addSink(t);case 4:this.updateVideoLayer(e,"attachVideo"),n.next=8;break;case 7:this.logPossibleInconsistency("no video track found to add sink");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"syncRoomState",value:function(e){var t=this;fs.time("store-sync-".concat(e));var n,r={},i=[],a={},o={},s={},c=g(this.sdk.getPeers());try{for(c.s();!(n=c.n()).done;){var u=n.value,l=yo.convertPeer(u);r[l.id]=l,i.push(l.id),this.hmsSDKPeers[l.id]=u;var d,f=g([u.audioTrack,u.videoTrack].concat(h(u.auxiliaryTracks)));try{for(f.s();!(d=f.n()).done;){var p=d.value;if(p){var v=yo.convertTrack(p);a[v.id]=v,o[p.trackId]=p}}}catch(b){f.e(b)}finally{f.f()}l.isLocal&&Object.assign(s,this.getMediaSettings(u))}}catch(b){c.e(b)}finally{c.f()}var m=this.sdk.getRecordingState(),y=this.sdk.getRTMPState(),k=this.sdk.getHLSState();this.setState((function(e){e.room.peers=i;var n=e.peers,c=e.tracks;(function(e,t){var n,r=g(go(Object.keys(e),Object.keys(t)));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i],o=t[i];ho(a,o)?(mo(a.auxiliaryTracks,o.auxiliaryTracks)&&(o.auxiliaryTracks=a.auxiliaryTracks),Object.assign(a,o)):po(a,o)?delete e[i]:vo(a,o)&&(e[i]=o)}}catch(b){r.e(b)}finally{r.f()}})(n,r),function(e,t){var n,r=g(go(Object.keys(e),Object.keys(t)));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i],o=t[i];ho(a,o)?(fo(a,o),Object.assign(a,o)):po(a,o)?delete e[i]:vo(a,o)&&(e[i]=o)}}catch(b){r.e(b)}finally{r.f()}}(c,a),Object.assign(e.settings,s),t.hmsSDKTracks=o,Object.assign(e.roles,yo.convertRoles(t.sdk.getRoles())),Object.assign(e.playlist,yo.convertPlaylist(t.sdk.getPlaylistManager())),Object.assign(e.room,yo.convertRecordingStreamingState(m,y,k))}),e),fs.timeEnd("store-sync-".concat(e))}},{key:"onPreview",value:function(e){this.setState((function(t){Object.assign(t.room,yo.convertRoom(e)),t.room.roomState=qa.Preview}),"previewStart"),this.syncRoomState("previewSync")}},{key:"onJoin",value:function(e){var t=this,n=this.sdk.getPlaylistManager();this.audioPlaylist=new Os(n,so.audio,this.syncPlaylistState.bind(this),this.store),this.videoPlaylist=new Os(n,so.video,this.syncRoomState.bind(this),this.store),this.syncRoomState("joinSync"),this.setState((function(t){Object.assign(t.room,yo.convertRoom(e)),t.room.isConnected=!0,t.room.roomState=qa.Connected}),"joined"),n.onProgress(this.setProgress),n.onNewTrackStart((function(e){t.syncPlaylistState("".concat(e.type,"PlaylistUpdate"))})),n.onPlaylistEnded((function(e){t.syncPlaylistState("".concat(e,"PlaylistEnded"))})),n.onCurrentTrackEnded((function(e){t.hmsNotifications.sendPlaylistTrackEnded(yo.convertPlaylistItem(n,e)),t.syncPlaylistState("".concat(e.type,"PlaylistItemEnded"))}))}},{key:"onRoomUpdate",value:function(e,t){this.setState((function(e){Object.assign(e.room,yo.convertRoom(t))}),"RoomUpdate")}},{key:"onPeerUpdate",value:function(e,t){if(![on.BECAME_DOMINANT_SPEAKER,on.RESIGNED_DOMINANT_SPEAKER].includes(e)){if(Array.isArray(t)){this.syncRoomState("peersJoined");var n,r=[],i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=this.store.getState(gs(a.peerId));o&&r.push(o)}}catch(s){i.e(s)}finally{i.f()}return void this.hmsNotifications.sendPeerList(r)}this.sendPeerUpdateNotification(e,t)}}},{key:"onTrackUpdate",value:function(e,t,n){if(e===sn.TRACK_REMOVED)this.hmsNotifications.sendTrackUpdate(e,t.trackId),this.handleTrackRemove(t,n);else{var r=e===sn.TRACK_ADDED?"trackAdded":"trackUpdate";this.syncRoomState(r),this.hmsNotifications.sendTrackUpdate(e,t.trackId)}}},{key:"onMessageReceived",value:function(e){var t=yo.convertMessage(e);t.read=!1,t.ignored=this.ignoredMessageTypes.includes(t.type),this.putMessageInStore(t),this.hmsNotifications.sendMessageReceived(t)}},{key:"putMessageInStore",value:function(e){var t=this;e.ignored||this.setState((function(n){e.id=String(t.store.getState(qo)+1),n.messages.byID[e.id]=e,n.messages.allIDs.push(e.id)}),"newMessage")}},{key:"onAudioLevelUpdate",value:function(e){this.setState((function(t){var n={};e.forEach((function(e){if(e.track&&e.peer){var r=e.track.trackId;n[r]=e.audioLevel,t.speakers[r]||(t.speakers[r]={audioLevel:e.audioLevel,peerID:e.peer.peerId,trackID:r})}}));for(var r=0,i=Object.entries(t.speakers);r<i.length;r++){var a=u(i[r],2),o=a[0],s=a[1];s.audioLevel=n[o]||0,0===s.audioLevel&&delete t.speakers[o]}}),"audioLevel")}},{key:"onConnectionQualityUpdate",value:function(e){this.setState((function(t){var n=new Set;e.forEach((function(e){var r=e.peerID;!r||(n.add(r),t.connectionQualities[r]?Object.assign(t.connectionQualities[r],e):t.connectionQualities[r]=e)}));for(var r=0,i=Object.keys(t.connectionQualities);r<i.length;r++){var a=i[r];n.has(a)||delete t.connectionQualities[a]}}),"connectionQuality")}},{key:"onChangeTrackStateRequest",value:function(e){var t,n=this.store.getState(gs(null==(t=e.requestedBy)?void 0:t.peerId)),r=this.getStoreLocalTrackIDfromSDKTrack(e.track),i=this.store.getState(ys(r));if(!i)return this.logPossibleInconsistency("Not found track for which track state change was requested, ".concat(e.track));e.enabled||this.syncRoomState("changeTrackStateRequest"),this.hmsNotifications.sendChangeTrackStateRequest({requestedBy:n||void 0,track:i,enabled:e.enabled})}},{key:"onChangeMultiTrackStateRequest",value:function(e){var t,n=this.store.getState(gs(null==(t=e.requestedBy)?void 0:t.peerId));e.enabled||this.syncRoomState("changeMultiTrackStateRequest");var r,i=[],a=this.store.getState(Io),o=g(e.tracks);try{for(o.s();!(r=o.n()).done;){var s=r.value,c=this.getStoreLocalTrackIDfromSDKTrack(s);c&&a[c]&&i.push(a[c])}}catch(u){o.e(u)}finally{o.f()}this.hmsNotifications.sendChangeMultiTrackStateRequest({requestedBy:n||void 0,tracks:i,enabled:e.enabled,type:e.type,source:e.source})}},{key:"onReconnected",value:function(){this.syncRoomState("reconnectedSync"),this.hmsNotifications.sendReconnected(),this.setState((function(e){e.room.roomState=e.room.isConnected?qa.Connected:qa.Preview}),"reconnected")}},{key:"onReconnecting",value:function(e){var t=yo.convertException(e);fs.e("Reconnection: received error from sdk",t),this.hmsNotifications.sendReconnecting(t),this.setState((function(e){e.room.roomState=qa.Reconnecting,e.errors.push(t)}),"reconnecting")}},{key:"onError",value:function(e){var t=yo.convertException(e);t.isTerminal?(this.leave().then((function(){return fs.e("error from SDK, left room.")})),this.setState((function(e){e.room.roomState=qa.Failed,e.errors.push(t)}),"errorTerminal")):this.store.getState().errors.length<50&&this.setState((function(e){e.errors.push(t)}),"error"),this.syncRoomState("errorSync"),this.hmsNotifications.sendError(t),fs.e("received error from sdk",t)}},{key:"updateVideoLayer",value:function(e,t){var n=this.hmsSDKTracks[e];n&&n instanceof dr&&this.setState((function(t){t.tracks[e].layer=n.getSimulcastLayer(),t.tracks[e].degraded=n.degraded}),t)}},{key:"handleTrackRemove",value:function(e,t){var n=this;this.setState((function(r){var i=r.peers[t.peerId],a=r.tracks,o=e.trackId;if(n.isSameStoreSDKTrack(o,null==i?void 0:i.audioTrack))null==i||delete i.audioTrack;else if(n.isSameStoreSDKTrack(o,null==i?void 0:i.videoTrack))null==i||delete i.videoTrack;else{var s=null==i?void 0:i.auxiliaryTracks.indexOf(o);s>-1&&n.isSameStoreSDKTrack(o,null==i?void 0:i.auxiliaryTracks[s])&&(null==i||i.auxiliaryTracks.splice(s,1))}delete a[o],delete n.hmsSDKTracks[o]}),"trackRemoved")}},{key:"setEnabledSDKTrack",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=6;break}return n.next=4,r.setEnabled(t);case 4:n.next=7;break;case 6:this.logPossibleInconsistency("track ".concat(e," not present, unable to enabled/disable"));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"setSDKLocalVideoTrackSettings",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=6;break}return n.next=4,r.setSettings(t);case 4:n.next=7;break;case 6:this.logPossibleInconsistency("local track ".concat(e," not present, unable to set settings"));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"setSDKLocalAudioTrackSettings",value:function(e,t){return ro(this,null,f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=6;break}return n.next=4,r.setSettings(t);case 4:n.next=7;break;case 6:this.logPossibleInconsistency("local track ".concat(e," not present, unable to set settings"));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getMediaSettings",value:function(e){var t,n=this.store.getState(Oo),r=e.audioTrack,i=e.videoTrack;return{audioInputDeviceId:(null==r?void 0:r.settings.deviceId)||n.audioInputDeviceId,videoInputDeviceId:(null==i?void 0:i.settings.deviceId)||n.videoInputDeviceId,audioOutputDeviceId:null==(t=this.sdk.getAudioOutput().getDevice())?void 0:t.deviceId}}},{key:"setTrackVolume",value:function(e,t){var n=this.hmsSDKTracks[t];n?n instanceof cr?(n.setVolume(e),this.setState((function(n){var r=n.tracks[t];r&&(r.volume=e)}),"trackVolume")):fs.w("track ".concat(t," is not an audio track")):this.logPossibleInconsistency("track ".concat(t," not present, unable to set volume"))}},{key:"localAndVideoUnmuting",value:function(e){if(this.store.getState(Mo).videoTrack!==e)return!1;var t=this.store.getState(Ho),n=this.store.getState(Go);return t&&!n}},{key:"logPossibleInconsistency",value:function(e){fs.w("possible inconsistency detected - ",e)}},{key:"addRemoveVideoPlugin",value:function(e,t,n){return ro(this,null,f().mark((function r(){var i,a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return fs.w("Invalid plugin received in store"),r.abrupt("return");case 3:if(!(i=this.store.getState(jo))){r.next=20;break}if(!(a=this.hmsSDKTracks[i])){r.next=19;break}if("add"!==t){r.next=12;break}return r.next=10,a.addPlugin(e,n);case 10:r.next=16;break;case 12:if(r.t0="remove"===t,!r.t0){r.next=16;break}return r.next=16,a.removePlugin(e);case 16:this.syncRoomState("".concat(t,"VideoPlugin")),r.next=20;break;case 19:this.logPossibleInconsistency("track ".concat(i," not present, unable to remove plugin"));case 20:case"end":return r.stop()}}),r,this)})))}},{key:"addRemoveAudioPlugin",value:function(e,t){return ro(this,null,f().mark((function n(){var r,i;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return fs.w("Invalid plugin received in store"),n.abrupt("return");case 3:if(!(r=this.store.getState(Uo))){n.next=20;break}if(!(i=this.hmsSDKTracks[r])){n.next=19;break}if("add"!==t){n.next=12;break}return n.next=10,i.addPlugin(e);case 10:n.next=16;break;case 12:if(n.t0="remove"===t,!n.t0){n.next=16;break}return n.next=16,i.removePlugin(e);case 16:this.syncRoomState("".concat(t,"AudioPlugin")),n.next=20;break;case 19:this.logPossibleInconsistency("track ".concat(r," not present, unable to remove plugin"));case 20:case"end":return n.stop()}}),n,this)})))}},{key:"isSameStoreSDKTrack",value:function(e,t){var n;return!!t&&(null==(n=this.hmsSDKTracks[t])?void 0:n.trackId)===e}},{key:"onRoleChangeRequest",value:function(e){this.setState((function(t){0===t.roleChangeRequests.length&&t.roleChangeRequests.push(yo.convertRoleChangeRequest(e))}),"roleChangeRequest")}},{key:"removeRoleChangeRequest",value:function(e){this.setState((function(t){var n=t.roleChangeRequests.findIndex((function(t){return t.token===e.token}));-1!==n&&t.roleChangeRequests.splice(n,1)}),"removeRoleChangeRequest")}},{key:"onRoleUpdate",value:function(){this.syncRoomState("roleUpdate")}},{key:"getStoreLocalTrackIDfromSDKTrack",value:function(e){var t=this;return this.store.getState(Bo).find((function(n){return t.hmsSDKTracks[n].trackId===e.trackId}))}}]),e}(),Fs="hmsNotification",Us=function(){function e(t){var n=this;p(this,e),this.id=0,this.onNotification=function(e,t){var r=function(n){if(t&&!(Array.isArray(t)?t.includes(n.type):t===n.type))return;e(n)};return n.eventEmitter.addListener(Fs,r),function(){n.eventEmitter.removeListener(Fs,r)}},this.store=t,this.eventEmitter=new Kt.EventEmitter2}return m(e,[{key:"sendPlaylistTrackEnded",value:function(e){var t=this.createNotification(oo.PLAYLIST_TRACK_ENDED,e,ao.INFO);this.emitEvent(t)}},{key:"sendDeviceChange",value:function(e){var t,n=this.createNotification(oo.DEVICE_CHANGE_UPDATE,e,e.error?ao.ERROR:ao.INFO,"Selected ".concat(e.type," device - ").concat(null==(t=e.selection)?void 0:t.label));this.emitEvent(n)}},{key:"sendLeaveRoom",value:function(e){var t,n=null==(t=e.requestedBy)?void 0:t.name,r=this.createNotification(e.roomEnded||!n?oo.ROOM_ENDED:oo.REMOVED_FROM_ROOM,e,ao.INFO,"".concat(e.roomEnded?"Room ended":"Removed from room"," ").concat(n?"by ".concat(n):""));this.emitEvent(r)}},{key:"sendPeerList",value:function(e){var t=this.createNotification(oo.PEER_LIST,e,ao.INFO);this.emitEvent(t)}},{key:"sendPeerUpdate",value:function(e,t){var n=this.store.getState(gs(null==t?void 0:t.id))||t,r=Ns[e];if(r){var i=this.createNotification(r,n,ao.INFO);this.emitEvent(i)}}},{key:"sendTrackUpdate",value:function(e,t){var n=this.store.getState(ys(t)),r=Ds[e];if(r){var i=this.createNotification(r,n,ao.INFO);this.emitEvent(i)}}},{key:"sendMessageReceived",value:function(e){var t=this.createNotification(oo.NEW_MESSAGE,e,ao.INFO);this.emitEvent(t)}},{key:"sendError",value:function(e){var t=this.createNotification(oo.ERROR,e,ao.ERROR);this.emitEvent(t)}},{key:"sendReconnecting",value:function(e){var t=this.createNotification(oo.RECONNECTING,e,ao.ERROR);this.emitEvent(t)}},{key:"sendReconnected",value:function(){var e=this.createNotification(oo.RECONNECTED,null,ao.INFO);this.emitEvent(e)}},{key:"sendChangeTrackStateRequest",value:function(e){var t=this.createNotification(oo.CHANGE_TRACK_STATE_REQUEST,e,ao.INFO);this.emitEvent(t)}},{key:"sendChangeMultiTrackStateRequest",value:function(e){var t=this.createNotification(oo.CHANGE_MULTI_TRACK_STATE_REQUEST,e,ao.INFO);this.emitEvent(t)}},{key:"emitEvent",value:function(e){this.eventEmitter.emit(Fs,e)}},{key:"createNotification",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.id++,{id:this.id,type:e,message:r,data:t,severity:n}}}]),e}(),js=function(e){return yr?"".concat(e," ").concat(document.title):e},Vs=function(e,t,n){var r,i,a=Bs(n,t);null==(r=e.getWebrtcInternals())||r.start();var o=null==(i=e.getWebrtcInternals())?void 0:i.onStatsChange((function(e){return zs(t,e,n)}));return function(){a(),o&&o()}},Bs=function(e,t){var n,r,i;return e.getState(Fo)?t.namedSetState((function(t){t.localPeer.id=e.getState(Fo)}),"localpeer-id"):n=e.subscribe((function(e){e&&t.namedSetState((function(t){t.localPeer.id=e}),"localpeer-id")}),Fo),e.getState(jo)?t.namedSetState((function(t){t.localPeer.videoTrack=e.getState(jo)}),"localpeer-videotrack-id"):r=e.subscribe((function(e){e&&t.namedSetState((function(t){t.localPeer.videoTrack=e}),"localpeer-videotrack-id")}),jo),e.getState(Uo)?t.namedSetState((function(t){t.localPeer.videoTrack=e.getState(Uo)}),"localpeer-audiotrack-id"):i=e.subscribe((function(e){e&&t.namedSetState((function(t){t.localPeer.videoTrack=e}),"localpeer-audiotrack-id")}),Uo),function(){null==n||n(),null==r||r(),null==i||i()}},zs=function(e,t,n){var r=n.getState(Io);e.namedSetState((function(e){for(var i={},a=0,o=Object.keys(r);a<o.length;a++){var s=o[a],c=t.getTrackStats(s);c&&(i[s]=c)}lo(e.trackStats,i);var u=l({},n.getState(Fo),t.getLocalPeerStats());lo(e.peerStats,u)}),"webrtc-stats")},Gs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resetState";e.namedSetState((function(e){Object.assign(e,{peerStats:{},trackStats:{},localPeer:{id:""}})}),t)},Hs=m((function e(t,n){var r=this;p(this,e),this.hmsStore=t,this.sdk=n,this.store=Xs.createNewHMSStore(js("HMSStatsStore"),uo),this.getState=this.store.getState,this.subscribe=this.store.subscribe,this.getPublishPeerConnection=function(){return new Promise((function(e){var t,n;"Connected"===r.hmsStore.getState(Jo)?e(null==(n=null==(t=r.sdk)?void 0:t.getWebrtcInternals())?void 0:n.getPublishPeerConnection()):r.hmsStore.subscribe((function(t){var n,i;"Connected"===t&&e(null==(i=null==(n=r.sdk)?void 0:n.getWebrtcInternals())?void 0:i.getPublishPeerConnection())}),Jo)}))},this.getSubscribePeerConnection=function(){return new Promise((function(e){var t,n;"Connected"===r.hmsStore.getState(Jo)?e(null==(n=null==(t=r.sdk)?void 0:t.getWebrtcInternals())?void 0:n.getSubscribePeerConnection()):r.hmsStore.subscribe((function(t){var n,i;"Connected"===t&&e(null==(i=null==(n=r.sdk)?void 0:n.getWebrtcInternals())?void 0:i.getSubscribePeerConnection())}),Jo)}))},this.sdk&&function(e,t,n){var r;n.getState(Jo)===qa.Connected&&(r=Vs(e,t,n)),n.subscribe((function(i){[qa.Connected,qa.Reconnecting].includes(i)?r||(r=Vs(e,t,n)):r&&(Gs(t),r())}),Jo)}(this.sdk,this.store,this.hmsStore)})),Ws=function(e){return e.trackStats},Ks=function(e){return e.peerStats},qs=Ka([Ks,function(e){return e.localPeer.id}],(function(e,t){return e[t]})),Qs=(Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.packetsLost})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.jitter})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.publish)?void 0:t.bitrate})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.bitrate})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.publish)?void 0:t.availableOutgoingBitrate})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.availableIncomingBitrate})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.publish)?void 0:t.bytesSent})),Ka(qs,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.bytesReceived})),Ka([Ks,function(e,t){return t}],(function(e,t){return t?e[t]:void 0}))),Js=Ka([Ws,function(e,t){return t}],(function(e,t){return t?e[t]:void 0})),Ys=(ls(Qs),ls(Js),ls(Ka(Js,(function(e){return null==e?void 0:e.bitrate}))),ls(Ka(Js,(function(e){return null==e?void 0:e.bytesReceived}))),ls(Ka(Js,(function(e){return null==e?void 0:e.framesPerSecond}))),ls(Ka(Js,(function(e){return null==e?void 0:e.jitter}))),ls(Ka(Js,(function(e){return null==e?void 0:e.packetsLost}))),Ka([Ws,function(e){return e.localPeer.audioTrack}],(function(e,t){return t?e[t]:void 0}))),$s=Ka([Ws,function(e){return e.localPeer.videoTrack}],(function(e,t){return t?e[t]:void 0})),Xs=(Ka(Ys,(function(e){return null==e?void 0:e.bitrate})),Ka($s,(function(e){return null==e?void 0:e.bitrate})),Ka(Ys,(function(e){return null==e?void 0:e.bytesSent})),Ka($s,(function(e){return null==e?void 0:e.bytesSent})),Ka($s,(function(e){return null==e?void 0:e.framesPerSecond})),Ka($s,(function(e){return null==e?void 0:e.qualityLimitationReason})),function(){function e(t,n,r){var i=this;p(this,e),this.getStats=function(){return i.stats||(i.stats=new Hs(i.store,i.sdk)),i.stats},this.store=t||e.createNewHMSStore(js("HMSStore"),co),this.notifications=r||new Us(this.store),n?this.actions=n:(this.sdk=new ja,this.actions=new Ms(this.store,this.sdk,this.notifications)),this.initialTriggerOnSubscribe=!1,yr&&(window.__hms=this)}return m(e,[{key:"triggerOnSubscribe",value:function(){this.initialTriggerOnSubscribe||(e.makeStoreTriggerOnSubscribe(this.store),this.initialTriggerOnSubscribe=!0)}},{key:"getStore",value:function(){return this.store}},{key:"getHMSActions",value:function(){return this.actions}},{key:"getActions",value:function(){return this.actions}},{key:"getNotifications",value:function(){return{onNotification:this.notifications.onNotification}}}],[{key:"createNewHMSStore",value:function(t,n){var r=ge((function(){return n()})),i=r.setState;r.setState=function(e){var t="function"==typeof e?me(e):e;i(t)};var a=r.getState;r.getState=function(e){if(e){var t=e.name||"byIDSelector";window.selectorsCount||(window.selectorsCount={}),window.selectorsCount[t]=(window.selectorsCount[t]||0)+1;var n=performance.now(),r=e(a()),i=performance.now()-n;return i>1&&(window.expensiveSelectors=window.expensiveSelectors||new Map,window.expensiveSelectors.set(t,i)),r}return a()},e.compareWithShallowCheckInSubscribe(r);var o=e.setUpDevtools(r,t);return no(to({},r),{namedSetState:o})}},{key:"makeStoreTriggerOnSubscribe",value:function(e){var t=e.subscribe;e.subscribe=function(n,r,i){return n(e.getState(r),void 0),t(n,r,i)}}},{key:"compareWithShallowCheckInSubscribe",value:function(e){var t=e.subscribe;e.subscribe=function(e,n,r){return n||(n=function(e){return e}),t(e,n,r=r||ye)}}},{key:"setUpDevtools",value:function(t,n){var r;try{r=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(y){}if(!r)return function(e){t.setState(e)};var i=r.connect(e.devtoolsOptions(n));i.prefix=n?"".concat(n," > "):"";var a=t.setState;return t.setState=function(e){a(e),i.send("".concat(i.prefix,"setState"),t.getState())},i.subscribe(e.devtoolsSubscribe(i,t,a)),i.send("setUpStore",t.getState()),function(e,n){a(e);var r=n||"".concat(i.prefix,"action");i.send(r,t.getState())}}},{key:"devtoolsOptions",value:function(e){return{name:e,actionsBlacklist:["audioLevel","playlistProgress","connectionQuality"]}}},{key:"devtoolsSubscribe",value:function(e,t,n){return function(r){var i,a,o,s;if("DISPATCH"===r.type&&r.state)["JUMP_TO_ACTION","JUMP_TO_STATE"].includes(r.payload.type)?n(JSON.parse(r.state)):t.setState(JSON.parse(r.state));else if("DISPATCH"===r.type&&"COMMIT"===(null==(i=r.payload)?void 0:i.type))e.init(t.getState());else if("DISPATCH"===r.type&&"IMPORT_STATE"===(null==(a=r.payload)?void 0:a.type)){var c=null==(o=r.payload.nextLiftedState)?void 0:o.actionsById;((null==(s=r.payload.nextLiftedState)?void 0:s.computedStates)||[]).forEach((function(r,i){var a=r.state,o=c[i]||"".concat(e.prefix,"setState");0===i?e.init(a):(n(a),e.send(o,t.getState()))}))}}}}]),e}());function Zs(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}var ec,tc,nc="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?a.useEffect:a.useLayoutEffect;function rc(e){var t="function"===typeof e?Zs(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,i=(0,a.useReducer)((function(e){return e+1}),0),o=u(i,2),s=o[1],c=t.getState(),l=(0,a.useRef)(c),d=(0,a.useRef)(n),f=(0,a.useRef)(r),h=(0,a.useRef)(!1),p=(0,a.useRef)();void 0===p.current&&(p.current=n(c));var v=!1;(l.current!==c||d.current!==n||f.current!==r||h.current)&&(e=n(c),v=!r(p.current,e)),nc((function(){v&&(p.current=e),l.current=c,d.current=n,f.current=r,h.current=!1}));var m=(0,a.useRef)(c);nc((function(){var e=function(){try{var e=t.getState(),n=d.current(e);f.current(p.current,n)||(l.current=e,p.current=n,s())}catch(r){h.current=!0,s()}},n=t.subscribe(e);return t.getState()!==m.current&&e(),n}),[]);var g=v?e:p.current;return(0,a.useDebugValue)(g),g};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}function ic(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}(tc=ec||(ec={}))[tc.VERBOSE=0]="VERBOSE",tc[tc.DEBUG=1]="DEBUG",tc[tc.INFO=2]="INFO",tc[tc.WARN=3]="WARN",tc[tc.ERROR=4]="ERROR",tc[tc.NONE=5]="NONE";var ac=function(){function e(){p(this,e)}return m(e,null,[{key:"v",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[ec.VERBOSE,e].concat(n))}},{key:"d",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[ec.DEBUG,e].concat(n))}},{key:"i",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[ec.INFO,e].concat(n))}},{key:"w",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[ec.WARN,e].concat(n))}},{key:"e",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[ec.ERROR,e].concat(n))}},{key:"log",value:function(e,t){for(var n,r,i,a,o,s=arguments.length,c=new Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];if(!(this.level.valueOf()>e.valueOf()))switch(e){case ec.VERBOSE:(n=console).log.apply(n,["HMSui-components: ",t].concat(c));break;case ec.DEBUG:(r=console).debug.apply(r,["HMSui-components: ",t].concat(c));break;case ec.INFO:(i=console).info.apply(i,["HMSui-components: ",t].concat(c));break;case ec.WARN:(a=console).warn.apply(a,["HMSui-components: ",t].concat(c));break;case ec.ERROR:(o=console).error.apply(o,["HMSui-components: ",t].concat(c))}}}]),e}();ac.level=ec.VERBOSE;var oc="It seems like you forgot to add your component within a top level HMSRoomProvider, please refer to 100ms react docs(https://docs.100ms.live/javascript/v2/features/integration#react-hooks) to check on the required steps for using this hook.";var sc,cc="undefined"!=typeof window,uc=(0,a.createContext)(null),lc=function(e){var t=e.children,n=e.actions,r=e.store,i=e.notifications,o=e.stats,s=e.isHMSStatsOn,c=void 0!==s&&s;if(!sc){var u=function(){throw new Error("modifying store is not allowed")};if(n&&r)sc={actions:n,store:rc(Object.assign(Object.assign({},r),{setState:u,destroy:u}))},i&&(sc.notifications=i),o&&(sc.statsStore=rc({getState:o.getState,subscribe:o.subscribe,setState:u,destroy:u}));else{var l=new Xs;if(sc={actions:l.getActions(),store:rc(Object.assign(Object.assign({},l.getStore()),{setState:u,destroy:u})),notifications:l.getNotifications()},c){var d=l.getStats();sc.statsStore=rc({getState:d.getState,subscribe:d.subscribe,setState:u,destroy:u})}}}return(0,a.useEffect)((function(){cc&&(window.addEventListener("beforeunload",(function(){return sc.actions.leave()})),window.addEventListener("onunload",(function(){return sc.actions.leave()})))}),[]),a.createElement(uc.Provider,{value:sc},t)},dc=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ic;t||ac.w("fetching full store without passing any selector may have a heavy performance impact on your website.");var r=(0,a.useContext)(e);if(!r)throw new Error(oc);return(0,r.store)(t,n)}}(uc),fc=(function(e){}(uc),function(){var e=(0,a.useContext)(uc);if(!e)throw new Error(oc);return e.actions});function hc(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))}function pc(){return pc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pc.apply(this,arguments)}function vc(e,t){return vc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vc(e,t)}var mc=new Map,gc=new WeakMap,yc=0,kc=void 0;function bc(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?function(e){return e?(gc.has(e)||(yc+=1,gc.set(e,yc.toString())),gc.get(e)):"0"}(e.root):e[t])})).toString()}function wc(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=kc),"undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var a=function(e){var t=bc(e),n=mc.get(t);if(!n){var r,i=new Map,a=new IntersectionObserver((function(t){t.forEach((function(t){var n,a=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(n=i.get(t.target))||n.forEach((function(e){e(a,t)}))}))}),e);r=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:a,elements:i},mc.set(t,n)}return n}(n),o=a.id,s=a.observer,c=a.elements,u=c.get(e)||[];return c.has(e)||c.set(e,u),u.push(t),s.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(c.delete(e),s.unobserve(e)),0===c.size&&(s.disconnect(),mc.delete(o))}}var Sc=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function Tc(e){return"function"!==typeof e.children}var Ec=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).node=null,n._unobserveCb=null,n.handleNode=function(e){n.node&&(n.unobserve(),e||n.props.triggerOnce||n.props.skip||n.setState({inView:!!n.props.initialInView,entry:void 0})),n.node=e||null,n.observeNode()},n.handleChange=function(e,t){e&&n.props.triggerOnce&&n.unobserve(),Tc(n.props)||n.setState({inView:e,entry:t}),n.props.onChange&&n.props.onChange(e,t)},n.state={inView:!!t.initialInView,entry:void 0},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,vc(t,n);var i=r.prototype;return i.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},i.componentWillUnmount=function(){this.unobserve(),this.node=null},i.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,i=e.trackVisibility,a=e.delay,o=e.fallbackInView;this._unobserveCb=wc(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r,trackVisibility:i,delay:a},o)}},i.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},i.render=function(){if(!Tc(this.props)){var e=this.state,t=e.inView,n=e.entry;return this.props.children({inView:t,entry:n,ref:this.handleNode})}var r=this.props,i=r.children,o=r.as,s=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(r,Sc);return a.createElement(o||"div",pc({ref:this.handleNode},s),i)},r}(a.Component);Ec.displayName="InView",Ec.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};var xc=function(e){var t=e.trackId,n=e.attach,r=fc(),i=(0,a.useRef)(null),o=dc(ys(t)),s=function(e){var t=void 0===e?{}:e,n=t.threshold,r=t.delay,i=t.trackVisibility,o=t.rootMargin,s=t.root,c=t.triggerOnce,u=t.skip,l=t.initialInView,d=t.fallbackInView,f=a.useRef(),h=a.useState({inView:!!l}),p=h[0],v=h[1],m=a.useCallback((function(e){void 0!==f.current&&(f.current(),f.current=void 0),u||e&&(f.current=wc(e,(function(e,t){v({inView:e,entry:t}),t.isIntersecting&&c&&f.current&&(f.current(),f.current=void 0)}),{root:s,rootMargin:o,threshold:n,trackVisibility:i,delay:r},d))}),[Array.isArray(n)?n.toString():n,s,o,c,u,i,d,r]);(0,a.useEffect)((function(){f.current||!p.entry||c||u||v({inView:!!l})}));var g=[m,p.inView,p.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}({threshold:.5}),c=s.ref,u=s.inView,l=(0,a.useCallback)((function(e){e&&(i.current=e,c(e))}),[c]);return(0,a.useEffect)((function(){hc(void 0,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.current&&(null==o?void 0:o.id),!e.t0){e.next=9;break}if(!u||!o.enabled||!1===n){e.next=7;break}return e.next=5,r.attachVideo(o.id,i.current);case 5:e.next=9;break;case 7:return e.next=9,r.detachVideo(o.id,i.current);case 9:case"end":return e.stop()}}),e)})))}),[r,u,i,null==o?void 0:o.id,null==o?void 0:o.enabled,null==o?void 0:o.deviceID,null==o?void 0:o.plugins,n]),(0,a.useEffect)((function(){return function(){hc(void 0,void 0,void 0,f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.current||!o){e.next=9;break}return e.prev=1,e.next=4,r.detachVideo(o.id,i.current);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),ac.w("detach video error for track",o.id,e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))}}),[]),{videoRef:l}},Cc=n(184);var Pc=function(e){var t=e.peer,n=xc({trackId:t.videoTrack}).videoRef;return(0,Cc.jsxs)("div",{className:"peer-container",children:[(0,Cc.jsx)("video",{ref:n,className:"peer-video ".concat(t.isLocal?"local":""),autoPlay:!0,muted:!0,playsInline:!0}),(0,Cc.jsxs)("div",{className:"peer-name",children:[t.name," ",t.isLocal?"(You)":""]})]})};var Rc=function(){var e=dc(Do);return(0,Cc.jsx)("div",{className:"room-section",children:(0,Cc.jsx)("div",{className:"conference-section",children:(0,Cc.jsx)("div",{className:"peers-container",children:e.map((function(e){return(0,Cc.jsx)(Pc,{peer:e},e.id)}))})})})},_c=function(e,t){return ac.e("react-sdk",t,e)};function Ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(n),!0).forEach((function(t){Dc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oc(e){return Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(e)}function Nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||Fc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mc(e){return function(e){if(Array.isArray(e))return Uc(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fc(e,t){if(e){if("string"===typeof e)return Uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uc(e,t):void 0}}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jc=function(){},Vc={},Bc={},zc=null,Gc={mark:jc,measure:jc};try{"undefined"!==typeof window&&(Vc=window),"undefined"!==typeof document&&(Bc=document),"undefined"!==typeof MutationObserver&&(zc=MutationObserver),"undefined"!==typeof performance&&(Gc=performance)}catch(cf){}var Hc=(Vc.navigator||{}).userAgent,Wc=void 0===Hc?"":Hc,Kc=Vc,qc=Bc,Qc=zc,Jc=Gc,Yc=(Kc.document,!!qc.documentElement&&!!qc.head&&"function"===typeof qc.addEventListener&&"function"===typeof qc.createElement),$c=~Wc.indexOf("MSIE")||~Wc.indexOf("Trident/"),Xc="svg-inline--fa",Zc="data-fa-i2svg",eu="data-fa-pseudo-element",tu="data-prefix",nu="data-icon",ru="fontawesome-i2svg",iu=["HTML","HEAD","STYLE","SCRIPT"],au=function(){try{return!0}catch(cf){return!1}}(),ou={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},su={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},cu={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},uu={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},lu=/fa[srltdbk\-\ ]/,du="fa-layers-text",fu=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,hu={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},pu=[1,2,3,4,5,6,7,8,9,10],vu=pu.concat([11,12,13,14,15,16,17,18,19,20]),mu=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],gu="duotone-group",yu="swap-opacity",ku="primary",bu="secondary",wu=[].concat(Mc(Object.keys(su)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",gu,yu,ku,bu]).concat(pu.map((function(e){return"".concat(e,"x")}))).concat(vu.map((function(e){return"w-".concat(e)}))),Su=Kc.FontAwesomeConfig||{};if(qc&&"function"===typeof qc.querySelector){[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Lc(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=qc.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(Su[r]=i)}))}var Tu=Ic(Ic({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:Xc,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),Su);Tu.autoReplaceSvg||(Tu.observeMutations=!1);var Eu={};Object.keys(Tu).forEach((function(e){Object.defineProperty(Eu,e,{enumerable:!0,set:function(t){Tu[e]=t,xu.forEach((function(e){return e(Eu)}))},get:function(){return Tu[e]}})})),Kc.FontAwesomeConfig=Eu;var xu=[];var Cu=16,Pu={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Ru(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function _u(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Au(e){return e.classList?_u(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function Iu(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ou(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function Nu(e){return e.size!==Pu.size||e.x!==Pu.x||e.y!==Pu.y||e.rotate!==Pu.rotate||e.flipX||e.flipY}function Du(){var e="fa",t=Xc,n=Eu.familyPrefix,r=Eu.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var Lu=!1;function Mu(){Eu.autoAddCss&&!Lu&&(!function(e){if(e&&Yc){var t=qc.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=qc.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}qc.head.insertBefore(t,r)}}(Du()),Lu=!0)}var Fu={mixout:function(){return{dom:{css:Du,insertCss:Mu}}},hooks:function(){return{beforeDOMElementCreation:function(){Mu()},beforeI2svg:function(){Mu()}}}},Uu=Kc||{};Uu.___FONT_AWESOME___||(Uu.___FONT_AWESOME___={}),Uu.___FONT_AWESOME___.styles||(Uu.___FONT_AWESOME___.styles={}),Uu.___FONT_AWESOME___.hooks||(Uu.___FONT_AWESOME___.hooks={}),Uu.___FONT_AWESOME___.shims||(Uu.___FONT_AWESOME___.shims=[]);var ju=Uu.___FONT_AWESOME___,Vu=[],Bu=!1;function zu(e){Yc&&(Bu?setTimeout(e,0):Vu.push(e))}function Gu(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?Iu(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(Iu(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(Gu).join(""),"</").concat(t,">")}function Hu(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}Yc&&((Bu=(qc.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(qc.readyState))||qc.addEventListener("DOMContentLoaded",(function e(){qc.removeEventListener("DOMContentLoaded",e),Bu=1,Vu.map((function(e){return e()}))})));var Wu=function(e,t,n,r){var i,a,o,s=Object.keys(e),c=s.length,u=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<c;i++)o=u(o,e[a=s[i]],a,e);return o};function Ku(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function qu(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function Qu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=qu(t);"function"!==typeof ju.hooks.addPack||i?ju.styles[e]=Ic(Ic({},ju.styles[e]||{}),a):ju.hooks.addPack(e,qu(t)),"fas"===e&&Qu("fa",t)}var Ju=ju.styles,Yu=ju.shims,$u=Object.values(cu),Xu=null,Zu={},el={},tl={},nl={},rl={},il=Object.keys(ou);function al(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~wu.indexOf(n))?null:a}var ol,sl=function(){var e=function(e){return Wu(Ju,(function(t,n,r){return t[r]=Wu(n,e,{}),t}),{})};Zu=e((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var r=t[2].filter((function(e){return"number"===typeof e}));r.forEach((function(t){e[t.toString(16)]=n}))}return e})),el=e((function(e,t,n){if(e[n]=n,t[2]){var r=t[2].filter((function(e){return"string"===typeof e}));r.forEach((function(t){e[t]=n}))}return e})),rl=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in Ju||Eu.autoFetchSvg,n=Wu(Yu,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});tl=n.names,nl=n.unicodes,Xu=fl(Eu.styleDefault)};function cl(e,t){return(Zu[e]||{})[t]}function ul(e,t){return(rl[e]||{})[t]}function ll(e){return tl[e]||{prefix:null,iconName:null}}function dl(){return Xu}ol=function(e){Xu=fl(e.styleDefault)},xu.push(ol),sl();function fl(e){var t=su[e]||su[ou[e]],n=e in ju.styles?e:null;return t||n||null}function hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipLookups,r=void 0!==n&&n,i=null,a=e.reduce((function(e,t){var n=al(Eu.familyPrefix,t);if(Ju[t]?(t=$u.includes(t)?uu[t]:t,i=t,e.prefix=t):il.indexOf(t)>-1?(i=t,e.prefix=fl(t)):n?e.iconName=n:t!==Eu.replacementClass&&e.rest.push(t),!r&&e.prefix&&e.iconName){var a="fa"===i?ll(e.iconName):{},o=ul(e.prefix,e.iconName);a.prefix&&(i=null),e.iconName=a.iconName||o||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||Ju.far||!Ju.fas||Eu.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return"fa"!==a.prefix&&"fa"!==i||(a.prefix=dl()||"fas"),a}var pl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=Ic(Ic({},e.definitions[t]||{}),i[t]),Qu(t,i[t]);var n=cu[t];n&&Qu(n,i[t]),sl()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&Nc(t.prototype,n),r&&Nc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),vl=[],ml={},gl={},yl=Object.keys(gl);function kl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=ml[e]||[];return a.forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function bl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=ml[e]||[];i.forEach((function(e){e.apply(null,n)}))}function wl(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return gl[e]?gl[e].apply(null,t):void 0}function Sl(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||dl();if(t)return t=ul(n,t)||t,Hu(Tl.definitions,n,t)||Hu(ju.styles,n,t)}var Tl=new pl,El={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yc?(bl("beforeI2svg",e),wl("pseudoElements2svg",e),wl("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Eu.autoReplaceSvg&&(Eu.autoReplaceSvg=!0),Eu.observeMutations=!0,zu((function(){Pl({autoReplaceSvgRoot:t}),bl("watch",e)}))}},xl={icon:function(e){if(null===e)return null;if("object"===Oc(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:ul(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=fl(e[0]);return{prefix:n,iconName:ul(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Eu.familyPrefix,"-"))>-1||e.match(lu))){var r=hl(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||dl(),iconName:ul(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=dl();return{prefix:i,iconName:ul(i,e)||e}}}},Cl={noAuto:function(){Eu.autoReplaceSvg=!1,Eu.observeMutations=!1,bl("noAuto")},config:Eu,dom:El,parse:xl,library:Tl,findIconDefinition:Sl,toHtml:Gu},Pl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?qc:t;(Object.keys(ju.styles).length>0||Eu.autoFetchSvg)&&Yc&&Eu.autoReplaceSvg&&Cl.dom.i2svg({node:n})};function Rl(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return Gu(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Yc){var t=qc.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function _l(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,c=e.title,u=e.maskId,l=e.titleId,d=e.extra,f=e.watchable,h=void 0!==f&&f,p=r.found?r:n,v=p.width,m=p.height,g="fak"===i,y=[Eu.replacementClass,a?"".concat(Eu.familyPrefix,"-").concat(a):""].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),k={children:[],attributes:Ic(Ic({},d.attributes),{},{"data-prefix":i,"data-icon":a,class:y,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(m)})},b=g&&!~d.classes.indexOf("fa-fw")?{width:"".concat(v/m*16*.0625,"em")}:{};h&&(k.attributes[Zc]=""),c&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(l||Ru())},children:[c]}),delete k.attributes.title);var w=Ic(Ic({},k),{},{prefix:i,iconName:a,main:n,mask:r,maskId:u,transform:o,symbol:s,styles:Ic(Ic({},b),d.styles)}),S=r.found&&n.found?wl("generateAbstractMask",w)||{children:[],attributes:{}}:wl("generateAbstractIcon",w)||{children:[],attributes:{}},T=S.children,E=S.attributes;return w.children=T,w.attributes=E,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(Eu.familyPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ic(Ic({},i),{},{id:o}),children:r}]}]}(w):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(Nu(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=Ou(Ic(Ic({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(w)}function Al(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,c=void 0!==s&&s,u=Ic(Ic(Ic({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});c&&(u[Zc]="");var l=Ic({},o.styles);Nu(i)&&(l.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,i=e.height,a=void 0===i?16:i,o=e.startCentered,s=void 0!==o&&o,c="";return c+=s&&$c?"translate(".concat(t.x/Cu-r/2,"em, ").concat(t.y/Cu-a/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/Cu,"em), calc(-50% + ").concat(t.y/Cu,"em)) "):"translate(".concat(t.x/Cu,"em, ").concat(t.y/Cu,"em) "),c+="scale(".concat(t.size/Cu*(t.flipX?-1:1),", ").concat(t.size/Cu*(t.flipY?-1:1),") "),c+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);var d=Ou(l);d.length>0&&(u.style=d);var f=[];return f.push({tag:"span",attributes:u,children:[t]}),a&&f.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),f}function Il(e){var t=e.content,n=e.title,r=e.extra,i=Ic(Ic(Ic({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=Ou(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var Ol=ju.styles;function Nl(e){var t=e[0],n=e[1],r=Lc(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Eu.familyPrefix,"-").concat(gu)},children:[{tag:"path",attributes:{class:"".concat(Eu.familyPrefix,"-").concat(bu),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Eu.familyPrefix,"-").concat(ku),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var Dl={found:!1,width:512,height:512};function Ll(e,t){var n=t;return"fa"===t&&null!==Eu.styleDefault&&(t=dl()),new Promise((function(r,i){wl("missingIconAbstract");if("fa"===n){var a=ll(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&Ol[t]&&Ol[t][e])return r(Nl(Ol[t][e]));!function(e,t){au||Eu.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(Ic(Ic({},Dl),{},{icon:Eu.showMissingIcons&&e&&wl("missingIconAbstract")||{}}))}))}var Ml=function(){},Fl=Eu.measurePerformance&&Jc&&Jc.mark&&Jc.measure?Jc:{mark:Ml,measure:Ml},Ul='FA "6.1.1"',jl=function(e){Fl.mark("".concat(Ul," ").concat(e," ends")),Fl.measure("".concat(Ul," ").concat(e),"".concat(Ul," ").concat(e," begins"),"".concat(Ul," ").concat(e," ends"))},Vl=function(e){return Fl.mark("".concat(Ul," ").concat(e," begins")),function(){return jl(e)}},Bl=function(){};function zl(e){return"string"===typeof(e.getAttribute?e.getAttribute(Zc):null)}function Gl(e){return qc.createElementNS("http://www.w3.org/2000/svg",e)}function Hl(e){return qc.createElement(e)}function Wl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,r=void 0===n?"svg"===e.tag?Gl:Hl:n;if("string"===typeof e)return qc.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])}));var a=e.children||[];return a.forEach((function(e){i.appendChild(Wl(e,{ceFn:r}))})),i}var Kl={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(Wl(e),t)})),null===t.getAttribute(Zc)&&Eu.keepOriginalSource){var n=qc.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~Au(t).indexOf(Eu.replacementClass))return Kl.replace(e);var r=new RegExp("".concat(Eu.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===Eu.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return Gu(e)})).join("\n");t.setAttribute(Zc,""),t.innerHTML=a}};function ql(e){e()}function Ql(e,t){var n="function"===typeof t?t:Bl;if(0===e.length)n();else{var r=ql;"async"===Eu.mutateApproach&&(r=Kc.requestAnimationFrame||ql),r((function(){var t=!0===Eu.autoReplaceSvg?Kl.replace:Kl[Eu.autoReplaceSvg]||Kl.replace,r=Vl("mutate");e.map(t),r(),n()}))}}var Jl=!1;function Yl(){Jl=!0}function $l(){Jl=!1}var Xl=null;function Zl(e){if(Qc&&Eu.observeMutations){var t=e.treeCallback,n=void 0===t?Bl:t,r=e.nodeCallback,i=void 0===r?Bl:r,a=e.pseudoElementsCallback,o=void 0===a?Bl:a,s=e.observeMutationsRoot,c=void 0===s?qc:s;Xl=new Qc((function(e){if(!Jl){var t=dl();_u(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!zl(e.addedNodes[0])&&(Eu.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&Eu.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&zl(e.target)&&~mu.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(tu):null,n=e.getAttribute?e.getAttribute(nu):null;return t&&n}(e.target)){var r=hl(Au(e.target)),a=r.prefix,s=r.iconName;e.target.setAttribute(tu,a||t),s&&e.target.setAttribute(nu,s)}else(c=e.target)&&c.classList&&c.classList.contains&&c.classList.contains(Eu.replacementClass)&&i(e.target);var c}))}})),Yc&&Xl.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function ed(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}function td(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=hl(Au(e));return i.prefix||(i.prefix=dl()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||i.prefix&&r.length>0&&(i.iconName=function(e,t){return(el[e]||{})[t]}(i.prefix,e.innerText)||cl(i.prefix,Ku(e.innerText))),i}function nd(e){var t=_u(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Eu.autoA11y&&(n?t["aria-labelledby"]="".concat(Eu.replacementClass,"-title-").concat(r||Ru()):(t["aria-hidden"]="true",t.focusable="false")),t}function rd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=td(e),r=n.iconName,i=n.prefix,a=n.rest,o=nd(e),s=kl("parseNodeAttributes",{},e),c=t.styleParser?ed(e):[];return Ic({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:Pu,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:c,attributes:o}},s)}var id=ju.styles;function ad(e){var t="nest"===Eu.autoReplaceSvg?rd(e,{styleParser:!1}):rd(e);return~t.extra.classes.indexOf(du)?wl("generateLayersText",e,t):wl("generateSvgReplacementMutation",e,t)}function od(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Yc)return Promise.resolve();var n=qc.documentElement.classList,r=function(e){return n.add("".concat(ru,"-").concat(e))},i=function(e){return n.remove("".concat(ru,"-").concat(e))},a=Eu.autoFetchSvg?Object.keys(ou):Object.keys(id),o=[".".concat(du,":not([").concat(Zc,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(Zc,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=_u(e.querySelectorAll(o))}catch(cf){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var c=Vl("onTree"),u=s.reduce((function(e,t){try{var n=ad(t);n&&e.push(n)}catch(cf){au||"MissingIcon"===cf.name&&console.error(cf)}return e}),[]);return new Promise((function(e,n){Promise.all(u).then((function(n){Ql(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),c(),e()}))})).catch((function(e){c(),n(e)}))}))}function sd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ad(e).then((function(e){e&&Ql([e],t)}))}var cd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Pu:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,s=void 0===o?null:o,c=t.maskId,u=void 0===c?null:c,l=t.title,d=void 0===l?null:l,f=t.titleId,h=void 0===f?null:f,p=t.classes,v=void 0===p?[]:p,m=t.attributes,g=void 0===m?{}:m,y=t.styles,k=void 0===y?{}:y;if(e){var b=e.prefix,w=e.iconName,S=e.icon;return Rl(Ic({type:"icon"},e),(function(){return bl("beforeDOMElementCreation",{iconDefinition:e,params:t}),Eu.autoA11y&&(d?g["aria-labelledby"]="".concat(Eu.replacementClass,"-title-").concat(h||Ru()):(g["aria-hidden"]="true",g.focusable="false")),_l({icons:{main:Nl(S),mask:s?Nl(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:w,transform:Ic(Ic({},Pu),r),symbol:a,title:d,maskId:u,titleId:h,extra:{attributes:g,styles:k,classes:v}})}))}},ud={mixout:function(){return{icon:(e=cd,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:Sl(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Sl(i||{})),e(r,Ic(Ic({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=od,e.nodeCallback=sd,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?qc:t,r=e.callback;return od(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,s=t.symbol,c=t.mask,u=t.maskId,l=t.extra;return new Promise((function(t,d){Promise.all([Ll(n,a),c.iconName?Ll(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(c){var d=Lc(c,2),f=d[0],h=d[1];t([e,_l({icons:{main:f,mask:h},prefix:a,iconName:n,transform:o,symbol:s,maskId:u,title:r,titleId:i,extra:l,watchable:!0})])})).catch(d)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=Ou(e.styles);return o.length>0&&(r.style=o),Nu(a)&&(t=wl("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},ld={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return Rl({type:"layer"},(function(){bl("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(Eu.familyPrefix,"-layers")].concat(Mc(r)).join(" ")},children:n}]}))}}}},dd={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,s=void 0===o?{}:o,c=t.styles,u=void 0===c?{}:c;return Rl({type:"counter",content:e},(function(){return bl("beforeDOMElementCreation",{content:e,params:t}),Il({content:e.toString(),title:r,extra:{attributes:s,styles:u,classes:["".concat(Eu.familyPrefix,"-layers-counter")].concat(Mc(a))}})}))}}}},fd={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Pu:n,i=t.title,a=void 0===i?null:i,o=t.classes,s=void 0===o?[]:o,c=t.attributes,u=void 0===c?{}:c,l=t.styles,d=void 0===l?{}:l;return Rl({type:"text",content:e},(function(){return bl("beforeDOMElementCreation",{content:e,params:t}),Al({content:e,transform:Ic(Ic({},Pu),r),title:a,extra:{attributes:u,styles:d,classes:["".concat(Eu.familyPrefix,"-layers-text")].concat(Mc(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if($c){var s=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();a=c.width/s,o=c.height/s}return Eu.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,Al({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},hd=new RegExp('"',"ug"),pd=[1105920,1112319];function vd(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=_u(e.children).filter((function(e){return e.getAttribute(eu)===t}))[0],o=Kc.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(fu),c=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(a&&!s)return e.removeChild(a),r();if(s&&"none"!==u&&""!==u){var l=o.getPropertyValue("content"),d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?su[s[2].toLowerCase()]:hu[c],f=function(e){var t=e.replace(hd,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=pd[0]&&n<=pd[1],i=2===t.length&&t[0]===t[1];return{value:Ku(i?t[0]:t),isSecondary:r||i}}(l),h=f.value,p=f.isSecondary,v=s[0].startsWith("FontAwesome"),m=cl(d,h),g=m;if(v){var y=function(e){var t=nl[e],n=cl("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(h);y.iconName&&y.prefix&&(m=y.iconName,d=y.prefix)}if(!m||p||a&&a.getAttribute(tu)===d&&a.getAttribute(nu)===g)r();else{e.setAttribute(n,g),a&&e.removeChild(a);var k={iconName:null,title:null,titleId:null,prefix:null,transform:Pu,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},b=k.extra;b.attributes[eu]=t,Ll(m,d).then((function(i){var a=_l(Ic(Ic({},k),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:d,iconName:g,extra:b,watchable:!0})),o=qc.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return Gu(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function md(e){return Promise.all([vd(e,"::before"),vd(e,"::after")])}function gd(e){return e.parentNode!==document.head&&!~iu.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(eu)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function yd(e){if(Yc)return new Promise((function(t,n){var r=_u(e.querySelectorAll("*")).filter(gd).map(md),i=Vl("searchPseudoElements");Yl(),Promise.all(r).then((function(){i(),$l(),t()})).catch((function(){i(),$l(),n()}))}))}var kd=!1,bd=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},wd={mixout:function(){return{parse:{transform:function(e){return bd(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=bd(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),u={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(c)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:Ic({},u.outer),children:[{tag:"g",attributes:Ic({},u.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Ic(Ic({},t.icon.attributes),u.path)}]}]}}}},Sd={x:0,y:0,width:"100%",height:"100%"};function Td(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Ed={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?hl(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=dl()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,s=e.transform,c=i.width,u=i.icon,l=a.width,d=a.icon,f=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:l,iconWidth:c}),h={tag:"rect",attributes:Ic(Ic({},Sd),{},{fill:"white"})},p=u.children?{children:u.children.map(Td)}:{},v={tag:"g",attributes:Ic({},f.inner),children:[Td(Ic({tag:u.tag,attributes:Ic(Ic({},u.attributes),f.path)},p))]},m={tag:"g",attributes:Ic({},f.outer),children:[v]},g="mask-".concat(o||Ru()),y="clip-".concat(o||Ru()),k={tag:"mask",attributes:Ic(Ic({},Sd),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,m]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=d,"g"===t.tag?t.children:[t])},k]};return n.push(b,{tag:"rect",attributes:Ic({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(g,")")},Sd)}),{children:n,attributes:r}}}},xd={provides:function(e){var t=!1;Kc.matchMedia&&(t=Kc.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:Ic(Ic({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=Ic(Ic({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Ic(Ic({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:Ic(Ic({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ic(Ic({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:Ic(Ic({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ic(Ic({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:Ic(Ic({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ic(Ic({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;vl=e,ml={},Object.keys(gl).forEach((function(e){-1===yl.indexOf(e)&&delete gl[e]})),vl.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===Oc(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){ml[e]||(ml[e]=[]),ml[e].push(r[e])}))}e.provides&&e.provides(gl)}))}([Fu,ud,ld,dd,fd,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=yd,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?qc:t;Eu.searchPseudoElements&&yd(n)}}},{mixout:function(){return{dom:{unwatch:function(){Yl(),kd=!0}}}},hooks:function(){return{bootstrap:function(){Zl(kl("mutationObserverCallbacks",{}))},noAuto:function(){Xl&&Xl.disconnect()},watch:function(e){var t=e.observeMutationsRoot;kd?$l():Zl(kl("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},wd,Ed,xd,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:Cl});var Cd=Cl.parse,Pd=Cl.icon,Rd=n(7),_d=n.n(Rd);function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(n),!0).forEach((function(t){Nd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Od(e){return Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Od(e)}function Nd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ld(e){return function(e){if(Array.isArray(e))return Md(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Md(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Md(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fd(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Ud=["style"];function jd(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Fd(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{})}var Vd=!1;try{Vd=!0}catch(cf){}function Bd(e){return e&&"object"===Od(e)&&e.prefix&&e.iconName&&e.icon?e:Cd.icon?Cd.icon(e):null===e?null:e&&"object"===Od(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function zd(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Nd({},e,t):{}}var Gd=a.forwardRef((function(e,t){var n=e.icon,r=e.mask,i=e.symbol,a=e.className,o=e.title,s=e.titleId,c=e.maskId,u=Bd(n),l=zd("classes",[].concat(Ld(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,s=e.flash,c=e.spin,u=e.spinPulse,l=e.spinReverse,d=e.pulse,f=e.fixedWidth,h=e.inverse,p=e.border,v=e.listItem,m=e.flip,g=e.size,y=e.rotation,k=e.pull,b=(Nd(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":c,"fa-spin-reverse":l,"fa-spin-pulse":u,"fa-pulse":d,"fa-fw":f,"fa-inverse":h,"fa-border":p,"fa-li":v,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(g),"undefined"!==typeof g&&null!==g),Nd(t,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),Nd(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),Nd(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(e)),Ld(a.split(" ")))),d=zd("transform","string"===typeof e.transform?Cd.transform(e.transform):e.transform),f=zd("mask",Bd(r)),h=Pd(u,Id(Id(Id(Id({},l),d),f),{},{symbol:i,title:o,titleId:s,maskId:c}));if(!h)return function(){var e;!Vd&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var p=h.abstract,v={ref:t};return Object.keys(e).forEach((function(t){Gd.defaultProps.hasOwnProperty(t)||(v[t]=e[t])})),Hd(p[0],v)}));Gd.displayName="FontAwesomeIcon",Gd.propTypes={beat:_d().bool,border:_d().bool,beatFade:_d().bool,bounce:_d().bool,className:_d().string,fade:_d().bool,flash:_d().bool,mask:_d().oneOfType([_d().object,_d().array,_d().string]),maskId:_d().string,fixedWidth:_d().bool,inverse:_d().bool,flip:_d().oneOf([!0,!1,"horizontal","vertical","both"]),icon:_d().oneOfType([_d().object,_d().array,_d().string]),listItem:_d().bool,pull:_d().oneOf(["right","left"]),pulse:_d().bool,rotation:_d().oneOf([0,90,180,270]),shake:_d().bool,size:_d().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:_d().bool,spinPulse:_d().bool,spinReverse:_d().bool,symbol:_d().oneOfType([_d().bool,_d().string]),title:_d().string,titleId:_d().string,transform:_d().oneOfType([_d().string,_d().object]),swapOpacity:_d().bool},Gd.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var Hd=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=jd(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Fd(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,c=Dd(r,Ud);return a.attrs.style=Id(Id({},a.attrs.style),s),t.apply(void 0,[n.tag,Id(Id({},a.attrs),c)].concat(Ld(i)))}.bind(null,a.createElement),Wd={prefix:"fas",iconName:"arrow-up-right-from-square",icon:[448,512,["external-link"],"f08e","M256 64C256 46.33 270.3 32 288 32H415.1C415.1 32 415.1 32 415.1 32C420.3 32 424.5 32.86 428.2 34.43C431.1 35.98 435.5 38.27 438.6 41.3C438.6 41.35 438.6 41.4 438.7 41.44C444.9 47.66 447.1 55.78 448 63.9C448 63.94 448 63.97 448 64V192C448 209.7 433.7 224 416 224C398.3 224 384 209.7 384 192V141.3L214.6 310.6C202.1 323.1 181.9 323.1 169.4 310.6C156.9 298.1 156.9 277.9 169.4 265.4L338.7 96H288C270.3 96 256 81.67 256 64V64zM0 128C0 92.65 28.65 64 64 64H160C177.7 64 192 78.33 192 96C192 113.7 177.7 128 160 128H64V416H352V320C352 302.3 366.3 288 384 288C401.7 288 416 302.3 416 320V416C416 451.3 387.3 480 352 480H64C28.65 480 0 451.3 0 416V128z"]},Kd={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200C94.93 200 120 225.1 120 256zM280 256C280 286.9 254.9 312 224 312C193.1 312 168 286.9 168 256C168 225.1 193.1 200 224 200C254.9 200 280 225.1 280 256zM328 256C328 225.1 353.1 200 384 200C414.9 200 440 225.1 440 256C440 286.9 414.9 312 384 312C353.1 312 328 286.9 328 256z"]},qd={prefix:"fas",iconName:"face-smile",icon:[512,512,[128578,"smile"],"f118","M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM164.1 325.5C158.3 318.8 148.2 318.1 141.5 323.9C134.8 329.7 134.1 339.8 139.9 346.5C162.1 372.1 200.9 400 255.1 400C311.1 400 349.8 372.1 372.1 346.5C377.9 339.8 377.2 329.7 370.5 323.9C363.8 318.1 353.7 318.8 347.9 325.5C329.9 346.2 299.4 368 255.1 368C212.6 368 182 346.2 164.1 325.5H164.1zM176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176zM336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240z"]},Qd={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"]},Jd={prefix:"fas",iconName:"message",icon:[512,512,["comment-alt"],"f27a","M511.1 63.1v287.1c0 35.25-28.75 63.1-64 63.1h-144l-124.9 93.68c-7.875 5.75-19.12 .0497-19.12-9.7v-83.98h-96c-35.25 0-64-28.75-64-63.1V63.1c0-35.25 28.75-63.1 64-63.1h384C483.2 0 511.1 28.75 511.1 63.1z"]},Yd={prefix:"fas",iconName:"microphone",icon:[384,512,[],"f130","M192 352c53.03 0 96-42.97 96-96v-160c0-53.03-42.97-96-96-96s-96 42.97-96 96v160C96 309 138.1 352 192 352zM344 192C330.7 192 320 202.7 320 215.1V256c0 73.33-61.97 132.4-136.3 127.7c-66.08-4.169-119.7-66.59-119.7-132.8L64 215.1C64 202.7 53.25 192 40 192S16 202.7 16 215.1v32.15c0 89.66 63.97 169.6 152 181.7V464H128c-18.19 0-32.84 15.18-31.96 33.57C96.43 505.8 103.8 512 112 512h160c8.222 0 15.57-6.216 15.96-14.43C288.8 479.2 274.2 464 256 464h-40v-33.77C301.7 418.5 368 344.9 368 256V215.1C368 202.7 357.3 192 344 192z"]},$d={prefix:"fas",iconName:"microphone-slash",icon:[640,512,[],"f131","M383.1 464l-39.1-.0001v-33.77c20.6-2.824 39.98-9.402 57.69-18.72l-43.26-33.91c-14.66 4.65-30.28 7.179-46.68 6.144C245.7 379.6 191.1 317.1 191.1 250.9V247.2L143.1 209.5l.0001 38.61c0 89.65 63.97 169.6 151.1 181.7v34.15l-40 .0001c-17.67 0-31.1 14.33-31.1 31.1C223.1 504.8 231.2 512 239.1 512h159.1c8.838 0 15.1-7.164 15.1-15.1C415.1 478.3 401.7 464 383.1 464zM630.8 469.1l-159.3-124.9c15.37-25.94 24.53-55.91 24.53-88.21V216c0-13.25-10.75-24-23.1-24c-13.25 0-24 10.75-24 24l-.0001 39.1c0 21.12-5.559 40.77-14.77 58.24l-25.72-20.16c5.234-11.68 8.493-24.42 8.493-38.08l-.001-155.1c0-52.57-40.52-98.41-93.07-99.97c-54.37-1.617-98.93 41.95-98.93 95.95l0 54.25L38.81 5.111C34.41 1.673 29.19 0 24.03 0C16.91 0 9.839 3.158 5.12 9.189c-8.187 10.44-6.37 25.53 4.068 33.7l591.1 463.1c10.5 8.203 25.57 6.328 33.69-4.078C643.1 492.4 641.2 477.3 630.8 469.1z"]},Xd={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3C0 496.5 15.52 512 34.66 512h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM616 200h-48v-48C568 138.8 557.3 128 544 128s-24 10.75-24 24v48h-48C458.8 200 448 210.8 448 224s10.75 24 24 24h48v48C520 309.3 530.8 320 544 320s24-10.75 24-24v-48h48C629.3 248 640 237.3 640 224S629.3 200 616 200z"]},Zd={prefix:"fas",iconName:"video",icon:[576,512,["video-camera"],"f03d","M384 112v288c0 26.51-21.49 48-48 48h-288c-26.51 0-48-21.49-48-48v-288c0-26.51 21.49-48 48-48h288C362.5 64 384 85.49 384 112zM576 127.5v256.9c0 25.5-29.17 40.39-50.39 25.79L416 334.7V177.3l109.6-75.56C546.9 87.13 576 102.1 576 127.5z"]},ef={prefix:"fas",iconName:"video-slash",icon:[640,512,[],"f4e2","M32 399.1c0 26.51 21.49 47.1 47.1 47.1h287.1c19.57 0 36.34-11.75 43.81-28.56L32 121.8L32 399.1zM630.8 469.1l-89.21-69.92l15.99 11.02c21.22 14.59 50.41-.2971 50.41-25.8V127.5c0-25.41-29.07-40.37-50.39-25.76l-109.6 75.56l.0001 148.5l-32-25.08l.0001-188.7c0-26.51-21.49-47.1-47.1-47.1H113.9L38.81 5.111C34.41 1.673 29.19 0 24.03 0C16.91 0 9.84 3.158 5.121 9.189C-3.066 19.63-1.249 34.72 9.189 42.89l591.1 463.1c10.5 8.203 25.57 6.328 33.69-4.078C643.1 492.4 641.2 477.3 630.8 469.1z"]};var tf=function(){var e=dc(Do).length,t=dc(No),n=fc(),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_c,t=dc(zo),n=dc(Go),r=dc(As),i=fc(),o=(0,a.useCallback)((function(){return hc(void 0,void 0,void 0,f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.setLocalAudioEnabled(!t);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e(n.t0,"toggleAudio");case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))}),[i,t,e]),s=(0,a.useCallback)((function(){return hc(void 0,void 0,void 0,f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.setLocalVideoEnabled(!n);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e(t.t0,"toggleVideo");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))}),[i,n,e]);return{isLocalAudioEnabled:t,isLocalVideoEnabled:n,toggleAudio:(null==r?void 0:r.audio)?o:void 0,toggleVideo:(null==r?void 0:r.video)?s:void 0}}(),i=r.isLocalAudioEnabled,o=r.isLocalVideoEnabled,s=r.toggleAudio,c=r.toggleVideo;return(0,Cc.jsxs)("div",{className:"main_control",children:[(0,Cc.jsxs)("div",{className:"main_controls_section",children:[(0,Cc.jsx)("div",{className:"main_controls_button",onClick:s,children:i?(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(Gd,{icon:$d,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Mute"})]}):(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(Gd,{icon:Yd,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Unmute"})]})}),(0,Cc.jsx)("div",{className:"main_controls_button",onClick:c,children:o?(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(Gd,{icon:Zd,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Stop Video"})]}):(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(Gd,{icon:ef,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Start Video"})]})})]}),(0,Cc.jsxs)("div",{className:"main_controls_section",children:[(0,Cc.jsxs)("div",{className:"main_controls_button",children:[(0,Cc.jsxs)("div",{children:[(0,Cc.jsx)(Gd,{icon:Xd,size:"lg"}),(0,Cc.jsx)(Cc.Fragment,{children:e})]}),(0,Cc.jsx)("span",{className:"button_name",children:"Participants"})]}),(0,Cc.jsxs)("div",{className:"main_controls_button",children:[(0,Cc.jsx)(Gd,{icon:Wd,size:"lg",color:""}),(0,Cc.jsx)("span",{className:"button_name",children:"Share Screen"})]}),(0,Cc.jsxs)("div",{className:"main_controls_button",children:[(0,Cc.jsx)(Gd,{icon:Jd,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Chat"})]}),(0,Cc.jsxs)("div",{className:"main_controls_button",children:[(0,Cc.jsx)(Gd,{icon:qd,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Reactions"})]}),(0,Cc.jsxs)("div",{className:"main_controls_button",children:[(0,Cc.jsx)(Gd,{icon:Qd,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"Settings"})]}),(0,Cc.jsxs)("div",{className:"main_controls_button",children:[(0,Cc.jsx)(Gd,{icon:Kd,size:"lg"}),(0,Cc.jsx)("span",{className:"button_name",children:"More"})]})]}),(0,Cc.jsx)("div",{className:"main_controls_section",children:(0,Cc.jsx)("div",{className:"main_controls_button",children:t&&(0,Cc.jsx)("button",{id:"leave-btn",class:"btn-danger",onClick:function(){return n.leave()},children:"Leave"})})})]})};function nf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nf(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var af=function(){var e=fc(),t=u((0,a.useState)({name:"",token:""}),2),n=t[0],r=t[1],i=function(e){r((function(t){return rf(rf({},t),{},l({},e.target.name,e.target.value))}))};return(0,Cc.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.join({userName:n.name,authToken:n.token})},children:[(0,Cc.jsx)("h2",{className:"meeting-title",children:"Join Meeting"}),(0,Cc.jsx)("div",{className:"input-container",children:(0,Cc.jsx)("input",{required:!0,value:n.name,onChange:i,id:"name",type:"text",name:"name",placeholder:"Your name"})}),(0,Cc.jsx)("div",{className:"input-container",children:(0,Cc.jsx)("input",{required:!0,value:n.token,onChange:i,id:"token",type:"text",name:"token",placeholder:"Auth token"})}),(0,Cc.jsx)("button",{className:"btn-signin",children:"Join"})]})};var of=function(){var e=dc(No),t=fc();return(0,a.useEffect)((function(){window.onunload=function(){e&&t.leave()}}),[t,e]),(0,Cc.jsx)("div",{className:"App",children:e?(0,Cc.jsxs)(Cc.Fragment,{children:[(0,Cc.jsx)(Rc,{}),(0,Cc.jsx)(tf,{})]}):(0,Cc.jsx)(af,{})})},sf=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};o.createRoot(document.getElementById("root")).render((0,Cc.jsx)(a.StrictMode,{children:(0,Cc.jsx)(lc,{children:(0,Cc.jsx)(of,{})})})),sf()}()}();
//# sourceMappingURL=main.72276976.js.map